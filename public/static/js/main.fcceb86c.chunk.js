(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{215:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(28),s=n.n(c),i=n(7),o=(0,n(2).createContext)(),u=n(4),l={login:"[auth] login",signup:"[auth] signup",logout:"[auth] logout",hasToken:"[auth] hastoken",getCompany:"[company] getCompany",addCompany:"[company] addCompany",companyUpdate:"[company] companyUpdate",companyDelete:"[company] companyDelete",getPosts:"[post] getPosts",getThisPost:"[post] getThisPost",addPost:"[post] addPost",postUpdate:"[post] postUpdate",addSection:"[Section] addSection",getSections:"[Section] getSections",sectionUpdate:"[Section] sectionUpdate",deleteSection:"[Section] deleteSection",updateThis:"[Section] updateThis"},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.login:case l.signup:case l.hasToken:return Object(u.a)({},t.payload);case l.logout:return{logged:!1};default:return e}},j=(n(93),n(94),n(95),n(96),n(97),n(17)),b=n(16),p=n(3),O=n.n(p),m=n(5),h="https://bratic-app.herokuapp.com/api",f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",r="".concat(h,"/").concat(e);return"GET"===n?fetch(r):fetch(r,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",r="".concat(h,"/").concat(e),a=localStorage.getItem("bratic-token")||"";return"GET"===n?fetch(r,{method:n,headers:{"x-token":a}}):fetch(r,{method:n,headers:{"Content-type":"application/json","x-token":a},body:JSON.stringify(t)})},v=n(8),g=n.n(v),y=function(){var e=Object(m.a)(O.a.mark((function e(t,n){var r,a,c,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("auth/login",{email:t,password:n},"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).ok){e.next=13;break}return c={id:a.id,name:a.name,email:a.email,logged:!0,token:a.token},localStorage.setItem("bratic-user",JSON.stringify(c)),localStorage.setItem("bratic-token",a.token),e.abrupt("return",c);case 13:s=a.msg,g.a.fire("Error",s,"error");case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(m.a)(O.a.mark((function e(t,n,r){var a,c,s,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("auth/signup",{name:t,email:n,password:r},"POST");case 2:return a=e.sent,e.next=5,a.json();case 5:if(!(c=e.sent).ok){e.next=13;break}return s={id:c.id,name:c.name,email:c.email,token:c.token,logged:!0},localStorage.setItem("bratic-user",JSON.stringify(s)),localStorage.setItem("bratic-token",c.token),e.abrupt("return",s);case 13:i=c.msg,g.a.fire("Error",i,"error");case 15:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),N=n(25),w=function(){var e=Object(m.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.cloudinary.com/v1_1/bratic-app/upload",(n=new FormData).append("upload_preset","bratic-app"),n.append("file",t),n.append("folder","web"),e.next=7,fetch("https://api.cloudinary.com/v1_1/bratic-app/upload",{method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){return r=e.secure_url})).catch((function(e){return console.log(e)}));case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useState)(e),n=Object(i.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(!1),o=Object(i.a)(s,2),l=o[0],d=o[1],j=function(){c(e)},b=function(e){var t=e.target;c(Object(u.a)(Object(u.a)({},a),{},Object(N.a)({},t.name,t.value)))},p=function(){var e=Object(m.a)(O.a.mark((function e(t){var n,r,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,d(!0),r=n.files[0],e.next=5,w(r);case 5:return s=e.sent,e.next=8,c(Object(u.a)(Object(u.a)({},a),{},Object(N.a)({},n.name,s)));case 8:d(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{values:a,setValues:c,handleInputChange:b,handleFileChange:p,resetForm:j,loading:l}},S=n(1),E=function(){var e=C({}),t=e.values,n=e.handleInputChange,a=t.email,c=t.password,s=Object(r.useContext)(o).dispatch,i=function(){var e=Object(m.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,y(a,c);case 3:n=e.sent,s({type:l.login,payload:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("section",{className:"login",children:[Object(S.jsxs)("form",{onSubmit:i,children:[Object(S.jsx)("label",{children:"Email"}),Object(S.jsx)("input",{type:"email",onChange:n,placeholder:"Tu email",name:"email"}),Object(S.jsx)("label",{children:"Contrase\xf1a"}),Object(S.jsx)("input",{type:"password",onChange:n,placeholder:"Contrase\xf1a",name:"password"}),Object(S.jsx)("button",{type:"submit",className:"my-btn mini",children:"Entrar"})]}),Object(S.jsxs)("small",{children:["\xbfNo tienes cuenta? Crea una ",Object(S.jsx)(j.b,{to:"/registro",children:"aqu\xed"})," "]})]})})},T=function(){var e=C({}),t=e.values,n=e.handleInputChange,a=t.name,c=t.email,s=t.password,i=t.password2,u=Object(r.useContext)(o).dispatch,d=function(){var e=Object(m.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s!==i){e.next=8;break}return e.next=4,k(a,c,s);case 4:n=e.sent,u({type:l.signup,payload:n}),e.next=9;break;case 8:g.a.fire("Error","Las contrase\xf1as deben coincidir","error");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("section",{className:"login",children:[Object(S.jsxs)("form",{onSubmit:d,children:[Object(S.jsx)("label",{children:"Nombre"}),Object(S.jsx)("input",{type:"text",onChange:n,placeholder:"Tu nombre",name:"name"}),Object(S.jsx)("label",{children:"Email"}),Object(S.jsx)("input",{type:"email",onChange:n,placeholder:"Tu email",name:"email"}),Object(S.jsx)("label",{children:"Contrase\xf1a"}),Object(S.jsx)("input",{type:"password",onChange:n,placeholder:"Contrase\xf1a",name:"password"}),Object(S.jsx)("label",{children:"Repite Contrase\xf1a"}),Object(S.jsx)("input",{type:"password",onChange:n,placeholder:"Repite Contrase\xf1a",name:"password2"}),Object(S.jsx)("button",{type:"submit",className:"my-btn mini",children:"Registro"})]}),Object(S.jsxs)("small",{children:["\xbfYa est\xe1s registrado? Entra ",Object(S.jsx)(j.b,{to:"/",children:"aqu\xed"})," "]})]})})},D=n(23),I=function(e){var t=e.nameValue,n=e.deleteField,a=e.inputType,c=e.editLabel,s=e.editAction,o=e.editValue,u=e.submitEdit,l=e.imageEdit,d=void 0!==l&&l,j=Object(r.useState)(!1),b=Object(i.a)(j,2),p=b[0],O=b[1],m=function(){return O(!1)},h=function(){return O(!0)};return Object(S.jsxs)(S.Fragment,{children:[o?Object(S.jsxs)("div",{className:"edit-group",children:[d?Object(S.jsxs)("div",{children:[Object(S.jsxs)("p",{children:[c,": "]}),Object(S.jsx)("figure",{children:Object(S.jsx)("img",{src:o,alt:t})})]}):Object(S.jsxs)("p",{children:[c,": ",Object(S.jsx)("strong",{children:o})]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return n(t)},children:"Borrar"}),Object(S.jsx)("button",{className:"my-btn mini",onClick:h,children:"Editar"})]})]}):Object(S.jsxs)("div",{className:"edit-group",children:[Object(S.jsxs)("p",{children:[c,": ",Object(S.jsx)("small",{children:"Sin datos"})]}),Object(S.jsx)("button",{className:"my-btn mini",onClick:h,children:"A\xf1adir"})]}),Object(S.jsxs)(D.a,{className:"edit-modal my-modals",show:p,onHide:m,children:[Object(S.jsx)(D.a.Header,{children:Object(S.jsx)(D.a.Title,{children:o})}),Object(S.jsx)(D.a.Body,{children:Object(S.jsxs)("form",{className:"edit-form",onSubmit:u,children:[Object(S.jsx)("input",{name:t,type:a,onChange:s,placeholder:o}),Object(S.jsx)("button",{className:"my-btn",type:"submit",onClick:m,children:"Guardar"})]})}),Object(S.jsx)(D.a.Footer,{children:Object(S.jsx)("button",{className:"my-btn",onClick:m,children:"cerrar"})})]})]})},_=function(){var e=Object(m.a)(O.a.mark((function e(t){var n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("companies/",t,"POST");case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(r=e.sent).ok){e.next=9;break}return a=r.company,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(m.a)(O.a.mark((function e(t,n){var r,a,c,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("companies/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).ok){e.next=12;break}return c=a.company,g.a.fire("\xa1Chachi!","Los cambios han sido guardados","success"),e.abrupt("return",c);case 12:s=a.error,g.a.fire("Error",s,"error");case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(m.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("companies/".concat(t),{},"DELETE");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=(0,n(2).createContext)(),P=function(){var e=Object(r.useContext)(L),t=e.company,n=e.dispatchCompany,a=t.name,c=t.phone,s=t.address,i=t._id,o=t.mainEmail,d=t.mainLogo,j=t.secondaryLogo,b=t.linkedin,p=t.facebook,h=t.twitter,f=t.instagram,x=C(t),v=x.values,y=x.setValues,k=x.handleInputChange,w=x.handleFileChange,E=function(){var e=Object(m.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(i);case 2:n({type:l.companyDelete});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(m.a)(O.a.mark((function e(t){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object(u.a)(Object(u.a)({},v),{},Object(N.a)({},t,"")),y(Object(u.a)(Object(u.a)({},v),{},Object(N.a)({},t,""))),n({type:l.updateCompany,payload:r});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){e.preventDefault(),n({type:l.updateCompany,payload:v})},_=function(){var e=Object(m.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(i,t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("h1",{children:"Datos de empresa"}),Object(S.jsx)("button",{className:"my-btn mini",onClick:_,children:"Guardar Cambios"}),Object(S.jsx)("button",{className:"my-btn secondary mini",onClick:function(){g.a.fire({title:"\xbfSeguro?",text:"Si borras esto, no habr\xe1 datos de empresa",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\xa1Borrar Empresa!",cancelButtonText:"\xa1Uy, no!"}).then((function(e){e.isConfirmed&&(E(),g.a.fire("\xa1Empresa borrada!","Esta empresa se march\xf3 para no volver","success"))}))},children:"Borrar esta empresa"}),Object(S.jsxs)("div",{className:"editing",children:[Object(S.jsx)(I,{deleteField:T,nameValue:"name",inputType:"text",editLabel:"Nombre de empresa",editAction:k,editValue:a,submitEdit:D}),Object(S.jsx)(I,{deleteField:T,nameValue:"address",inputType:"text",editLabel:"Direcci\xf3n",editAction:k,editValue:s,submitEdit:D}),Object(S.jsx)(I,{deleteField:T,nameValue:"phone",inputType:"text",editLabel:"Tel\xe9fono principal",editAction:k,editValue:c,submitEdit:D}),Object(S.jsx)(I,{deleteField:T,nameValue:"mainEmail",inputType:"email",editLabel:"Email principal",editAction:k,editValue:o,submitEdit:D}),Object(S.jsx)(I,{deleteField:T,nameValue:"mainLogo",imageEdit:!0,inputType:"file",editLabel:"Logo Principal",editAction:w,editValue:d,submitEdit:D}),Object(S.jsx)(I,{deleteField:T,nameValue:"secondaryLogo",imageEdit:!0,inputType:"file",editLabel:"Logo BN",editAction:w,editValue:j,submitEdit:D}),Object(S.jsx)(I,{deleteField:T,nameValue:"twitter",inputType:"text",editLabel:"Twitter Url",editAction:k,editValue:h,submitEdit:D}),Object(S.jsx)(I,{deleteField:T,nameValue:"facebook",inputType:"text",editLabel:"Facebook url",editAction:k,editValue:p,submitEdit:D}),Object(S.jsx)(I,{deleteField:T,nameValue:"instagram",inputType:"text",editLabel:"Instagram Url",editAction:k,editValue:f,submitEdit:D}),Object(S.jsx)(I,{deleteField:T,nameValue:"linkedin",inputType:"text",editLabel:"Linkedin Url",editAction:k,editValue:b,submitEdit:D})]})]})},A=function(){var e=C({}),t=e.values,n=e.handleInputChange,r=e.handleFileChange,a=function(){var e=Object(m.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,_(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("form",{className:"add-form",onSubmit:a,children:[Object(S.jsx)("input",{type:"text",name:"name",placeholder:"Nombre de la empresa",onChange:n}),Object(S.jsx)("input",{type:"email",name:"mainEmail",placeholder:"Correo Principal",onChange:n}),Object(S.jsx)("input",{type:"text",name:"phone",placeholder:"Tel\xe9fono principal",onChange:n}),Object(S.jsx)("input",{type:"text",name:"address",placeholder:"Direcci\xf3n",onChange:n}),Object(S.jsx)("input",{type:"text",name:"linkedin",placeholder:"URL Linkedin",onChange:n}),Object(S.jsx)("input",{type:"text",name:"facebook",placeholder:"URL Facebook",onChange:n}),Object(S.jsx)("input",{type:"text",name:"instagram",placeholder:"URL Instagram",onChange:n}),Object(S.jsx)("input",{type:"text",name:"twitter",placeholder:"URL Twitter",onChange:n}),Object(S.jsxs)("div",{className:"input-images",children:[Object(S.jsxs)("div",{children:[Object(S.jsx)("label",{htmlFor:"mainLogo",children:"Logo principal"}),Object(S.jsx)("input",{type:"file",className:"file-input",name:"mainLogo",id:"mainLogo",placeholder:"Logo Principal",onChange:r})]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("label",{htmlFor:"secondaryLogo",children:"Logo en BN"}),Object(S.jsx)("input",{type:"file",className:"file-input",name:"secondaryLogo",id:"secondaryLogo",placeholder:"Logo Secundario",onChange:r})]})]}),Object(S.jsx)("button",{className:"my-btn mini",type:"submit",children:"Crear empresa"})]})})},V=function(){var e=Object(r.useRef)(!0),t=Object(r.useContext)(L).company;return Object(r.useEffect)((function(){return function(){e.current=!1}}),[]),Object(S.jsx)(S.Fragment,{children:t._id?Object(S.jsx)(P,{}):Object(S.jsx)(A,{})})},R=function(){var e=Object(r.useContext)(o).user;return Object(S.jsx)("section",{id:"dashboard-screen",children:Object(S.jsxs)("h3",{children:["\xa1Bienvenid@ ",e.name,"!"]})})},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.getCompany:case l.addCompnany:case l.companyUpdate:case l.deleteProperty:return Object(u.a)({},t.payload);case l.maquinasCategoriesUpdate:return Object(u.a)(Object(u.a)({},e),{},{maquinasCategories:t.payload});case l.companyDelete:return{};default:return e}},q=n(62),G=(0,n(2).createContext)(),H=n(19),J=function(e){var t=e.handleShow,n=Object(r.useContext)(o),a=n.dispatch,c=n.user,s=Object(r.useState)(!0),u=Object(i.a)(s,2),d=u[0],b=u[1],p=Object(r.useContext)(G).sections,h=function(){var e=Object(m.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a({type:l.logout});case 2:localStorage.removeItem("bratic-token"),localStorage.removeItem("bratic-user");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsx)(S.Fragment,{children:d?Object(S.jsx)("nav",{className:"dash-nav open",children:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{className:"close-nav",children:Object(S.jsx)(q.a,{className:"close-icon",onClick:function(){return b(!1)}})}),Object(S.jsxs)("ul",{children:[Object(S.jsx)("li",{children:Object(S.jsx)(j.b,{to:"/bratic",children:Object(S.jsx)("figure",{children:Object(S.jsx)("img",{src:"https://res.cloudinary.com/bratic-app/image/upload/v1609866461/logoBN_ujpbti.svg",alt:""})})})}),Object(S.jsx)("li",{children:Object(S.jsx)(j.b,{to:"/bratic/empresa",children:"Datos de empresa"})}),Object(S.jsxs)("li",{className:"dropdown",children:[Object(S.jsxs)("p",{"data-toggle":"dropdown",children:["Secciones de la web ",Object(S.jsx)(H.b,{})]}),p.length>0&&Object(S.jsx)("ul",{className:"dropdown-menu",children:p.map((function(e){return Object(S.jsx)("li",{children:Object(S.jsx)(j.b,{to:"/bratic/seccion/".concat(e._id),children:e.sectionName})},e._id)}))})]})]}),Object(S.jsxs)("div",{className:"btn-group",children:[Object(S.jsx)("small",{children:"Made with \u2665 by Yai"}),Object(S.jsx)("small",{children:"\xa9 Bratic S.L."}),"admin@yai.com"===c.email&&Object(S.jsx)("button",{className:"my-btn third mini",onClick:t,children:"A\xf1adir Secci\xf3n"}),Object(S.jsx)("button",{className:"my-btn secondary mini",onClick:h,children:"Cerrar Sesi\xf3n"})]})]})}):Object(S.jsx)("nav",{className:"dash-nav",children:Object(S.jsx)("div",{className:"close-nav",children:Object(S.jsx)(q.b,{className:"close-icon",onClick:function(){return b(!0)}})})})})},Q=function(){return Object(S.jsx)("nav",{className:"login-nav",children:Object(S.jsxs)("div",{className:"container",children:[Object(S.jsx)("figure",{children:Object(S.jsx)("img",{src:"https://res.cloudinary.com/bratic-app/image/upload/v1609866461/logoBN_ujpbti.svg",alt:""})}),Object(S.jsxs)("ul",{children:[Object(S.jsx)("li",{children:Object(S.jsx)(j.b,{to:"/",children:"Entrar"})}),Object(S.jsx)("li",{children:Object(S.jsx)(j.b,{to:"/registro",children:"Registro"})})]})]})})},M=function(){var e=Object(m.a)(O.a.mark((function e(t){var n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("posts/".concat(t),"GET");case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(r=e.sent).ok){e.next=9;break}return a=r.posts,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(m.a)(O.a.mark((function e(t){var n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("posts/post/".concat(t),"GET");case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(r=e.sent).ok){e.next=9;break}return a=r.post,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(m.a)(O.a.mark((function e(t){var n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("posts/",t,"POST");case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(r=e.sent).ok){e.next=9;break}return a=r.post,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(m.a)(O.a.mark((function e(t,n){var r,a,c,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("posts/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).ok){e.next=12;break}return c=a.post,g.a.fire("\xa1Chachi!","Los cambios han sido guardados","success"),e.abrupt("return",c);case 12:s=a.error,g.a.fire("Error",s,"error");case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(m.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("posts/".concat(t),{},"DELETE");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=n(29),Z=function(e){var t=e.askIfDelete,n=e.post,a=Object(r.useState)(),c=Object(i.a)(a,2),s=c[0],o=c[1],u=Object(r.useState)(),l=Object(i.a)(u,2),d=l[0],j=l[1];return Object(r.useEffect)((function(){o(new Date(n.createdAt).toLocaleString()),j(new Date(n.updatedAt).toLocaleString())}),[s,o,n]),Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("article",{className:"each-post-prev",children:[Object(S.jsxs)("div",{className:"info",children:[Object(S.jsx)("h5",{children:n.title}),s&&Object(S.jsxs)("p",{children:["Fecha de la publicaci\xf3n: ",Object(S.jsx)("strong",{children:s})]}),d&&Object(S.jsxs)("p",{children:["Fecha de la \xfaltima edici\xf3n: ",Object(S.jsx)("strong",{children:d})]}),Object(S.jsxs)("p",{className:"status",children:["Estado de la publicaci\xf3n: ",Object(S.jsx)("strong",{children:n.status})]})]}),Object(S.jsxs)("div",{className:"btn-group",children:[Object(S.jsx)("button",{className:"my-btn mini third",onClick:function(){return t(n._id)},children:"Borrar Entrada"}),Object(S.jsx)(X.Link,{className:"my-btn mini secondary",to:"/bratic/blog/editar-entrada/".concat(n._id),children:"Editar Entrada"}),Object(S.jsx)(X.Link,{className:"my-btn mini ",to:"/bratic/blog/".concat(n._id),children:"Ver Muestra"})]})]})})},$=function(){var e=Object(b.useHistory)(),t=Object(r.useRef)(!0),n=Object(r.useState)(),a=Object(i.a)(n,2),c=a[0],s=a[1],u=Object(r.useContext)(o).user,l=function(){var e=Object(m.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(u.id);case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){return function(){t.current=!1}}),[]),Object(r.useEffect)((function(){return t.current&&l(),function(){t.current=!1}}));var d=function(){var t=Object(m.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y({title:"Entrada Sin T\xedtulo",author:u.id});case 2:n=t.sent,e.push("/bratic/blog/nueva-entrada/".concat(n._id));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),j=function(){var e=Object(m.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t);case 2:return e.next=4,l();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(e){g.a.fire({title:"\xbfSeguro?",text:"Si borras esto, la entrada desaparece",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\xa1Borrar Entrada!",cancelButtonText:"\xa1Uy, no!"}).then((function(t){t.isConfirmed&&j(e)}))};return Object(S.jsxs)("div",{id:"posts-screen",children:[Object(S.jsx)("h2",{children:"Entradas del Blog"}),Object(S.jsxs)("p",{children:["Est\xe1s viendo las entradas del blog que ",Object(S.jsx)("strong",{className:"user",children:u.name})," (t\xfa, se\xf1or@) ha creado"]}),Object(S.jsx)("button",{className:"my-btn primary mini",onClick:d,children:"A\xf1adir entrada del blog"}),(null===c||void 0===c?void 0:c.length)>0?Object(S.jsx)("section",{className:"all-posts",children:null===c||void 0===c?void 0:c.map((function(e){return Object(S.jsx)(Z,{askIfDelete:p,post:e},e._id)}))}):Object(S.jsx)("article",{className:"empty-posts",children:"No tienes entradas del blog"})]})},ee=n(88),te=n(222),ne=n(219),re=n(220),ae=n(223),ce=n(221);te.a.use([ne.a,re.a]);var se=function(){var e,t=Object(r.useRef)(!0),n=Object(b.useParams)().postID,a=Object(X.useHistory)(),c=Object(r.useState)(),s=Object(i.a)(c,2),o=s[0],u=s[1],l=Object(r.useState)(),d=Object(i.a)(l,2),p=d[0],h=d[1],f=Object(r.useState)([]),x=Object(i.a)(f,2),v=x[0],y=x[1],k=function(){var e=Object(m.a)(O.a.mark((function e(t){var n,r,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t);case 2:for(c in n=e.sent,r=n.content,a=[],r)r[c].forEach((function(e){return a.push(e)}));a.sort((function(e,t){return e.order-t.order})),y(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(m.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(n);case 2:t=e.sent,u(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){return t.current&&(N(),k(n)),function(){t.current=!1}})),Object(r.useEffect)((function(){h(null===o||void 0===o?void 0:o.content.gallery.map((function(e){return e.gallery.map((function(e){return{src:e,thumbnail:w(e),w:1200,h:900}}))})))}),[o]);var w=function(e){var t=e.split("upload/");return"".concat(t[0]).concat("upload/w_200/").concat(t[1])},C=function(){var e=Object(m.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t);case 2:a.push("/bratic/blog");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("section",{id:"post-preview",children:[Object(S.jsxs)("div",{className:"btn-group",children:[Object(S.jsx)("button",{className:"my-btn mini third",onClick:function(){return e=null===o||void 0===o?void 0:o._id,void g.a.fire({title:"\xbfSeguro?",text:"Si borras esto, la entrada desaparece",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\xa1Borrar Entrada!",cancelButtonText:"\xa1Uy, no!"}).then((function(t){t.isConfirmed&&C(e)}));var e},children:"Borrar"}),Object(S.jsx)(j.b,{className:"my-btn mini secondary",to:"/bratic/blog/editar-entrada/".concat(null===o||void 0===o?void 0:o._id),children:"Editar"}),Object(S.jsx)(j.b,{className:"my-btn mini thirsd",to:"/bratic/blog/",children:"Volver al blog"})]}),Object(S.jsx)("h1",{children:null===o||void 0===o?void 0:o.title}),(null===o||void 0===o?void 0:o.subtitle)&&Object(S.jsx)("h2",{children:null===o||void 0===o?void 0:o.subtitle}),(null===o||void 0===o?void 0:o.createdAt)&&Object(S.jsx)("small",{className:"date",children:null===o||void 0===o?void 0:o.createdAt}),(null===o||void 0===o?void 0:o.content.image.length)>0&&Object(S.jsx)("figure",{className:"main-image",children:Object(S.jsx)("img",{src:null===o||void 0===o?void 0:o.content.image[0].image,alt:""},null===o||void 0===o?void 0:o.content.image[0]._id)}),Object(S.jsxs)("div",{className:"container",children:[v.text.length>0&&v.text.map((function(e,t){return Object(S.jsx)("div",{className:"post-text",dangerouslySetInnerHTML:e.parsedText},e._id)})),v.video.length>0&&v.video.map((function(e,t){return Object(S.jsx)("video",{className:"video-preview",src:e.video,controls:!0,muted:!0})})),(null===p||void 0===p?void 0:p.length)>0&&Object(S.jsx)(ee.PhotoSwipeGallery,{items:p,thumbnailContent:function(e){e.map((function(e){return Object(S.jsx)("img",{src:e.thumbnail,alt:""})}))}}),(null===(e=v.slider)||void 0===e?void 0:e.length)>0&&Object(S.jsxs)("div",{className:"preview",children:[Object(S.jsx)("h6",{children:"Slider de fotos"}),v.slider.map((function(e,t){return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(ae.a,{spaceBetween:0,autoplay:{delay:2500},slidesPerView:1,pagination:{clickable:!0},children:e.slides.map((function(e,t){return Object(S.jsx)(ce.a,{children:Object(S.jsx)("img",{src:e,alt:""})},t)}))})})}))]})]})]})},ie=n(6),oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Object(r.useState)(e),n=Object(i.a)(t,2),a=n[0],c=n[1],s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;c(a+e)},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;c(a-e)},u=function(){c(e)};return{counter:a,increment:s,decrement:o,reset:u,setCounter:c}},ue=function(){var e=Object(m.a)(O.a.mark((function e(t,n){var r,a,c,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("videos/".concat(n),t,"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).ok){e.next=11;break}return c=a.video,e.abrupt("return",c);case 11:s=a.msg,g.a.fire("\xa1Oh-oh!",s,"error");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),le=function(){var e=Object(m.a)(O.a.mark((function e(t){var n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("videos/".concat(t),{},"DELETE");case 2:return n=e.sent,e.next=5,n.json();case 5:(r=e.sent).ok||(a=r.msg,g.a.fire("\xa1Oh-oh!",a,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(){var e=Object(m.a)(O.a.mark((function e(t,n){var r,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("videos/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:(a=e.sent).ok||(c=a.msg,g.a.fire("\xa1Oh-oh!",c,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),je=function(){var e=Object(m.a)(O.a.mark((function e(t,n){var r,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("videos/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:if((a=e.sent).ok){e.next=11;break}c=a.msg,g.a.fire("\xa1Oh-oh!",c,"error"),e.next=12;break;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),be=function(){var e=Object(m.a)(O.a.mark((function e(t,n){var r,a,c,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("images/".concat(n),t,"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).ok){e.next=11;break}return c=a.image,e.abrupt("return",c);case 11:s=a.msg,g.a.fire("\xa1Oh-oh!",s,"error");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),pe=function(){var e=Object(m.a)(O.a.mark((function e(t){var n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("images/".concat(t),{},"DELETE");case 2:return n=e.sent,e.next=5,n.json();case 5:(r=e.sent).ok?g.a.fire("\xa1Bien!","Imagen Borrada","success"):(a=r.msg,g.a.fire("\xa1Oh-oh!",a,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(m.a)(O.a.mark((function e(t,n){var r,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("images/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:(a=e.sent).ok||(c=a.msg,g.a.fire("\xa1Oh-oh!",c,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),me=function(){var e=Object(m.a)(O.a.mark((function e(t,n){var r,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("images/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:if((a=e.sent).ok){e.next=11;break}c=a.msg,g.a.fire("\xa1Oh-oh!",c,"error"),e.next=12;break;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),he=function(){var e=Object(m.a)(O.a.mark((function e(t,n){var r,a,c,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("texts/".concat(n),t,"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).ok){e.next=11;break}return c=a.text,e.abrupt("return",c);case 11:s=a.msg,g.a.fire("\xa1Oh-oh!",s,"error");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),fe=function(){var e=Object(m.a)(O.a.mark((function e(t){var n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("texts/".concat(t),{},"DELETE");case 2:return n=e.sent,e.next=5,n.json();case 5:(r=e.sent).ok?g.a.fire("\xa1Bien!","Texto borrado","success"):(a=r.msg,g.a.fire("\xa1Oh-oh!",a,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=Object(m.a)(O.a.mark((function e(t,n){var r,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("texts/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:(a=e.sent).ok||(c=a.msg,g.a.fire("\xa1Oh-oh!",c,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ve=function(){var e=Object(m.a)(O.a.mark((function e(t,n){var r,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("texts/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:if((a=e.sent).ok){e.next=11;break}c=a.msg,g.a.fire("\xa1Oh-oh!",c,"error"),e.next=12;break;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ge=function(){var e=Object(m.a)(O.a.mark((function e(t,n){var r,a,c,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("sliders/".concat(n),t,"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).ok){e.next=11;break}return c=a.slider,e.abrupt("return",c);case 11:s=a.msg,g.a.fire("\xa1Oh-oh!",s,"error");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ye=function(){var e=Object(m.a)(O.a.mark((function e(t){var n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("sliders/".concat(t),{},"DELETE");case 2:return n=e.sent,e.next=5,n.json();case 5:(r=e.sent).ok||(a=r.msg,g.a.fire("\xa1Oh-oh!",a,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(m.a)(O.a.mark((function e(t,n){var r,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("sliders/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:(a=e.sent).ok||(c=a.msg,g.a.fire("\xa1Oh-oh!",c,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(m.a)(O.a.mark((function e(t,n){var r,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("sliders/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:if((a=e.sent).ok){e.next=11;break}c=a.msg,g.a.fire("\xa1Oh-oh!",c,"error"),e.next=12;break;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),we=function(){var e=Object(m.a)(O.a.mark((function e(t,n){var r,a,c,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("galleries/".concat(n),t,"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).ok){e.next=11;break}return c=a.gallery,e.abrupt("return",c);case 11:s=a.msg,g.a.fire("\xa1Oh-oh!",s,"error");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(m.a)(O.a.mark((function e(t){var n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("galleries/".concat(t),{},"DELETE");case 2:return n=e.sent,e.next=5,n.json();case 5:(r=e.sent).ok||(a=r.msg,g.a.fire("\xa1Oh-oh!",a,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=Object(m.a)(O.a.mark((function e(t,n){var r,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("galleries/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:(a=e.sent).ok||(c=a.msg,g.a.fire("\xa1Oh-oh!",c,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(m.a)(O.a.mark((function e(t,n){var r,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("galleries/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:if((a=e.sent).ok){e.next=11;break}c=a.msg,g.a.fire("\xa1Oh-oh!",c,"error"),e.next=12;break;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Te=function(e){e.preventDefault()},De=function(e){var t=e.target;e.dataTransfer.setData("card_id",t.id),e.dataTransfer.setData("card_type",t.attributes.posttype.value),setTimeout((function(){t.style.display="none",t.className="preview"}),0)},Ie=function(e){e.stopPropagation()},_e=function(e){var t=e.postState,n=e.savePostState;return Object(S.jsxs)("select",{onChange:function(e){var t=e.target;n(t.value)},children:[Object(S.jsxs)("option",{value:"default",defaultValue:!0,children:[" ",t||"Cambiar Estado de la publicaci\xf3n..."," "]}),"borrador"!==t&&Object(S.jsx)("option",{value:"borrador",children:"Borrador"}),"publicado"!==t&&Object(S.jsx)("option",{value:"publicado",children:"Publicada"})]})},Be=function(e){var t=e.content,n=e.setContent,a=e.dragOver,c=e.dragStart,s=e.decrement,o=e.drop,u=e.dragOverReceptor,l=Object(r.useState)([]),d=Object(i.a)(l,2),j=d[0],b=d[1];Object(r.useEffect)((function(){b(t)}),[t]);var p=function(e){var t=j.filter((function(t){return t._id!==e}));b(t),n(t),s()},h=function(){var e=Object(m.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="text"===e.t0?3:"image"===e.t0?7:"video"===e.t0?11:"slider"===e.t0?15:"gallery"===e.t0?19:23;break;case 3:return e.next=5,fe(n);case 5:return p(n),e.abrupt("break",24);case 7:return e.next=9,pe(n);case 9:return p(n),e.abrupt("break",24);case 11:return e.next=13,le(n);case 13:return p(n),e.abrupt("break",24);case 15:return e.next=17,ye(n);case 17:return p(n),e.abrupt("break",24);case 19:return e.next=21,Ce(n);case 21:return p(n),e.abrupt("break",24);case 23:return e.abrupt("break",24);case 24:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(S.jsx)(S.Fragment,{children:j.length>0&&j.map((function(e){return function(e,t){switch(e){case"texto":return Object(S.jsxs)("div",{onDrop:o,onDragOver:u,id:t.order,className:"receiving-container",children:[Object(S.jsx)("div",{className:"container-number",children:Object(S.jsxs)("p",{children:[" ",t.order," "]})}),Object(S.jsxs)("div",{posttype:"texto",className:"preview post-text",id:t._id,onDragStart:c,onDragOver:a,draggable:"true",children:[Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Tipo de contenido:"})," Texto"]}),Object(S.jsxs)("p",{className:"order",children:[Object(S.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(S.jsx)("hr",{}),Object(S.jsx)("div",{className:"text",dangerouslySetInnerHTML:t.parsedText}),Object(S.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return h("text",t._id)},children:"Borrar"})]})]},t._id);case"imagen":return Object(S.jsxs)("div",{onDrop:o,onDragOver:u,id:t._id,className:"receiving-container",children:[Object(S.jsx)("div",{className:"container-number",children:Object(S.jsxs)("p",{children:[" ",t._id," "]})}),Object(S.jsxs)("div",{posttype:"imagen",className:"preview post-simple-image",id:t._id,onDragStart:c,onDragOver:a,draggable:"true",children:[Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Tipo de contenido:"})," Imagen \xdanica"]}),Object(S.jsxs)("p",{className:"order",children:[Object(S.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(S.jsx)("hr",{}),Object(S.jsx)("img",{draggable:"false",className:"unique-image",src:t.image,alt:""}),Object(S.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return h("image",t._id)},children:"Borrar"})]})]},t._id);case"video":return Object(S.jsxs)("div",{onDrop:o,onDragOver:u,id:t._id,className:"receiving-container",children:[Object(S.jsx)("div",{className:"container-number",children:Object(S.jsxs)("p",{children:[" ",t._id," "]})}),Object(S.jsxs)("div",{posttype:"video",className:"preview post-video",id:t._id,onDragStart:c,onDragOver:a,draggable:"true",children:[Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Tipo de contenido:"})," V\xeddeo"]}),Object(S.jsxs)("p",{className:"order",children:[Object(S.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(S.jsx)("hr",{}),Object(S.jsx)("video",{draggable:"false",className:"video-preview",src:t.video,controls:!0,muted:!0}),Object(S.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return h("video",t._id)},children:"Borrar"})]})]},t._id);case"slider":return Object(S.jsxs)("div",{onDrop:o,onDragOver:u,id:t._id,className:"receiving-container",children:[Object(S.jsx)("div",{className:"container-number",children:Object(S.jsxs)("p",{children:[" ",t._id," "]})}),Object(S.jsxs)("div",{posttype:"slider",className:"preview post-slider",onDragStart:c,onDragOver:a,draggable:"true",children:[Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Tipo de contenido:"})," Slider"]}),Object(S.jsxs)("p",{className:"order",children:[Object(S.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(S.jsx)("hr",{}),Object(S.jsx)("div",{className:"gallery",children:t.slides.map((function(e,t){return Object(S.jsx)("figure",{draggable:"false",className:"each-picture",children:Object(S.jsx)("img",{draggable:"false",src:e,alt:""})},t)}))}),Object(S.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return h("slider",t._id)},children:"Borrar"})]})]},t._id);case"galeria":return Object(S.jsxs)("div",{onDrop:o,onDragOver:u,id:t._id,className:"receiving-container",children:[Object(S.jsx)("div",{className:"container-number",children:Object(S.jsxs)("p",{children:[" ",t._id," "]})}),Object(S.jsxs)("div",{posttype:"galeria",className:"preview post-gallery",id:t._id,onDragStart:c,onDragOver:a,draggable:"true",children:[Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Tipo de contenido:"})," Galer\xeda"]}),Object(S.jsxs)("p",{className:"order",children:[Object(S.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(S.jsx)("hr",{}),Object(S.jsx)("div",{className:"gallery",children:t.gallery.map((function(e,t){return Object(S.jsx)("figure",{draggable:"false",className:"each-picture",children:Object(S.jsx)("img",{draggable:"false",src:e,alt:""})},t)}))}),Object(S.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return h("gallery",t._id)},children:"Borrar"})]})]},t._id)}}(e.postType,e)}))})},Fe=function(e){var t=e.loading;return Object(S.jsx)("section",{id:"loading",className:t?"show":"hide",children:Object(S.jsxs)("div",{className:"lds-ripple",children:[Object(S.jsx)("div",{}),Object(S.jsx)("div",{})]})})},Le=function(e){var t=e.saveElement,n=e.postID,a=e.increment,c=Object(r.useState)(),s=Object(i.a)(c,2),o=s[0],u=s[1],l=Object(r.useState)([]),d=Object(i.a)(l,2),j=d[0],b=d[1],p=Object(r.useState)(!1),h=Object(i.a)(p,2),f=h[0],x=h[1],v=Object(r.useState)(!1),g=Object(i.a)(v,2),y=g[0],k=g[1],N=function(){var e=Object(m.a)(O.a.mark((function e(t){var n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,k(!0),r=n.files[0],e.next=5,w(r);case 5:a=e.sent,x(!0),u(a),k(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(m.a)(O.a.mark((function e(){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we({gallery:j},n);case 2:r=e.sent,t("gallery",r),a();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)("section",{id:"add-gallery",children:[Object(S.jsxs)("div",{className:"file-group",children:[Object(S.jsx)("input",{className:"file-input",type:"file",onChange:N,placeholder:"A\xf1adir Foto",name:"gallery"}),y&&Object(S.jsx)(Fe,{loading:!0}),f&&Object(S.jsx)("button",{onClick:function(e){e.preventDefault(),0===j.length?b([o]):(null===j||void 0===j?void 0:j.includes(o))||b([].concat(Object(ie.a)(j),[o])),x(!1)},className:"my-btn mini third",children:"A\xf1adir Imagen"})]}),Object(S.jsx)("div",{className:"gallery",children:null===j||void 0===j?void 0:j.map((function(e,t){return Object(S.jsxs)("figure",{className:"each-picture",children:[Object(S.jsx)("img",{src:e,alt:""}),Object(S.jsx)(H.c,{className:"close-icon",onClick:function(){return function(e){var t=Object(ie.a)(j);t.splice(e,1),b(t)}(t)}})]},t)}))}),j.length>0&&Object(S.jsx)("button",{className:"my-btn mini",onClick:function(){return C()},children:" A\xf1adir Galer\xeda a la entrada "})]})},Pe=function(e){var t=e.saveElement,n=e.postID,r=e.increment,a=C(),c=a.values,s=a.handleFileChange,i=a.loading,o=function(){var e=Object(m.a)(O.a.mark((function e(){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be({image:c.image},n);case 2:a=e.sent,t("image",a),r();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"file-group",children:Object(S.jsx)("input",{type:"file",className:"file-input",name:"image",id:"image",onChange:s})}),i?Object(S.jsx)(Fe,{loading:!0}):(null===c||void 0===c?void 0:c.image)&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("img",{className:"unique-image",src:c.image,alt:""}),Object(S.jsx)("button",{className:"my-btn mini",onClick:function(){return o()},children:" A\xf1adir Imagen a la Entrada"})]})]})},Ae=function(e){var t=e.saveElement,n=e.postID,a=e.increment,c=Object(r.useState)(),s=Object(i.a)(c,2),o=s[0],u=s[1],l=Object(r.useState)([]),d=Object(i.a)(l,2),j=d[0],b=d[1],p=Object(r.useState)(!1),h=Object(i.a)(p,2),f=h[0],x=h[1],v=Object(r.useState)(!1),g=Object(i.a)(v,2),y=g[0],k=g[1],N=function(){var e=Object(m.a)(O.a.mark((function e(t){var n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,k(!0),r=n.files[0],e.next=5,w(r);case 5:a=e.sent,x(!0),u(a),k(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(m.a)(O.a.mark((function e(){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge({slides:j},n);case 2:r=e.sent,t("slider",r),a();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)("section",{id:"add-slider",children:[Object(S.jsxs)("div",{className:"file-group",children:[Object(S.jsx)("input",{className:"file-input",type:"file",onChange:N,name:"slider"}),y&&Object(S.jsx)(Fe,{loading:!0}),f&&Object(S.jsx)("button",{onClick:function(e){e.preventDefault(),0===j.length?b([o]):(null===j||void 0===j?void 0:j.includes(o))||b([].concat(Object(ie.a)(j),[o])),x(!1)},className:"my-btn mini third",children:" A\xf1adir Imagen al Slider "})]}),Object(S.jsx)("div",{className:"slider-gallery",children:null===j||void 0===j?void 0:j.map((function(e,t){return Object(S.jsxs)("figure",{className:"each-picture",children:[Object(S.jsx)("img",{src:e,alt:""}),Object(S.jsx)(H.c,{className:"close-icon",onClick:function(){return function(e){var t=Object(ie.a)(j);t.splice(e,1),b(t)}(t)}})]},t)}))}),j.length>0&&Object(S.jsx)("button",{className:"my-btn mini",onClick:function(){return C()},children:"A\xf1adir Slider a la Entrada "})]})},Ve=n(49),Re=n.n(Ve),Ue=(n(85),function e(t){var n=t.setQuill,a=Object(r.useState)(""),c=Object(i.a)(a,2),s=c[0],o=c[1],u=Object(r.useRef)(null);return Object(r.useEffect)((function(){n(s)})),Object(S.jsx)("div",{children:Object(S.jsx)("div",{className:"text-editor",children:Object(S.jsx)(Re.a,{ref:u,modules:{toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{align:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{script:"sub"},{script:"super"}],["link"]]},clipboard:{matchVisual:!1}},formats:e.formats,theme:"snow",value:s,onChange:o})})})});Ue.formats=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","align","color","script","background"];var qe=Ue,Ge=function(e){var t=e.saveElement,n=e.postID,a=e.increment,c=e.order,s=Object(r.useRef)(!0),o=Object(r.useState)(),u=Object(i.a)(o,2),l=u[0],d=u[1],j=C(),b=j.values,p=j.setValues,h=function(){var e=Object(m.a)(O.a.mark((function e(){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he(b,n);case 2:r=e.sent,t("text",r),a();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){return function(){s.current=!1}}),[]),Object(r.useEffect)((function(){s.current&&p({text:l,parsedText:{__html:l},order:c})}),[l,p,c]),Object(S.jsxs)("div",{children:[Object(S.jsx)(qe,{setQuill:d}),Object(S.jsx)("button",{className:"my-btn mini",onClick:function(){return h()},children:"A\xf1adir Texto a la entrada"})]})},He=function(e){var t=e.saveElement,n=e.postID,r=e.increment,a=C(),c=a.values,s=a.handleFileChange,i=a.loading,o=function(){var e=Object(m.a)(O.a.mark((function e(){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue({video:c.video},n);case 2:a=e.sent,t("video",a),r();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)("section",{id:"add-video",children:[Object(S.jsx)("div",{className:"file-group",children:Object(S.jsx)("input",{type:"file",className:"file-input",name:"video",id:"video",onChange:s})}),i?Object(S.jsx)(Fe,{loading:!0}):c.video&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("figure",{className:"video-preview",children:Object(S.jsx)("video",{className:"video-preview",src:c.video,controls:!0,muted:!0})}),Object(S.jsx)("button",{className:"my-btn mini",onClick:function(){return o()},children:" A\xf1adir V\xeddeo a la entrada "})]})]})},Je=function(e){var t=e.auxContent,n=e.setAuxContent,r=e.select,a=e.postId,c=e.saveElement,s=e.increment,i=e.counter;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("h6",{children:"Tienes que a\xf1adir obligatoriamente, por lo menos, una imagen \xfanica"}),Object(S.jsxs)("select",{ref:r,onChange:function(e){switch(e.target.value){case"text":n("text");break;case"image":n("image");break;case"gallery":n("gallery");break;case"video":n("video");break;case"slider":n("slider");break;default:n("default")}},name:"content",placeholder:"A\xf1adir...",children:[Object(S.jsx)("option",{value:"default",defaultValue:!0,children:" A\xf1adir... "}),Object(S.jsx)("option",{value:"text",children:"Texto"}),Object(S.jsx)("option",{value:"image",children:"Imagen \xfanica"}),Object(S.jsx)("option",{value:"gallery",children:"Galer\xeda de im\xe1genes"}),Object(S.jsx)("option",{value:"slider",children:"Slider"}),Object(S.jsx)("option",{value:"video",children:"V\xeddeo"})]}),Object(S.jsxs)("article",{className:"add-post",children:["default"===t&&Object(S.jsx)("p",{children:"A\xf1adir elemento al post"}),"text"===t&&Object(S.jsx)(Ge,{saveElement:c,postID:a,increment:s,order:i}),"image"===t&&Object(S.jsx)(Pe,{saveElement:c,postID:a,increment:s}),"gallery"===t&&Object(S.jsx)(Le,{saveElement:c,postID:a,increment:s}),"video"===t&&Object(S.jsx)(He,{saveElement:c,postID:a,increment:s}),"slider"===t&&Object(S.jsx)(Ae,{saveElement:c,postID:a,increment:s})]})]})},Qe=function(e){var t=e.selectedPost,n=e.saveTitles,r=e.handleInputChange;return Object(S.jsx)("article",{className:"title-area",children:Object(S.jsxs)("form",{className:"form-title",onSubmit:n,children:[Object(S.jsx)("label",{htmlFor:"title",children:"T\xedtulo de la Entrada"}),Object(S.jsx)("input",{id:"title",type:"text",name:"title",onChange:r,placeholder:t.title}),Object(S.jsx)("label",{htmlFor:"subtitle",children:"Subt\xedtulo de la Entrada"}),Object(S.jsx)("input",{id:"subtitle",type:"text",name:"subtitle",placeholder:t.subtitle,onChange:r}),Object(S.jsx)("button",{className:"my-btn mini third",type:"submit",children:" Guardar t\xedtulos "})]})})},Me=function(){var e=Object(b.useHistory)(),t=Object(X.useParams)(),n=Object(r.useRef)(),a=oe(1),c=a.counter,s=a.increment,o=a.decrement,l=C(),d=l.values,j=l.handleInputChange,p=Object(r.useState)(),h=Object(i.a)(p,2),f=h[0],x=h[1],v=Object(r.useState)("default"),y=Object(i.a)(v,2),k=y[0],N=y[1],w=Object(r.useState)({title:"Sin t\xedtulo",subtitle:"",content:{slider:[],image:[],text:[],video:[],gallery:[]}}),E=Object(i.a)(w,2),T=E[0],D=E[1],I=Object(r.useState)([]),_=Object(i.a)(I,2),B=_[0],F=_[1];Object(r.useEffect)((function(){x(t.postID),L(t.postID)}),[t.postID]);var L=function(){var e=Object(m.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t);case 2:n=e.sent,D(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){n.current.selectedIndex=0,N("default")},A=function(){var t=Object(m.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W(n);case 2:e.goBack();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),V=function(){var t=Object(m.a)(O.a.mark((function t(n,r){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K(n,r);case 2:e.goBack();case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),R=function(){var e=Object(m.a)(O.a.mark((function e(t){var n,r,a,c,s,i,o,u,l,d,j;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=t.dataTransfer.getData("card_id"),r=document.getElementById(n),a=t.dataTransfer.getData("card_type"),console.log(n),r.style.display="block",r.className="preview",t.target.appendChild(r),c=r.parentElement.id,s=[],i=[],e.t0=a,e.next="texto"===e.t0?14:"imagen"===e.t0?23:"galeria"===e.t0?32:"video"===e.t0?41:"slider"===e.t0?50:59;break;case 14:return e.next=16,xe(n,{order:c});case 16:return e.next=18,ve(n,{order:c});case 18:return o=e.sent,s=B.filter((function(e){return e._id!==n})),i=[].concat(Object(ie.a)(s),[o.text]).sort((function(e,t){return e.order-t.order})),F(i),e.abrupt("break",60);case 23:return e.next=25,Oe(n,{order:c});case 25:return e.next=27,me(n,{order:c});case 27:return u=e.sent,s=B.filter((function(e){return e._id!==n})),i=[].concat(Object(ie.a)(s),[u.image]).sort((function(e,t){return e.order-t.order})),F(i),e.abrupt("break",60);case 32:return e.next=34,Se(n,{order:c});case 34:return e.next=36,Ee(n,{order:c});case 36:return l=e.sent,s=B.filter((function(e){return e._id!==n})),i=[].concat(Object(ie.a)(s),[l.gallery]).sort((function(e,t){return e.order-t.order})),F(i),e.abrupt("break",60);case 41:return e.next=43,de(n,{order:c});case 43:return e.next=45,je(n,{order:c});case 45:return d=e.sent,s=B.filter((function(e){return e._id!==n})),i=[].concat(Object(ie.a)(s),[d.video]).sort((function(e,t){return e.order-t.order})),F(i),e.abrupt("break",60);case 50:return e.next=52,ke(n,{order:c});case 52:return e.next=54,Ne(n,{order:c});case 54:return j=e.sent,s=B.filter((function(e){return e._id!==n})),i=[].concat(Object(ie.a)(s),[j.slider]).sort((function(e,t){return e.order-t.order})),F(i),e.abrupt("break",60);case 59:return e.abrupt("break",60);case 60:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("section",{id:"add-posts-screen",children:[Object(S.jsxs)("article",{className:"post-btn-group",children:[Object(S.jsx)("h3",{children:"Nueva entrada del blog"}),Object(S.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return A(f)},children:"Borrar Entrada"}),Object(S.jsx)("button",{className:"my-btn mini third",onClick:function(){return V(f,T)},children:"Guardar Entrada"}),Object(S.jsx)("button",{className:"my-btn mini",onClick:function(){e.goBack()},children:"Salir"})]}),Object(S.jsxs)("section",{className:"edit-post",children:[Object(S.jsxs)("div",{className:"edit-area",children:[Object(S.jsx)(_e,{savePostState:function(e){D(Object(u.a)(Object(u.a)({},T),{},{status:e}))},postState:T.status}),Object(S.jsx)(Qe,{selectedPost:D,handleInputChange:j,saveTitles:function(e){e.preventDefault(),D(Object(u.a)(Object(u.a)({},T),{},{title:d.title,subtitle:d.subtitle}))}}),Object(S.jsx)(Je,{counter:c,auxContent:k,setAuxContent:N,select:n,postId:f,saveElement:function(e,t){switch(e){case"text":if(T.content.text.length>0){var n=[].concat(Object(ie.a)(T.content.text),[t]);D(Object(u.a)(Object(u.a)({},T),{},{content:Object(u.a)(Object(u.a)({},T.content),{},{text:n})})),F((function(e){return[].concat(Object(ie.a)(e),[t])})),P()}else{var r=[t];D(Object(u.a)(Object(u.a)({},T),{},{content:Object(u.a)(Object(u.a)({},T.content),{},{text:r})})),F((function(e){return[].concat(Object(ie.a)(e),[t])})),P()}break;case"image":if(T.content.image.length>0){var a=[].concat(Object(ie.a)(T.content.image),[t]);D(Object(u.a)(Object(u.a)({},T),{},{content:Object(u.a)(Object(u.a)({},T.content),{},{image:a})})),F((function(e){return[].concat(Object(ie.a)(e),[t])})),P()}else{var c=[t];D(Object(u.a)(Object(u.a)({},T),{},{content:Object(u.a)(Object(u.a)({},T.content),{},{image:c})})),F((function(e){return[].concat(Object(ie.a)(e),[t])})),P()}break;case"gallery":if(T.content.gallery.length>0){var s=[].concat(Object(ie.a)(T.content.gallery),[t]);D(Object(u.a)(Object(u.a)({},T),{},{content:Object(u.a)(Object(u.a)({},T.content),{},{gallery:s})})),F((function(e){return[].concat(Object(ie.a)(e),[t])})),P()}else{var i=[t];D(Object(u.a)(Object(u.a)({},T),{},{content:Object(u.a)(Object(u.a)({},T.content),{},{gallery:i})})),F((function(e){return[].concat(Object(ie.a)(e),[t])})),P()}break;case"video":if(T.content.video.length>0){var o=[].concat(Object(ie.a)(T.content.video),[t]);D(Object(u.a)(Object(u.a)({},T),{},{content:Object(u.a)(Object(u.a)({},T.content),{},{video:o})})),F((function(e){return[].concat(Object(ie.a)(e),[t])})),P()}else{var l=[t];D(Object(u.a)(Object(u.a)({},T),{},{content:Object(u.a)(Object(u.a)({},T.content),{},{video:l})})),F((function(e){return[].concat(Object(ie.a)(e),[t])})),P()}break;case"slider":if(T.content.slider.length>0){var d=[].concat(Object(ie.a)(T.content.slider),[t]);D(Object(u.a)(Object(u.a)({},T),{},{content:Object(u.a)(Object(u.a)({},T.content),{},{slider:d})})),F((function(e){return[].concat(Object(ie.a)(e),[t])})),P()}else{var j=[t];D(Object(u.a)(Object(u.a)({},T),{},{content:Object(u.a)(Object(u.a)({},T.content),{},{slider:j})})),F((function(e){return[].concat(Object(ie.a)(e),[t])})),P()}}},increment:s})]}),Object(S.jsxs)("div",{className:"view-area",children:[Object(S.jsxs)("div",{className:"titles-btn",children:[Object(S.jsxs)("div",{children:[T.title&&Object(S.jsx)("h1",{children:T.title}),T.subtitle&&Object(S.jsx)("h2",{children:T.subtitle})]}),Object(S.jsx)("button",{className:"my-btn mini",onClick:function(){return D(Object(u.a)(Object(u.a)({},T),{},{orderedContent:B})),g.a.fire("\xa1Bien!","Orden Guardado","success"),void P()},children:"Guardar Contenido Ordenado"})]}),Object(S.jsx)("hr",{}),Object(S.jsx)("h6",{children:"Arrastra elementos para ordenarlos como quieras que aparezcan en la web"}),B.length>0&&Object(S.jsx)(Be,{content:B,setContent:F,dragStart:De,dragOver:Ie,decrement:o,counter:c,dragOverReceptor:Te,drop:R})]})]})]})},ze=function(e){var t=e.drop,n=e.dragOverReceptor,r=e.idx,a=e.component,c=void 0!==a&&a;return Object(S.jsxs)("div",{onDrop:t,onDragOver:n,id:r,className:"receiving-container",children:[Object(S.jsx)("div",{className:"container-number",children:Object(S.jsxs)("p",{children:[" ",r," "]})}),c&&c]},"receiving-container-".concat(r))},Ye=function(e){var t=e.content,n=e.setContent,a=e.dragOver,c=e.dragStart,s=e.decrement,o=e.dragOverReceptor,u=e.drop,l=Object(r.useState)([]),d=Object(i.a)(l,2),j=d[0],b=d[1];Object(r.useEffect)((function(){b(t)}),[t]);var p=function(e){var t=j.filter((function(t){return t._id!==e}));b(t),n(t),s()},h=function(){var e=Object(m.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="text"===e.t0?3:"image"===e.t0?7:"video"===e.t0?11:"slider"===e.t0?15:"gallery"===e.t0?19:23;break;case 3:return e.next=5,fe(n);case 5:return p(n),e.abrupt("break",24);case 7:return e.next=9,pe(n);case 9:return p(n),e.abrupt("break",24);case 11:return e.next=13,le(n);case 13:return p(n),e.abrupt("break",24);case 15:return e.next=17,ye(n);case 17:return p(n),e.abrupt("break",24);case 19:return e.next=21,Ce(n);case 21:return p(n),e.abrupt("break",24);case 23:return e.abrupt("break",24);case 24:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(S.jsx)(S.Fragment,{children:j.length>0&&j.map((function(e){return function(e,t){switch(e){case"texto":return Object(S.jsxs)("div",{onDrop:u,onDragOver:o,id:t.order,className:"receiving-container",children:[Object(S.jsx)("div",{className:"container-number",children:Object(S.jsxs)("p",{children:[" ",t.order," "]})}),Object(S.jsxs)("div",{posttype:"texto",className:"preview post-text",id:t._id,onDragStart:c,onDragOver:a,draggable:"true",children:[Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Tipo de contenido:"})," Texto"]}),Object(S.jsxs)("p",{className:"order",children:[Object(S.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(S.jsx)("div",{className:"text",dangerouslySetInnerHTML:t.parsedText}),Object(S.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return h("text",t._id)},children:"Borrar"})]},t._id)]},"receiving-container-".concat(t.order));case"imagen":return Object(S.jsxs)("div",{onDrop:u,onDragOver:o,id:t.order,className:"receiving-container",children:[Object(S.jsx)("div",{className:"container-number",children:Object(S.jsxs)("p",{children:[" ",t.order," "]})}),Object(S.jsxs)("div",{posttype:"imagen",className:"preview post-simple-image",id:t._id,onDragStart:c,onDragOver:a,draggable:"true",children:[Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Tipo de contenido:"})," Imagen \xdanica"]}),Object(S.jsxs)("p",{className:"order",children:[Object(S.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(S.jsx)("img",{draggable:"false",className:"unique-image",src:t.image,alt:""}),Object(S.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return h("image",t._id)},children:"Borrar"})]},t._id)]},"receiving-container-".concat(t.order));case"video":return Object(S.jsxs)("div",{onDrop:u,onDragOver:o,id:t.order,className:"receiving-container",children:[Object(S.jsx)("div",{className:"container-number",children:Object(S.jsxs)("p",{children:[" ",t.order," "]})}),Object(S.jsxs)("div",{posttype:"video",className:"preview post-video",id:t._id,onDragStart:c,onDragOver:a,draggable:"true",children:[Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Tipo de contenido:"})," V\xeddeo"]}),Object(S.jsxs)("p",{className:"order",children:[Object(S.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(S.jsx)("video",{draggable:"false",className:"video-preview",src:t.video,controls:!0,muted:!0}),Object(S.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return h("video",t._id)},children:"Borrar"})]},t._id)]},"receiving-container-".concat(t.order));case"slider":return Object(S.jsxs)("div",{onDrop:u,onDragOver:o,id:t.order,className:"receiving-container",children:[Object(S.jsx)("div",{className:"container-number",children:Object(S.jsxs)("p",{children:[" ",t.order," "]})}),Object(S.jsxs)("div",{posttype:"slider",className:"preview post-slider",onDragStart:c,onDragOver:a,draggable:"true",children:[Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Tipo de contenido:"})," Slider"]}),Object(S.jsxs)("p",{className:"order",children:[Object(S.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(S.jsx)("div",{className:"gallery",children:t.slides.map((function(e,t){return Object(S.jsx)("figure",{draggable:"false",className:"each-picture",children:Object(S.jsx)("img",{draggable:"false",src:e,alt:""})},t)}))}),Object(S.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return h("slider",t._id)},children:"Borrar"})]},t._id)]},"receiving-container-".concat(t.order));case"galeria":return Object(S.jsxs)("div",{onDrop:u,onDragOver:o,id:t.order,className:"receiving-container",children:[Object(S.jsx)("div",{className:"container-number",children:Object(S.jsxs)("p",{children:[" ",t.order," "]})}),Object(S.jsxs)("div",{posttype:"galeria",className:"preview post-gallery",id:t._id,onDragStart:c,onDragOver:a,draggable:"true",children:[Object(S.jsxs)("p",{children:[Object(S.jsx)("strong",{children:"Tipo de contenido:"})," Galer\xeda"]}),Object(S.jsxs)("p",{className:"order",children:[Object(S.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(S.jsx)("div",{className:"gallery",children:t.gallery.map((function(e,t){return Object(S.jsx)("figure",{draggable:"false",className:"each-picture",children:Object(S.jsx)("img",{draggable:"false",src:e,alt:""})},t)}))}),Object(S.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return h("gallery",t._id)},children:"Borrar"})]},t._id)]},"receiving-container-".concat(t.order))}}(e.postType,e)}))})},Ke=function(e){var t,n=e.selectedPost,r=e.dragStart,a=e.dragOver,c=e.decrement,s=e.dragOverReceptor,i=e.drop,o=e.counter,u=e.handleSaveContent,l=e.setContent;return Object(S.jsxs)("div",{className:"view-area",children:[Object(S.jsxs)("div",{className:"titles-btn",children:[Object(S.jsxs)("div",{children:[n.title&&Object(S.jsx)("h1",{children:n.title}),n.subtitle&&Object(S.jsx)("h2",{children:n.subtitle})]}),Object(S.jsx)("button",{className:"my-btn mini",onClick:function(){return u()},children:"Guardar Contenido Ordenado"})]}),Object(S.jsx)("hr",{}),Object(S.jsx)("h6",{children:"Arrastra elementos para ordenarlos como quieras que aparezcan en la web :)"}),(null===n||void 0===n||null===(t=n.orderedContent)||void 0===t?void 0:t.length)>0&&Object(S.jsx)(Ye,{dragOverReceptor:s,drop:i,content:n.orderedContent,setContent:l,dragStart:r,dragOver:a,decrement:c}),Object(ie.a)(Array(o)).map((function(e,t){var r;return t>(null===n||void 0===n||null===(r=n.orderedContent)||void 0===r?void 0:r.length)&&Object(S.jsx)(ze,{dragOverReceptor:s,drop:i,idx:t},"er-contenedo-".concat(t))}))]})},We=function(){var e=Object(b.useHistory)(),t=Object(X.useParams)(),n=Object(r.useRef)(),a=oe(1),c=a.counter,s=a.increment,o=a.decrement,l=a.setCounter,d=C(),j=d.values,p=d.handleInputChange,h=Object(r.useState)(),f=Object(i.a)(h,2),x=f[0],v=f[1],y=Object(r.useState)("default"),k=Object(i.a)(y,2),N=k[0],w=k[1],E=Object(r.useState)({title:"Sin t\xedtulo",subtitle:"",content:{slider:[],image:[],text:[],video:[],gallery:[]}}),T=Object(i.a)(E,2),D=T[0],I=T[1],_=Object(r.useState)([]),B=Object(i.a)(_,2),F=B[0],L=B[1],P=Object(r.useState)([]),A=Object(i.a)(P,2),V=A[0],R=A[1],U=Object(r.useCallback)(function(){var e=Object(m.a)(O.a.mark((function e(t){var n,r,a,c,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t);case 2:for(s in n=e.sent,r=[],n.orderedContent.length>0&&n.orderedContent.forEach((function(e){return r.push(e._id)})),a=[],c=n.content)c[s].forEach((function(e){r.includes(e._id)||a.push(e)}));a.sort((function(e,t){return e.order-t.order})),R(a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);Object(r.useEffect)((function(){v(t.postID),q(t.postID),U(t.postID)}),[t.postID,U]),Object(r.useEffect)((function(){V&&V.length>0&&l(V.length+D.orderedContent.length+1)}));var q=function(){var e=Object(m.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t);case 2:n=e.sent,I(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){n.current.selectedIndex=0,w("default")},H=function(){var t=Object(m.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W(n);case 2:e.goBack();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),J=function(){var t=Object(m.a)(O.a.mark((function t(n,r){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K(n,r);case 2:e.goBack();case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Q=function(){var e=Object(m.a)(O.a.mark((function e(t){var n,r,a,c,s,i,o,u,l,d,j;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=t.dataTransfer.getData("card_id"),r=document.getElementById(n),a=t.dataTransfer.getData("card_type"),r.style.display="block",r.className="preview",t.target.appendChild(r),c=r.parentElement.id,s=[],i=[],e.t0=a,e.next="texto"===e.t0?13:"imagen"===e.t0?22:"galeria"===e.t0?31:"video"===e.t0?40:"slider"===e.t0?49:58;break;case 13:return e.next=15,xe(n,{order:c});case 15:return e.next=17,ve(n,{order:c});case 17:return o=e.sent,s=F.filter((function(e){return e._id!==n})),i=[].concat(Object(ie.a)(s),[o.text]).sort((function(e,t){return e.order-t.order})),R((function(e){return[].concat(Object(ie.a)(e),[i])})),e.abrupt("break",59);case 22:return e.next=24,Oe(n,{order:c});case 24:return e.next=26,me(n,{order:c});case 26:return u=e.sent,s=F.filter((function(e){return e._id!==n})),i=[].concat(Object(ie.a)(s),[u.image]).sort((function(e,t){return e.order-t.order})),R((function(e){return[].concat(Object(ie.a)(e),[i])})),e.abrupt("break",59);case 31:return e.next=33,Se(n,{order:c});case 33:return e.next=35,Ee(n,{order:c});case 35:return l=e.sent,s=F.filter((function(e){return e._id!==n})),i=[].concat(Object(ie.a)(s),[l.gallery]).sort((function(e,t){return e.order-t.order})),R((function(e){return[].concat(Object(ie.a)(e),[i])})),e.abrupt("break",59);case 40:return e.next=42,de(n,{order:c});case 42:return e.next=44,je(n,{order:c});case 44:return d=e.sent,s=F.filter((function(e){return e._id!==n})),i=[].concat(Object(ie.a)(s),[d.video]).sort((function(e,t){return e.order-t.order})),R((function(e){return[].concat(Object(ie.a)(e),[i])})),e.abrupt("break",59);case 49:return e.next=51,ke(n,{order:c});case 51:return e.next=53,Ne(n,{order:c});case 53:return j=e.sent,s=F.filter((function(e){return e._id!==n})),i=[].concat(Object(ie.a)(s),[j.slider]).sort((function(e,t){return e.order-t.order})),R((function(e){return[].concat(Object(ie.a)(e),[i])})),e.abrupt("break",59);case 58:return e.abrupt("break",59);case 59:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("section",{id:"add-posts-screen",children:[Object(S.jsxs)("article",{className:"post-btn-group",children:[Object(S.jsxs)("h3",{children:["Editar entrada : ",D.title]}),Object(S.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return H(x)},children:"Borrar Entrada"}),Object(S.jsx)("button",{className:"my-btn mini third",onClick:function(){return J(x,D)},children:"Guardar Entrada"}),Object(S.jsx)("button",{className:"my-btn mini",onClick:function(){e.goBack()},children:"Salir"})]}),Object(S.jsxs)("section",{className:"edit-post",children:[Object(S.jsxs)("div",{className:"edit-area",children:[Object(S.jsx)(_e,{savePostState:function(e){I(Object(u.a)(Object(u.a)({},D),{},{status:e}))},postState:D.status}),Object(S.jsx)(Qe,{selectedPost:I,handleInputChange:p,saveTitles:function(e){e.preventDefault(),I(Object(u.a)(Object(u.a)({},D),{},{title:j.title,subtitle:j.subtitle}))}}),Object(S.jsx)(Je,{auxContent:N,setAuxContent:w,select:n,postId:x,saveElement:function(e,t){switch(e){case"text":if(D.content.text.length>0){var n=[].concat(Object(ie.a)(D.content.text),[t]);I(Object(u.a)(Object(u.a)({},D),{},{content:Object(u.a)(Object(u.a)({},D.content),{},{text:n})})),L((function(e){return[].concat(Object(ie.a)(e),[t])})),G()}else I(Object(u.a)(Object(u.a)({},D),{},{content:Object(u.a)(Object(u.a)({},D.content),{},{text:t})})),L((function(e){return[].concat(Object(ie.a)(e),[t])})),G();break;case"image":if(D.content.image.length>0){var r=[].concat(Object(ie.a)(D.content.image),[t]);I(Object(u.a)(Object(u.a)({},D),{},{content:Object(u.a)(Object(u.a)({},D.content),{},{image:r})})),L((function(e){return[].concat(Object(ie.a)(e),[t])})),G()}else I(Object(u.a)(Object(u.a)({},D),{},{content:Object(u.a)(Object(u.a)({},D.content),{},{image:t})})),L((function(e){return[].concat(Object(ie.a)(e),[t])})),G();break;case"gallery":if(D.content.gallery.length>0){var a=[].concat(Object(ie.a)(D.content.gallery),[t]);I(Object(u.a)(Object(u.a)({},D),{},{content:Object(u.a)(Object(u.a)({},D.content),{},{gallery:a})})),L((function(e){return[].concat(Object(ie.a)(e),[t])})),G()}else I(Object(u.a)(Object(u.a)({},D),{},{content:Object(u.a)(Object(u.a)({},D.content),{},{gallery:t})})),L((function(e){return[].concat(Object(ie.a)(e),[t])})),G();break;case"video":if(D.content.video.length>0){var c=[].concat(Object(ie.a)(D.content.video),[t]);I(Object(u.a)(Object(u.a)({},D),{},{content:Object(u.a)(Object(u.a)({},D.content),{},{video:c})})),L((function(e){return[].concat(Object(ie.a)(e),[t])})),G()}else I(Object(u.a)(Object(u.a)({},D),{},{content:Object(u.a)(Object(u.a)({},D.content),{},{video:t})})),L((function(e){return[].concat(Object(ie.a)(e),[t])})),G();break;case"slider":if(D.content.slider.length>0){var s=[].concat(Object(ie.a)(D.content.slider),[t]);I(Object(u.a)(Object(u.a)({},D),{},{content:Object(u.a)(Object(u.a)({},D.content),{},{slider:s})})),L((function(e){return[].concat(Object(ie.a)(e),[t])})),G()}else I(Object(u.a)(Object(u.a)({},D),{},{content:Object(u.a)(Object(u.a)({},D.content),{},{slider:t})})),L((function(e){return[].concat(Object(ie.a)(e),[t])})),G()}},increment:s}),Object(S.jsxs)("article",{className:"content-to-order",onDrop:Q,onDragOver:Te,children:[Object(S.jsx)("h6",{children:"Contenido generado para ordenar"}),V.length>0&&Object(S.jsx)(Be,{content:V,setContent:R,dragStart:De,dragOver:Ie,decrement:o}),F.length>0&&Object(S.jsx)(Be,{content:F,setContent:L,dragStart:De,dragOver:Ie,decrement:o})]})]}),Object(S.jsx)(Ke,{selectedPost:D,dragOverReceptor:Te,dragOver:Ie,drop:Q,decrement:o,counter:c,handleSaveContent:function(){V.forEach((function(e){I(Object(u.a)(Object(u.a)({},D),{},{orderedContent:[].concat(Object(ie.a)(D.orderedContent),[e])}))})),F.forEach((function(e){I(Object(u.a)(Object(u.a)({},D),{},{orderedContent:[].concat(Object(ie.a)(D.orderedContent),[e])}))})),g.a.fire("\xa1Bien!","Orden Guardado","success"),G()},dragStart:De,setContent:L})]})]})},Xe=function(){var e=Object(m.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("sections/",t,"POST");case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r.section);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(m.a)(O.a.mark((function e(t,n){var r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("sections/".concat(n),t,"PUT");case 2:return e.next=4,f("sections");case 4:return r=e.sent,e.next=7,r.json();case 7:return a=e.sent,e.abrupt("return",a.sections);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$e=function(){var e=Object(m.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("sections/".concat(t),{},"DELETE");case 2:return e.next=4,f("sections");case 4:return n=e.sent,e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",r.sections);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),et=a.a.memo((function(e){var t=e.nameValue,n=e.deleteField,a=e.inputType,c=e.editLabel,s=e.editAction,o=e.editValue,u=e.submitEdit,l=e.imageEdit,d=void 0!==l&&l,j=Object(r.useState)(!1),b=Object(i.a)(j,2),p=b[0],O=b[1],m=function(){return O(!1)},h=function(){return O(!0)};return Object(S.jsxs)(S.Fragment,{children:[o?Object(S.jsxs)("div",{className:"edit-group",children:[d?Object(S.jsxs)("div",{children:[Object(S.jsxs)("p",{children:[c,": "]}),Object(S.jsx)("figure",{children:Object(S.jsx)("img",{src:o,alt:t})})]}):Object(S.jsxs)("p",{children:[c,": ",Object(S.jsx)("strong",{children:o})]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return n(t)},children:"Borrar"}),Object(S.jsx)("button",{className:"my-btn mini",onClick:h,children:"Editar"})]})]}):Object(S.jsxs)("div",{className:"edit-group",children:[Object(S.jsxs)("p",{children:[c,": ",Object(S.jsx)("small",{children:"Sin datos"})]}),Object(S.jsx)("button",{className:"my-btn mini",onClick:h,children:"A\xf1adir"})]}),Object(S.jsxs)(D.a,{className:"my-modals",show:p,onHide:m,children:[Object(S.jsx)(D.a.Header,{children:Object(S.jsx)(D.a.Title,{children:o})}),Object(S.jsx)(D.a.Body,{children:Object(S.jsxs)("form",{className:"edit-form",onSubmit:u,children:[Object(S.jsx)("input",{name:t,type:a,onChange:s,placeholder:o}),Object(S.jsx)("button",{className:"my-btn",type:"submit",onClick:m,children:"Guardar"})]})}),Object(S.jsx)(D.a.Footer,{children:Object(S.jsx)("button",{className:"my-btn",onClick:m,children:"cerrar"})})]})]})})),tt=function e(t){var n=t.setQuill,a=t.handleQuill,c=t.setParsed,s=Object(r.useState)(""),o=Object(i.a)(s,2),u=o[0],l=o[1],d=Object(r.useRef)(null);return Object(r.useEffect)((function(){n(u),c({__html:u})}),[u,n,c]),Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"text-editor",children:Object(S.jsx)(Re.a,{ref:d,modules:{toolbar:{container:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link"]]},clipboard:{matchVisual:!1}},formats:e.formats,theme:"snow",value:u,onChange:l})}),Object(S.jsx)("form",{onSubmit:a,children:Object(S.jsx)("button",{type:"submit",className:"my-btn mini secondary",children:"Guardar texto"})})]})};tt.formats=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","align","color","script","background"];var nt=tt,rt=function(){var e=Object(r.useContext)(o).user,t=Object(r.useContext)(G),n=t.dispatchSections,a=t.sections,c=Object(b.useParams)().id,s=C(),d=s.values,j=s.setValues,p=s.handleInputChange,h=s.handleFileChange,f=d.title,x=d.text,v=d.parsedText,y=d.subtitle,k=d._id,E=d.uniqueImage,T=d.gallery,D=d.features,I=d.formInputs,_=Object(b.useHistory)(),B=Object(r.useRef)(),F=Object(r.useState)(),L=Object(i.a)(F,2),P=L[0],A=L[1],V=Object(r.useState)(),R=Object(i.a)(V,2),U=R[0],q=R[1],J=Object(r.useState)(),Q=Object(i.a)(J,2),M=Q[0],z=Q[1];Object(r.useEffect)((function(){a.length>0&&(B.current=a.find((function(e){return e._id===c})),j(B.current))}),[c,a,j]);var Y=function(e){document.getElementById(e).value=""},K=function(){var e=Object(m.a)(O.a.mark((function e(t){var n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,r=n.files[0],e.next=4,w(r);case 4:a=e.sent,A(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(m.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _.push("/bratic"),e.next=3,$e(c);case 3:t=e.sent,n({type:l.deleteSection,payload:t});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(m.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(Object(u.a)(Object(u.a)({},d),{},Object(N.a)({},t,"")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(e){e.preventDefault()},$=function(){var e=Object(m.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(d,k);case 2:(t=e.sent)?(g.a.fire("\xa1Chachi!","Los cambios han sido guardados","success"),n({type:l.sectionUpdate,payload:t}),_.push("/bratic")):g.a.fire("\xa1Oh-oh!","Ha habido un error, int\xe9ntalo de nuevo","error");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("section",{className:"section-screen",children:[Object(S.jsxs)("h1",{children:["Secci\xf3n ",Object(S.jsx)("span",{children:null===d||void 0===d?void 0:d.sectionName})]}),Object(S.jsx)("button",{className:"my-btn mini",onClick:$,children:"Guardar Cambios"}),"admin@yai.com"===e.email&&Object(S.jsx)("button",{className:"my-btn secondary mini",onClick:W,children:"Borrar esta secci\xf3n"}),(f||""===f)&&Object(S.jsx)(et,{nameValue:"title",deleteField:X,inputType:"text",editLabel:"T\xedtulo",editAction:p,editValue:null===d||void 0===d?void 0:d.title,submitEdit:Z}),y&&Object(S.jsx)(et,{nameValue:"subtitle",deleteField:X,inputType:"text",editLabel:"Subt\xedtulo",editAction:p,editValue:null===d||void 0===d?void 0:d.subtitle,submitEdit:Z}),E&&Object(S.jsx)(et,{imageEdit:!0,nameValue:"uniqueImage",deleteField:X,inputType:"file",editLabel:"Imagen principal",editAction:h,editValue:null===d||void 0===d?void 0:d.uniqueImage,submitEdit:Z}),(null===T||void 0===T?void 0:T.length)>0&&Object(S.jsxs)("div",{className:"edit-gallery",children:[Object(S.jsx)("div",{className:"gallery",children:null===T||void 0===T?void 0:T.map((function(e,t){return Object(S.jsxs)("figure",{className:"each-picture",children:[Object(S.jsx)("img",{src:e,alt:""}),Object(S.jsx)(H.c,{className:"close-icon",onClick:function(){return function(e){var t=Object(ie.a)(T);t.splice(e,1),j(Object(u.a)(Object(u.a)({},d),{},{gallery:t}))}(t)}})]},t)}))}),Object(S.jsxs)("div",{className:"button-file-group",children:[Object(S.jsx)("input",{className:"file-input",type:"file",onChange:K,placeholder:"A\xf1adir Foto",name:"gallery"}),Object(S.jsx)("button",{onClick:function(e){e.preventDefault(),T?(null===T||void 0===T?void 0:T.includes(P))||j(Object(u.a)(Object(u.a)({},d),{},{gallery:[].concat(Object(ie.a)(T),[P])})):j(Object(u.a)(Object(u.a)({},d),{},{gallery:[P]}))},className:"my-btn mini",children:"A\xf1adir"})]})]}),(null===D||void 0===D?void 0:D.length)>0&&Object(S.jsxs)("div",{className:"edit-features",children:[Object(S.jsx)("div",{className:"features",children:null===D||void 0===D?void 0:D.map((function(e,t){return Object(S.jsxs)("div",{className:"each-feat",children:[e,Object(S.jsx)(H.c,{onClick:function(){return function(e){var t=Object(ie.a)(D);t.splice(e,1),j(Object(u.a)(Object(u.a)({},d),{},{features:t}))}(t)}})]},e)}))}),Object(S.jsxs)("div",{className:"button-input-group",children:[Object(S.jsx)("input",{type:"text",id:"to-reset-features",onChange:function(e){A(e.target.value)},placeholder:"A\xf1adir Caracter\xedstica",name:"features"}),Object(S.jsx)("button",{onClick:function(e){e.preventDefault(),D?(null===D||void 0===D?void 0:D.includes(P))||(j(Object(u.a)(Object(u.a)({},d),{},{features:[].concat(Object(ie.a)(D),[P])})),Y("to-reset-features")):(j(Object(u.a)(Object(u.a)({},d),{},{features:[P]})),Y("to-reset-features")),Y("to-reset-features")},className:"my-btn mini",children:"A\xf1adir"})]})]}),(null===I||void 0===I?void 0:I.length)>0&&Object(S.jsxs)("div",{className:"edit-features",children:[Object(S.jsx)("div",{className:"features",children:null===I||void 0===I?void 0:I.map((function(e,t){return Object(S.jsxs)("div",{className:"each-feat",children:[e,Object(S.jsx)(H.c,{onClick:function(){return function(e){var t=Object(ie.a)(I);t.splice(e,1),j(Object(u.a)(Object(u.a)({},d),{},{formInputs:t}))}(t)}})]},e)}))}),Object(S.jsxs)("div",{className:"button-input-group",children:[Object(S.jsx)("input",{type:"text",id:"to-reset-inputs",onChange:function(e){A(e.target.value)},placeholder:"A\xf1adir Input",name:"formInputs"}),Object(S.jsx)("button",{onClick:function(e){e.preventDefault(),I?(null===I||void 0===I?void 0:I.includes(P))||(j(Object(u.a)(Object(u.a)({},d),{},{formInputs:[].concat(Object(ie.a)(I),[P])})),Y("to-reset-inputs")):(j(Object(u.a)(Object(u.a)({},d),{},{formInputs:[P]})),Y("to-reset-inputs")),Y("to-reset-inputs")},className:"my-btn mini",children:"A\xf1adir"})]})]}),x&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("section",{className:"edit-group text-editor-group",children:[Object(S.jsx)("p",{children:"Texto:"}),Object(S.jsx)("div",{dangerouslySetInnerHTML:v})]}),Object(S.jsx)(nt,{setQuill:q,handleQuill:function(e){e.preventDefault(),j(Object(u.a)(Object(u.a)({},d),{},{text:U,parsedText:M}))},setParsed:z})]})]})})},at=function(e){var t=e.handleClose,n=Object(r.useContext)(G).dispatchSections,a=Object(r.useState)(),c=Object(i.a)(a,2),s=c[0],o=c[1],d=Object(r.useState)(),j=Object(i.a)(d,2),b=j[0],p=j[1],h=Object(r.useState)(),f=Object(i.a)(h,2),x=f[0],v=f[1],y=C(),k=y.values,N=y.setValues,E=y.handleInputChange,T=y.handleFileChange,D=k.uniqueImage,I=k.gallery,_=k.features,B=k.formInputs,F=function(e){document.getElementById(e).value=""},L=function(){var e=Object(m.a)(O.a.mark((function e(t){var n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,r=n.files[0],e.next=4,w(r);case 4:a=e.sent,o(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(m.a)(O.a.mark((function e(r){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,Xe(k);case 3:(a=e.sent)?(g.a.fire("\xa1Chachi!","Los cambios han sido guardados","success"),n({type:l.addSection,payload:a})):g.a.fire("\xa1Oh-oh!","Ha habido un error, int\xe9ntalo de nuevo","error"),t();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("section",{className:"section-form",children:[Object(S.jsxs)("div",{className:"left-side",children:[Object(S.jsxs)("label",{children:["Tipo de secci\xf3n* ",(null===k||void 0===k?void 0:k.sectionType)&&Object(S.jsx)(H.a,{})]}),Object(S.jsxs)("select",{onChange:E,name:"sectionType",required:!0,children:[Object(S.jsx)("option",{value:"section",defaultValue:!0,children:"Secci\xf3n"}),Object(S.jsx)("option",{value:"nav",children:"Navegador"}),Object(S.jsx)("option",{value:"header",children:"Cabecera"}),Object(S.jsx)("option",{value:"footer",children:"Footer"})]}),Object(S.jsxs)("label",{children:["Nombre de la secci\xf3n* ",(null===k||void 0===k?void 0:k.sectionName)&&Object(S.jsx)(H.a,{})]}),Object(S.jsx)("input",{type:"text",onChange:E,name:"sectionName",autoComplete:"off",placeholder:"Nombre de la secci\xf3n",required:!0}),Object(S.jsxs)("label",{children:["T\xedtulo ",(null===k||void 0===k?void 0:k.title)&&Object(S.jsx)(H.a,{})]}),Object(S.jsx)("input",{type:"text",onChange:E,autoComplete:"off",name:"title",placeholder:"T\xedtulo",required:!0}),Object(S.jsx)("label",{children:"Subt\xedtulo "}),Object(S.jsx)("input",{type:"text",onChange:E,autoComplete:"off",name:"subtitle",placeholder:"Subt\xedtulo"}),Object(S.jsx)("label",{children:"Imagen principal"}),D&&Object(S.jsx)("figure",{className:"unique-image",children:Object(S.jsx)("img",{src:D,alt:""})}),Object(S.jsx)("input",{className:"file-input",type:"file",onChange:T,name:"uniqueImage"}),Object(S.jsx)("label",{htmlFor:"",children:"Galer\xeda de im\xe1genes"}),Object(S.jsx)("div",{className:"gallery",children:null===I||void 0===I?void 0:I.map((function(e,t){return Object(S.jsxs)("figure",{className:"each-picture",children:[Object(S.jsx)("img",{src:e,alt:""}),Object(S.jsx)(H.c,{className:"close-icon",onClick:function(){return function(e){var t=Object(ie.a)(I);t.splice(e,1),N(Object(u.a)(Object(u.a)({},k),{},{gallery:t}))}(t)}})]},t)}))}),Object(S.jsxs)("div",{className:"button-file-group",children:[Object(S.jsx)("input",{className:"file-input",type:"file",onChange:L,placeholder:"A\xf1adir Foto",name:"gallery"}),Object(S.jsx)("button",{onClick:function(e){e.preventDefault(),I?(null===I||void 0===I?void 0:I.includes(s))||N(Object(u.a)(Object(u.a)({},k),{},{gallery:[].concat(Object(ie.a)(I),[s])})):N(Object(u.a)(Object(u.a)({},k),{},{gallery:[s]}))},className:"my-btn mini third",children:"A\xf1adir"})]})]}),Object(S.jsxs)("div",{className:"right-side",children:[Object(S.jsx)("label",{children:"Texto "}),Object(S.jsx)(nt,{setQuill:p,handleQuill:function(e){e.preventDefault(),N(Object(u.a)(Object(u.a)({},k),{},{text:b,parsedText:x}))},setParsed:v}),Object(S.jsx)("label",{htmlFor:"",children:"Caracter\xedsticas"}),Object(S.jsx)("div",{className:"features",children:null===_||void 0===_?void 0:_.map((function(e,t){return Object(S.jsxs)("div",{className:"each-feat",children:[e,Object(S.jsx)(H.c,{onClick:function(){return function(e){var t=Object(ie.a)(_);t.splice(e,1),N(Object(u.a)(Object(u.a)({},k),{},{features:t}))}(t)}})]},e)}))}),Object(S.jsxs)("div",{className:"button-input-group",children:[Object(S.jsx)("input",{type:"text",id:"to-reset-section-features",onChange:function(e){o(e.target.value)},placeholder:"A\xf1adir Caracter\xedstica",name:"features"}),Object(S.jsx)("button",{onClick:function(e){e.preventDefault(),_?(null===_||void 0===_?void 0:_.includes(s))||(N(Object(u.a)(Object(u.a)({},k),{},{features:[].concat(Object(ie.a)(_),[s])})),F("to-reset-section-features")):(N(Object(u.a)(Object(u.a)({},k),{},{features:[s]})),F("to-reset-section-features")),F("to-reset-section-features")},className:"my-btn mini third",children:"A\xf1adir"})]}),Object(S.jsx)("label",{children:"Inputs del formulario"}),Object(S.jsx)("div",{className:"features",children:null===B||void 0===B?void 0:B.map((function(e,t){return Object(S.jsxs)("div",{className:"each-feat",children:[e,Object(S.jsx)(H.c,{onClick:function(){return function(e){var t=Object(ie.a)(B);t.splice(e,1),N(Object(u.a)(Object(u.a)({},k),{},{formInputs:t}))}(t)}})]},e)}))}),Object(S.jsxs)("div",{className:"button-input-group",children:[Object(S.jsx)("input",{type:"text",id:"to-reset-section-inputs",onChange:function(e){o(e.target.value)},placeholder:"A\xf1adir Input",name:"formInputs"}),Object(S.jsx)("button",{onClick:function(e){e.preventDefault(),B?(null===B||void 0===B?void 0:B.includes(s))||(N(Object(u.a)(Object(u.a)({},k),{},{formInputs:[].concat(Object(ie.a)(B),[s])})),F("to-reset-section-inputs")):(N(Object(u.a)(Object(u.a)({},k),{},{formInputs:[s]})),F("to-reset-section-inputs")),F("to-reset-section-inputs")},className:"my-btn mini third",children:"A\xf1adir"})]})]})]}),Object(S.jsx)("form",{className:"section-form",onSubmit:P,children:Object(S.jsx)("button",{className:"my-btn mini",type:"submit",children:"Guardar Datos"})})]})},ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.getSections:return t.payload;case l.addSection:return[].concat(Object(ie.a)(e),[t.payload]);case l.deleteSection:return t.payload;case l.updateThis:return Object(u.a)({},t.payload);case l.sectionUpdate:return t.payload;default:return e}},st=function(){var e=Object(r.useRef)(!0),t=Object(r.useContext)(o).user,n=Object(r.useReducer)(U,{}),a=Object(i.a)(n,2),c=a[0],s=a[1],d=Object(r.useReducer)(ct,{}),p=Object(i.a)(d,2),O=p[0],m=p[1];Object(r.useEffect)((function(){return function(){e.current=!1}})),Object(r.useEffect)((function(){e.current&&(f("sections").then((function(e){return e.json()})).then((function(e){return m({type:l.getSections,payload:e.sections})})).catch((function(e){return new Error(e)})),f("companies").then((function(e){return e.json()})).then((function(e){return s({type:l.getCompany,payload:e.company[0]})})).catch((function(e){return new Error(e)})))}),[]);var h=Object(r.useState)(!1),x=Object(i.a)(h,2),v=x[0],g=x[1],y=function(){return g(!1)};return Object(S.jsx)(j.a,{children:Object(S.jsx)("div",{children:t.token?Object(S.jsx)(L.Provider,{value:{company:c,dispatchCompany:s},children:Object(S.jsx)(G.Provider,{value:{sections:O,dispatchSections:m},children:Object(S.jsxs)("div",{className:"dashboard-container",children:[Object(S.jsx)(J,{handleShow:function(){return g(!0)}}),Object(S.jsxs)("main",{children:[Object(S.jsxs)(b.Switch,{children:[Object(S.jsx)(b.Route,{exact:!0,path:"/bratic",component:R}),Object(S.jsx)(b.Route,{exact:!0,path:"/bratic/empresa",component:V}),Object(S.jsx)(b.Route,{exact:!0,path:"/bratic/blog",component:$}),Object(S.jsx)(b.Route,{exact:!0,path:"/bratic/blog/nueva-entrada/:postID",component:Me}),Object(S.jsx)(b.Route,{exact:!0,path:"/bratic/blog/:postID",component:se}),Object(S.jsx)(b.Route,{exact:!0,path:"/bratic/blog/editar-entrada/:postID",component:We}),Object(S.jsx)(b.Route,{exact:!0,path:"/bratic/seccion/:id",component:function(e){return Object(S.jsx)(rt,Object(u.a)({},e))}}),Object(S.jsx)(b.Redirect,{to:"/bratic"})]}),Object(S.jsxs)(D.a,{dialogClassName:"modal-width",centered:!0,className:"my-modals",show:v,onHide:y,children:[Object(S.jsx)(D.a.Header,{children:Object(S.jsx)("h4",{children:"A\xf1adir Secci\xf3n a la web"})}),Object(S.jsx)(D.a.Body,{children:Object(S.jsx)(at,{handleClose:y})}),Object(S.jsx)(D.a.Footer,{children:Object(S.jsx)("button",{className:"my-btn mini secondary",onClick:y,children:"cerrar"})})]})]})]})})}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(Q,{}),Object(S.jsxs)("main",{className:"container",children:[Object(S.jsxs)(b.Switch,{children:[Object(S.jsx)(b.Route,{exact:!0,path:"/",component:E}),Object(S.jsx)(b.Route,{path:"/registro",component:T}),Object(S.jsx)(b.Redirect,{to:"/"})]}),Object(S.jsx)("small",{children:"Made with \u2665 by Yai"}),Object(S.jsx)("small",{children:"\xa9 Bratic S.L."})]})]})})})},it=function(){return JSON.parse(localStorage.getItem("bratic-user"))||{logged:!1}},ot=function(){var e=Object(r.useRef)(!0),t=Object(r.useReducer)(d,{},it),n=Object(i.a)(t,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){return function(){e.current=!1}}),[]),Object(r.useEffect)((function(){e.current&&localStorage.setItem("bratic-user",JSON.stringify(a))}),[a]),Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(o.Provider,{value:{user:a,dispatch:c},children:Object(S.jsx)(st,{})})})};s.a.render(Object(S.jsx)(ot,{}),document.getElementById("root"))},97:function(e,t,n){}},[[215,1,2]]]);
//# sourceMappingURL=main.fcceb86c.chunk.js.map