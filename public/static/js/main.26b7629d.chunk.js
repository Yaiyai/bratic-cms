(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{212:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n(24),i=n.n(c),s=n(9),o=(0,n(1).createContext)(),l=n(2),u={login:"[auth] login",signup:"[auth] signup",logout:"[auth] logout",hasToken:"[auth] hastoken",getCompany:"[company] getCompany",addCompany:"[company] addCompany",companyUpdate:"[company] companyUpdate",companyDelete:"[company] companyDelete",getPosts:"[post] getPosts",getThisPost:"[post] getThisPost",addPost:"[post] addPost",postUpdate:"[post] postUpdate"},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.login:case u.signup:case u.hasToken:return Object(l.a)({},t.payload);case u.logout:return{logged:!1};default:return e}},j=(n(92),n(93),n(94),n(95),n(96),n(27)),b=n(86),p=n(36),m=n(18),O=n(15),h=n(3),f=n.n(h),x=n(5),v="https://bratic-app.herokuapp.com/api",g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(v,"/").concat(e);return"GET"===n?fetch(a):fetch(a,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(v,"/").concat(e),r=localStorage.getItem("bratic-token")||"";return"GET"===n?fetch(a,{method:n,headers:{"x-token":r}}):fetch(a,{method:n,headers:{"Content-type":"application/json","x-token":r},body:JSON.stringify(t)})},k=n(10),w=n.n(k),C=function(){var e=Object(x.a)(f.a.mark((function e(t,n){var a,r,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("auth/login",{email:t,password:n},"POST");case 2:return a=e.sent,e.next=5,a.json();case 5:if(!(r=e.sent).ok){e.next=13;break}return c={id:r.id,name:r.name,email:r.email,logged:!0,token:r.token},localStorage.setItem("bratic-user",JSON.stringify(c)),localStorage.setItem("bratic-token",r.token),e.abrupt("return",c);case 13:i=r.msg,w.a.fire("Error",i,"error");case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(x.a)(f.a.mark((function e(t,n,a){var r,c,i,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("auth/signup",{name:t,email:n,password:a},"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(c=e.sent).ok){e.next=13;break}return i={id:c.id,name:c.name,email:c.email,token:c.token,logged:!0},localStorage.setItem("bratic-user",JSON.stringify(i)),localStorage.setItem("bratic-token",c.token),e.abrupt("return",i);case 13:s=c.msg,w.a.fire("Error",s,"error");case 15:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),E=n(25),S=function(){var e=Object(x.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.cloudinary.com/v1_1/bratic-app/upload",(n=new FormData).append("upload_preset","bratic-app"),n.append("file",t),e.next=6,fetch("https://api.cloudinary.com/v1_1/bratic-app/upload",{method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){return a=e.secure_url})).catch((function(e){return console.log(e)}));case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useState)(e),n=Object(s.a)(t,2),a=n[0],c=n[1],i=function(){c(e)},o=function(e){var t=e.target;c(Object(l.a)(Object(l.a)({},a),{},Object(E.a)({},t.name,t.value)))},u=function(){var e=Object(x.a)(f.a.mark((function e(t){var n,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,r=n.files[0],e.next=4,S(r);case 4:return i=e.sent,e.next=7,c(Object(l.a)(Object(l.a)({},a),{},Object(E.a)({},n.name,i)));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{values:a,setValues:c,handleInputChange:o,handleFileChange:u,resetForm:i}},L=function(){var e=T({}),t=e.values,n=e.handleInputChange,c=t.email,i=t.password,s=Object(r.useContext)(o).dispatch,l=function(){var e=Object(x.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,C(c,i);case 3:n=e.sent,s({type:u.login,payload:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("section",{className:"login",children:[Object(a.jsxs)("form",{onSubmit:l,children:[Object(a.jsx)("label",{children:"Email"}),Object(a.jsx)("input",{type:"email",onChange:n,placeholder:"Tu email",name:"email"}),Object(a.jsx)("label",{children:"Contrase\xf1a"}),Object(a.jsx)("input",{type:"password",onChange:n,placeholder:"Contrase\xf1a",name:"password"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini",children:"Entrar"})]}),Object(a.jsxs)("small",{children:["\xbfNo tienes cuenta? Crea una ",Object(a.jsx)(m.b,{to:"/registro",children:"aqu\xed"})," "]})]})})},F=function(){var e=T({}),t=e.values,n=e.handleInputChange,c=t.name,i=t.email,s=t.password,l=t.password2,d=Object(r.useContext)(o).dispatch,j=function(){var e=Object(x.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s!==l){e.next=8;break}return e.next=4,N(c,i,s);case 4:n=e.sent,d({type:u.signup,payload:n}),e.next=9;break;case 8:w.a.fire("Error","Las contrase\xf1as deben coincidir","error");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("section",{className:"login",children:[Object(a.jsxs)("form",{onSubmit:j,children:[Object(a.jsx)("label",{children:"Nombre"}),Object(a.jsx)("input",{type:"text",onChange:n,placeholder:"Tu nombre",name:"name"}),Object(a.jsx)("label",{children:"Email"}),Object(a.jsx)("input",{type:"email",onChange:n,placeholder:"Tu email",name:"email"}),Object(a.jsx)("label",{children:"Contrase\xf1a"}),Object(a.jsx)("input",{type:"password",onChange:n,placeholder:"Contrase\xf1a",name:"password"}),Object(a.jsx)("label",{children:"Repite Contrase\xf1a"}),Object(a.jsx)("input",{type:"password",onChange:n,placeholder:"Repite Contrase\xf1a",name:"password2"}),Object(a.jsx)("button",{type:"submit",className:"my-btn mini",children:"Registro"})]}),Object(a.jsxs)("small",{children:["\xbfYa est\xe1s registrado? Entra ",Object(a.jsx)(m.b,{to:"/",children:"aqu\xed"})," "]})]})})},I=n(20),D=function(e){var t=e.nameValue,n=e.deleteField,c=e.inputType,i=e.editLabel,o=e.editAction,l=e.editValue,u=e.submitEdit,d=e.imageEdit,j=void 0!==d&&d,b=Object(r.useState)(!1),p=Object(s.a)(b,2),m=p[0],O=p[1],h=function(){return O(!1)},f=function(){return O(!0)};return Object(a.jsxs)(a.Fragment,{children:[l?Object(a.jsxs)("div",{className:"edit-group",children:[j?Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:[i,": "]}),Object(a.jsx)("figure",{children:Object(a.jsx)("img",{src:l,alt:t})})]}):Object(a.jsxs)("p",{children:[i,": ",Object(a.jsx)("strong",{children:l})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return n(t)},children:"Borrar"}),Object(a.jsx)("button",{className:"my-btn mini",onClick:f,children:"Editar"})]})]}):Object(a.jsxs)("div",{className:"edit-group",children:[Object(a.jsxs)("p",{children:[i,": ",Object(a.jsx)("small",{children:"Sin datos"})]}),Object(a.jsx)("button",{className:"my-btn mini",onClick:f,children:"A\xf1adir"})]}),Object(a.jsxs)(I.a,{className:"edit-modal my-modals",show:m,onHide:h,children:[Object(a.jsx)(I.a.Header,{children:Object(a.jsx)(I.a.Title,{children:l})}),Object(a.jsx)(I.a.Body,{children:Object(a.jsxs)("form",{className:"edit-form",onSubmit:u,children:[Object(a.jsx)("input",{name:t,type:c,onChange:o,placeholder:l}),Object(a.jsx)("button",{className:"my-btn",type:"submit",onClick:h,children:"Guardar"})]})}),Object(a.jsx)(I.a.Footer,{children:Object(a.jsx)("button",{className:"my-btn",onClick:h,children:"cerrar"})})]})]})},B=function(){var e=Object(x.a)(f.a.mark((function e(t){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("companies/",t,"POST");case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(a=e.sent).ok){e.next=9;break}return r=a.company,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(x.a)(f.a.mark((function e(t,n){var a,r,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("companies/".concat(t),n,"PUT");case 2:return a=e.sent,e.next=5,a.json();case 5:if(!(r=e.sent).ok){e.next=12;break}return c=r.company,w.a.fire("\xa1Chachi!","Los cambios han sido guardados","success"),e.abrupt("return",c);case 12:i=r.error,w.a.fire("Error",i,"error");case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=Object(x.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("companies/".concat(t),{},"DELETE");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=(0,n(1).createContext)(),A=function(){var e=Object(r.useContext)(P),t=e.company,n=e.dispatchCompany,c=t.name,i=t.phone,s=t.address,o=t._id,d=t.mainEmail,j=t.mainLogo,b=t.secondaryLogo,p=t.linkedin,m=t.facebook,O=t.twitter,h=t.instagram,v=T(t),g=v.values,y=v.setValues,k=v.handleInputChange,C=v.handleFileChange,N=function(){var e=Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(o);case 2:n({type:u.companyDelete});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(x.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(l.a)(Object(l.a)({},g),{},Object(E.a)({},t,"")),y(Object(l.a)(Object(l.a)({},g),{},Object(E.a)({},t,""))),n({type:u.updateCompany,payload:a});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e){e.preventDefault(),n({type:u.updateCompany,payload:g})},F=function(){var e=Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(o,t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h1",{children:"Datos de empresa"}),Object(a.jsx)("button",{className:"my-btn mini",onClick:F,children:"Guardar Cambios"}),Object(a.jsx)("button",{className:"my-btn secondary mini",onClick:function(){w.a.fire({title:"\xbfSeguro?",text:"Si borras esto, no habr\xe1 datos de empresa",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\xa1Borrar Empresa!",cancelButtonText:"\xa1Uy, no!"}).then((function(e){e.isConfirmed&&(N(),w.a.fire("\xa1Empresa borrada!","Esta empresa se march\xf3 para no volver","success"))}))},children:"Borrar esta empresa"}),Object(a.jsxs)("div",{className:"editing",children:[Object(a.jsx)(D,{deleteField:S,nameValue:"name",inputType:"text",editLabel:"Nombre de empresa",editAction:k,editValue:c,submitEdit:L}),Object(a.jsx)(D,{deleteField:S,nameValue:"address",inputType:"text",editLabel:"Direcci\xf3n",editAction:k,editValue:s,submitEdit:L}),Object(a.jsx)(D,{deleteField:S,nameValue:"phone",inputType:"text",editLabel:"Tel\xe9fono principal",editAction:k,editValue:i,submitEdit:L}),Object(a.jsx)(D,{deleteField:S,nameValue:"mainEmail",inputType:"email",editLabel:"Email principal",editAction:k,editValue:d,submitEdit:L}),Object(a.jsx)(D,{deleteField:S,nameValue:"mainLogo",imageEdit:!0,inputType:"file",editLabel:"Logo Principal",editAction:C,editValue:j,submitEdit:L}),Object(a.jsx)(D,{deleteField:S,nameValue:"secondaryLogo",imageEdit:!0,inputType:"file",editLabel:"Logo BN",editAction:C,editValue:b,submitEdit:L}),Object(a.jsx)(D,{deleteField:S,nameValue:"twitter",inputType:"text",editLabel:"Twitter Url",editAction:k,editValue:O,submitEdit:L}),Object(a.jsx)(D,{deleteField:S,nameValue:"facebook",inputType:"text",editLabel:"Facebook url",editAction:k,editValue:m,submitEdit:L}),Object(a.jsx)(D,{deleteField:S,nameValue:"instagram",inputType:"text",editLabel:"Instagram Url",editAction:k,editValue:h,submitEdit:L}),Object(a.jsx)(D,{deleteField:S,nameValue:"linkedin",inputType:"text",editLabel:"Linkedin Url",editAction:k,editValue:p,submitEdit:L})]})]})},R=function(){var e=T({}),t=e.values,n=e.handleInputChange,r=e.handleFileChange,c=function(){var e=Object(x.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,B(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("form",{className:"add-form",onSubmit:c,children:[Object(a.jsx)("input",{type:"text",name:"name",placeholder:"Nombre de la empresa",onChange:n}),Object(a.jsx)("input",{type:"email",name:"mainEmail",placeholder:"Correo Principal",onChange:n}),Object(a.jsx)("input",{type:"text",name:"phone",placeholder:"Tel\xe9fono principal",onChange:n}),Object(a.jsx)("input",{type:"text",name:"address",placeholder:"Direcci\xf3n",onChange:n}),Object(a.jsx)("input",{type:"text",name:"linkedin",placeholder:"URL Linkedin",onChange:n}),Object(a.jsx)("input",{type:"text",name:"facebook",placeholder:"URL Facebook",onChange:n}),Object(a.jsx)("input",{type:"text",name:"instagram",placeholder:"URL Instagram",onChange:n}),Object(a.jsx)("input",{type:"text",name:"twitter",placeholder:"URL Twitter",onChange:n}),Object(a.jsxs)("div",{className:"input-images",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"mainLogo",children:"Logo principal"}),Object(a.jsx)("input",{type:"file",className:"file-input",name:"mainLogo",id:"mainLogo",placeholder:"Logo Principal",onChange:r})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"secondaryLogo",children:"Logo en BN"}),Object(a.jsx)("input",{type:"file",className:"file-input",name:"secondaryLogo",id:"secondaryLogo",placeholder:"Logo Secundario",onChange:r})]})]}),Object(a.jsx)("button",{className:"my-btn mini",type:"submit",children:"Crear empresa"})]})})},U=function(){var e=Object(r.useRef)(!0),t=Object(r.useContext)(P).company;return Object(r.useEffect)((function(){return function(){e.current=!1}}),[]),Object(a.jsx)(a.Fragment,{children:t._id?Object(a.jsx)(A,{}):Object(a.jsx)(R,{})})},G=function(){var e=Object(r.useContext)(o).user;return Object(a.jsx)("div",{children:Object(a.jsxs)("h1",{children:["\xa1Bienvenid@ ",e.name,"!"]})})},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.getCompany:case u.addCompnany:case u.companyUpdate:case u.deleteProperty:return Object(l.a)({},t.payload);case u.maquinasCategoriesUpdate:return Object(l.a)(Object(l.a)({},e),{},{maquinasCategories:t.payload});case u.companyDelete:return{};default:return e}},J=function(){var e=Object(r.useContext)(o).dispatch,t=function(){var t=Object(x.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({type:u.logout});case 2:localStorage.removeItem("bratic-token"),localStorage.removeItem("bratic-user");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("nav",{className:"dash-nav",children:[Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)(m.b,{to:"/bratic",children:Object(a.jsx)("figure",{children:Object(a.jsx)("img",{src:"https://res.cloudinary.com/bratic-app/image/upload/v1609866461/logoBN_ujpbti.svg",alt:""})})})}),Object(a.jsx)("li",{children:Object(a.jsx)(m.b,{to:"/bratic/empresa",children:"Datos de empresa"})}),Object(a.jsx)("li",{children:Object(a.jsx)(m.b,{to:"/bratic/blog",children:"Blog"})})]}),Object(a.jsxs)("div",{className:"btn-group",children:[Object(a.jsx)("small",{children:"Made with \u2665 by Yai"}),Object(a.jsx)("small",{children:"\xa9 Bratic S.L."}),Object(a.jsx)("button",{className:"my-btn secondary mini",onClick:t,children:"Cerrar Sesi\xf3n"})]})]})})},H=function(){return Object(a.jsx)("nav",{className:"login-nav",children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)("figure",{children:Object(a.jsx)("img",{src:"https://res.cloudinary.com/bratic-app/image/upload/v1609866461/logoBN_ujpbti.svg",alt:""})}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)(m.b,{to:"/",children:"Entrar"})}),Object(a.jsx)("li",{children:Object(a.jsx)(m.b,{to:"/registro",children:"Registro"})})]})]})})},M=function(){var e=Object(x.a)(f.a.mark((function e(t){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("posts/".concat(t),"GET");case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(a=e.sent).ok){e.next=9;break}return r=a.posts,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(x.a)(f.a.mark((function e(t){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("posts/post/".concat(t),"GET");case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(a=e.sent).ok){e.next=9;break}return r=a.post,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(x.a)(f.a.mark((function e(t){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("posts/",t,"POST");case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(a=e.sent).ok){e.next=9;break}return r=a.post,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(x.a)(f.a.mark((function e(t,n){var a,r,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("posts/".concat(t),n,"PUT");case 2:return a=e.sent,e.next=5,a.json();case 5:if(!(r=e.sent).ok){e.next=12;break}return c=r.post,w.a.fire("\xa1Chachi!","Los cambios han sido guardados","success"),e.abrupt("return",c);case 12:i=r.error,w.a.fire("Error",i,"error");case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),K=function(){var e=Object(x.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("posts/".concat(t),{},"DELETE");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=n(14),X=n(47),Z=function(){var e=Object(x.a)(f.a.mark((function e(t,n){var a,r,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("galleries/".concat(n),t,"POST");case 2:return a=e.sent,e.next=5,a.json();case 5:if(!(r=e.sent).ok){e.next=11;break}return c=r.gallery,e.abrupt("return",c);case 11:i=r.msg,w.a.fire("\xa1Oh-oh!",i,"error");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$=function(){var e=Object(x.a)(f.a.mark((function e(t){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("galleries/".concat(t),{},"DELETE");case 2:return n=e.sent,e.next=5,n.json();case 5:(a=e.sent).ok||(r=a.msg,w.a.fire("\xa1Oh-oh!",r,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(e){var t=e.saveElement,n=e.postID,c=Object(r.useState)(),i=Object(s.a)(c,2),o=i[0],l=i[1],u=Object(r.useState)([]),d=Object(s.a)(u,2),j=d[0],b=d[1],p=function(){var e=Object(x.a)(f.a.mark((function e(t){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,a=n.files[0],e.next=4,S(a);case 4:r=e.sent,l(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(x.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z({gallery:j},n);case 2:a=e.sent,t("gallery",a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"file-group",children:[Object(a.jsx)("input",{className:"file-input",type:"file",onChange:p,placeholder:"A\xf1adir Foto",name:"gallery"}),Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),0===j.length?b([o]):(null===j||void 0===j?void 0:j.includes(o))||b([].concat(Object(W.a)(j),[o]))},className:"my-btn mini third",children:"A\xf1adir Imagen"})]}),Object(a.jsx)("div",{className:"gallery",children:null===j||void 0===j?void 0:j.map((function(e,t){return Object(a.jsxs)("figure",{className:"each-picture",children:[Object(a.jsx)("img",{src:e,alt:""}),Object(a.jsx)(X.a,{className:"close-icon",onClick:function(){return function(e){var t=Object(W.a)(j);t.splice(e,1),b(t)}(t)},icon:"times-circle"})]},t)}))}),Object(a.jsx)("button",{className:"my-btn mini",onClick:function(){return m()},children:"A\xf1adir Galer\xeda a la entrada"})]})},te=function(){var e=Object(x.a)(f.a.mark((function e(t,n){var a,r,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("images/".concat(n),t,"POST");case 2:return a=e.sent,e.next=5,a.json();case 5:if(!(r=e.sent).ok){e.next=11;break}return c=r.image,e.abrupt("return",c);case 11:i=r.msg,w.a.fire("\xa1Oh-oh!",i,"error");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ne=function(){var e=Object(x.a)(f.a.mark((function e(t){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("images/".concat(t),{},"DELETE");case 2:return n=e.sent,e.next=5,n.json();case 5:(a=e.sent).ok||(r=a.msg,w.a.fire("\xa1Oh-oh!",r,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(e){var t=e.saveElement,n=e.postID,r=T(),c=r.values,i=r.handleFileChange,s=function(){var e=Object(x.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te({image:c.image},n);case 2:a=e.sent,t("image",a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"file-group",children:Object(a.jsx)("input",{type:"file",className:"file-input",name:"image",id:"image",onChange:i})}),(null===c||void 0===c?void 0:c.image)&&Object(a.jsx)("img",{className:"unique-image",src:c.image,alt:""}),Object(a.jsx)("button",{className:"my-btn mini",onClick:function(){return s()},children:"A\xf1adir Imagen a la Entrada"})]})},re=function(){var e=Object(x.a)(f.a.mark((function e(t,n){var a,r,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("sliders/".concat(n),t,"POST");case 2:return a=e.sent,e.next=5,a.json();case 5:if(!(r=e.sent).ok){e.next=11;break}return c=r.slider,e.abrupt("return",c);case 11:i=r.msg,w.a.fire("\xa1Oh-oh!",i,"error");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ce=function(){var e=Object(x.a)(f.a.mark((function e(t){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("sliders/".concat(t),{},"DELETE");case 2:return n=e.sent,e.next=5,n.json();case 5:(a=e.sent).ok||(r=a.msg,w.a.fire("\xa1Oh-oh!",r,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(e){var t=e.saveElement,n=e.postID,c=Object(r.useState)(),i=Object(s.a)(c,2),o=i[0],l=i[1],u=Object(r.useState)([]),d=Object(s.a)(u,2),j=d[0],b=d[1],p=function(){var e=Object(x.a)(f.a.mark((function e(t){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,a=n.files[0],e.next=4,S(a);case 4:r=e.sent,l(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(x.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re({slides:j},n);case 2:a=e.sent,t("slider",a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"file-group",children:[Object(a.jsx)("input",{className:"file-input",type:"file",onChange:p,name:"slider"}),Object(a.jsx)("button",{onClick:function(e){e.preventDefault(),0===j.length?b([o]):(null===j||void 0===j?void 0:j.includes(o))||b([].concat(Object(W.a)(j),[o]))},className:"my-btn mini third",children:"A\xf1adir Imagen al Slider"})]}),Object(a.jsx)("div",{className:"gallery",children:null===j||void 0===j?void 0:j.map((function(e,t){return Object(a.jsxs)("figure",{className:"each-picture",children:[Object(a.jsx)("img",{src:e,alt:""}),Object(a.jsx)(X.a,{className:"close-icon",onClick:function(){return function(e){var t=Object(W.a)(j);t.splice(e,1),b(t)}(t)},icon:"times-circle"})]},t)}))}),Object(a.jsx)("button",{className:"my-btn mini",onClick:function(){return m()},children:"A\xf1adir Slider a la Entrada"})]})},se=function(){var e=Object(x.a)(f.a.mark((function e(t,n){var a,r,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("texts/".concat(n),t,"POST");case 2:return a=e.sent,e.next=5,a.json();case 5:if(!(r=e.sent).ok){e.next=11;break}return c=r.text,e.abrupt("return",c);case 11:i=r.msg,w.a.fire("\xa1Oh-oh!",i,"error");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),oe=function(){var e=Object(x.a)(f.a.mark((function e(t){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("texts/".concat(t),{},"DELETE");case 2:return n=e.sent,e.next=5,n.json();case 5:(a=e.sent).ok||(r=a.msg,w.a.fire("\xa1Oh-oh!",r,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=n(83),ue=n.n(le),de=(n(207),function e(t){var n=t.setQuill,c=Object(r.useState)(""),i=Object(s.a)(c,2),o=i[0],l=i[1],u=Object(r.useRef)(null);return Object(r.useEffect)((function(){n(o)})),Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"text-editor",children:Object(a.jsx)(ue.a,{ref:u,modules:{toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{align:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{script:"sub"},{script:"super"}],["link"]]},clipboard:{matchVisual:!1}},formats:e.formats,theme:"snow",value:o,onChange:l})})})});de.formats=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","align","color","script","background"];var je=de,be=function(e){var t=e.saveElement,n=e.postID,c=Object(r.useState)(),i=Object(s.a)(c,2),o=i[0],u=i[1],d=T(),j=d.values,b=d.setValues,p=function(){var e=Object(x.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(j,n);case 2:a=e.sent,t("text",a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){b(Object(l.a)(Object(l.a)({},j),{},{text:o,parsedText:{__html:o}}))}),[o,j,b]),Object(a.jsxs)("div",{children:[Object(a.jsx)(je,{setQuill:u}),Object(a.jsx)("button",{className:"my-btn mini",onClick:function(){return p()},children:"A\xf1adir Texto a la entrada"})]})},pe=function(){var e=Object(x.a)(f.a.mark((function e(t,n){var a,r,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("videos/".concat(n),t,"POST");case 2:return a=e.sent,e.next=5,a.json();case 5:if(!(r=e.sent).ok){e.next=11;break}return c=r.video,e.abrupt("return",c);case 11:i=r.msg,w.a.fire("\xa1Oh-oh!",i,"error");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),me=function(){var e=Object(x.a)(f.a.mark((function e(t){var n,a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("videos/".concat(t),{},"DELETE");case 2:return n=e.sent,e.next=5,n.json();case 5:(a=e.sent).ok||(r=a.msg,w.a.fire("\xa1Oh-oh!",r,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(e){var t=e.saveElement,n=e.postID,r=T(),c=r.values,i=r.handleFileChange,s=function(){var e=Object(x.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe({video:c.video},n);case 2:a=e.sent,t("video",a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"file-group",children:Object(a.jsx)("input",{type:"file",className:"file-input",name:"video",id:"video",onChange:i})}),(null===c||void 0===c?void 0:c.video)&&Object(a.jsx)("video",{className:"video-preview",src:c.video,controls:!0,muted:!0}),Object(a.jsx)("button",{className:"my-btn mini",onClick:function(){return s()},children:"A\xf1adir V\xeddeo a la entrada"})]})},he=function(e){var t,n,c=e.postID,i=e.handleUpdatePost,o=e.handleDeletePost,u=Object(r.useRef)(),d=Object(r.useState)("default"),j=Object(s.a)(d,2),b=j[0],p=j[1],m=T(),O=m.values,h=m.handleInputChange,f=Object(r.useState)({title:"Sin t\xedtulo",subtitle:"",content:{slider:[],image:[],text:[],video:[],gallery:[]}}),x=Object(s.a)(f,2),v=x[0],g=x[1],y=function(){u.current.selectedIndex=0,p("default")},k=function(e,t){switch(e){case"text":if(v.content.text.length>0){var n=[].concat(Object(W.a)(v.content.text),[t]);g(Object(l.a)(Object(l.a)({},v),{},{content:Object(l.a)(Object(l.a)({},v.content),{},{text:n})})),y()}else{var a=[t];g(Object(l.a)(Object(l.a)({},v),{},{content:Object(l.a)(Object(l.a)({},v.content),{},{text:a})})),y()}break;case"image":if(v.content.image.length>0){var r=[].concat(Object(W.a)(v.content.image),[t]);g(Object(l.a)(Object(l.a)({},v),{},{content:Object(l.a)(Object(l.a)({},v.content),{},{image:r})})),y()}else{var c=[t];g(Object(l.a)(Object(l.a)({},v),{},{content:Object(l.a)(Object(l.a)({},v.content),{},{image:c})})),y()}break;case"gallery":if(v.content.gallery.length>0){var i=[].concat(Object(W.a)(v.content.gallery),[t]);g(Object(l.a)(Object(l.a)({},v),{},{content:Object(l.a)(Object(l.a)({},v.content),{},{gallery:i})})),y()}else{var s=[t];g(Object(l.a)(Object(l.a)({},v),{},{content:Object(l.a)(Object(l.a)({},v.content),{},{gallery:s})})),y()}break;case"video":if(v.content.video.length>0){var o=[].concat(Object(W.a)(v.content.video),[t]);g(Object(l.a)(Object(l.a)({},v),{},{content:Object(l.a)(Object(l.a)({},v.content),{},{video:o})})),y()}else{var u=[t];g(Object(l.a)(Object(l.a)({},v),{},{content:Object(l.a)(Object(l.a)({},v.content),{},{video:u})})),y()}break;case"slider":if(v.content.slider.length>0){var d=[].concat(Object(W.a)(v.content.slider),[t]);g(Object(l.a)(Object(l.a)({},v),{},{content:Object(l.a)(Object(l.a)({},v.content),{},{slider:d})})),y()}else{var j=[t];g(Object(l.a)(Object(l.a)({},v),{},{content:Object(l.a)(Object(l.a)({},v.content),{},{slider:j})})),y()}}},w=function(e,t,n){switch(e){case"video":var a=Object(W.a)(v.content.video);a.splice(n,1),g(Object(l.a)(Object(l.a)({},v),{},{content:Object(l.a)(Object(l.a)({},v.content),{},{video:a})})),me(t);break;case"image":var r=Object(W.a)(v.content.image);r.splice(n,1),g(Object(l.a)(Object(l.a)({},v),{},{content:Object(l.a)(Object(l.a)({},v.content),{},{image:r})})),ne(t);break;case"text":var c=Object(W.a)(v.content.text);c.splice(n,1),g(Object(l.a)(Object(l.a)({},v),{},{content:Object(l.a)(Object(l.a)({},v.content),{},{text:c})})),oe(t);break;case"slider":var i=Object(W.a)(v.content.slider);i.splice(n,1),g(Object(l.a)(Object(l.a)({},v),{},{content:Object(l.a)(Object(l.a)({},v.content),{},{slider:i})})),ce(t);break;case"gallery":var s=Object(W.a)(v.content.gallery);s.splice(n,1),g(Object(l.a)(Object(l.a)({},v),{},{content:Object(l.a)(Object(l.a)({},v.content),{},{gallery:s})})),$(t)}};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(I.a.Header,{children:[Object(a.jsxs)(I.a.Title,{children:["A\xf1adir Entrada ",(null===O||void 0===O?void 0:O.title)&&Object(a.jsxs)("span",{children:[": ",null===O||void 0===O?void 0:O.title]})]}),Object(a.jsxs)("form",{className:"form-title",onSubmit:function(e){e.preventDefault(),g(Object(l.a)(Object(l.a)({},v),{},{title:O.title,subtitle:O.subtitle}))},children:[Object(a.jsx)("label",{htmlFor:"title",children:"T\xedtulo de la Entrada"}),Object(a.jsx)("input",{id:"title",type:"text",name:"title",onChange:h,placeholder:v.title}),Object(a.jsx)("label",{htmlFor:"subtitle",children:"Subt\xedtulo de la Entrada"}),Object(a.jsx)("input",{id:"subtitle",type:"text",name:"subtitle",placeholder:v.subtitle,onChange:h}),Object(a.jsx)("button",{className:"my-btn mini",type:"submit",children:"Guardar"})]})]}),Object(a.jsxs)(I.a.Body,{children:[Object(a.jsxs)("select",{ref:u,onChange:function(e){switch(e.target.value){case"text":p("text");break;case"image":p("image");break;case"gallery":p("gallery");break;case"video":p("video");break;case"slider":p("slider");break;default:p("default")}},name:"content",placeholder:"A\xf1adir...",children:[Object(a.jsx)("option",{value:"default",defaultValue:!0,children:"A\xf1adir..."}),Object(a.jsx)("option",{value:"text",children:"Texto"}),Object(a.jsx)("option",{value:"image",children:"Imagen \xfanica"}),Object(a.jsx)("option",{value:"gallery",children:"Galer\xeda de im\xe1genes"}),Object(a.jsx)("option",{value:"slider",children:"Slider"}),Object(a.jsx)("option",{value:"video",children:"V\xeddeo"})]}),Object(a.jsxs)("section",{className:"add-post",children:[Object(a.jsxs)("article",{className:"left",children:["default"===b&&Object(a.jsx)("p",{children:"A\xf1adir elemento al post"}),"text"===b&&Object(a.jsx)(be,{saveElement:k,postID:c}),"image"===b&&Object(a.jsx)(ae,{saveElement:k,postID:c}),"gallery"===b&&Object(a.jsx)(ee,{saveElement:k,postID:c}),"video"===b&&Object(a.jsx)(Oe,{saveElement:k,postID:c}),"slider"===b&&Object(a.jsx)(ie,{saveElement:k,postID:c})]}),Object(a.jsxs)("article",{className:"right",children:[v.content.text.length>0&&Object(a.jsxs)("div",{className:"preview",children:[Object(a.jsx)("h6",{children:"Textos"}),v.content.text.map((function(e,t){return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{dangerouslySetInnerHTML:e.parsedText}),Object(a.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return w("text",e._id,t)},children:"Borrar"})]},e._id)}))]}),v.content.image.length>0&&Object(a.jsxs)("div",{className:"preview",children:[Object(a.jsx)("h6",{children:"Imagen Simple"}),v.content.image.map((function(e,t){return Object(a.jsxs)("div",{children:[Object(a.jsx)("img",{className:"unique-image",src:e.image,alt:""}),Object(a.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return w("image",e._id,t)},children:"Borrar"})]},e._id)}))]}),v.content.video.length>0&&Object(a.jsxs)("div",{className:"preview",children:[Object(a.jsx)("h6",{children:"V\xeddeo"}),v.content.video.map((function(e,t){return Object(a.jsxs)("div",{children:[Object(a.jsx)("video",{className:"video-preview",src:e.video,controls:!0,muted:!0}),Object(a.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return w("video",e._id,t)},children:"Borrar"})]},e._id)}))]}),(null===(t=v.content.gallery)||void 0===t?void 0:t.length)>0&&Object(a.jsxs)("div",{className:"preview",children:[Object(a.jsx)("h6",{children:"Galer\xedas de fotos"}),v.content.gallery.map((function(e,t){return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"gallery",children:e.gallery.map((function(e,t){return Object(a.jsx)("figure",{className:"each-picture",children:Object(a.jsx)("img",{src:e,alt:""})},t)}))}),Object(a.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return w("gallery",e._id,t)},children:"Borrar"})]},e._id)}))]}),(null===(n=v.content.slider)||void 0===n?void 0:n.length)>0&&Object(a.jsxs)("div",{className:"preview",children:[Object(a.jsx)("h6",{children:"Slider de fotos"}),v.content.slider.map((function(e,t){return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"gallery",children:e.slides.map((function(e,t){return Object(a.jsx)("figure",{className:"each-picture",children:Object(a.jsx)("img",{src:e,alt:""})},t)}))}),Object(a.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return w("slider",e._id,t)},children:"Borrar"})]},e._id)}))]})]})]})]}),Object(a.jsxs)(I.a.Footer,{children:[Object(a.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return o(c)},children:"Cancelar Entrada"}),Object(a.jsx)("button",{className:"my-btn mini",onClick:function(){return i(c,v)},children:"Guardar Entrada"})]})]})},fe=n(84),xe=function(e){var t=e.askIfDelete,n=e.post,c=Object(r.useState)(),i=Object(s.a)(c,2),o=i[0],l=i[1];return Object(r.useEffect)((function(){l(new Date(n.createdAt).toLocaleString())}),[o,l,n]),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("article",{className:"each-post-prev",children:[Object(a.jsxs)("div",{className:"info",children:[Object(a.jsx)("h6",{children:n.title}),o&&Object(a.jsx)("small",{children:o})]}),Object(a.jsxs)("div",{className:"btn-group",children:[Object(a.jsx)("button",{className:"my-btn mini third",onClick:function(){return t(n._id)},children:"Borrar"}),Object(a.jsx)(fe.Link,{className:"my-btn mini",to:"/bratic/blog/".concat(n._id),children:"Ver"})]})]})})},ve=function(){var e=Object(r.useRef)(!0),t=Object(r.useState)(),n=Object(s.a)(t,2),c=n[0],i=n[1],l=Object(r.useState)(),u=Object(s.a)(l,2),d=u[0],j=u[1],b=Object(r.useContext)(o).user,p=Object(r.useState)(!1),m=Object(s.a)(p,2),O=m[0],h=m[1],v=Object(r.useState)(),g=Object(s.a)(v,2),y=g[0],k=g[1],C=function(){var e=Object(x.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(b.id);case 2:t=e.sent,i(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){return function(){e.current=!1}}),[]),Object(r.useEffect)((function(){return e.current&&C(),function(){e.current=!1}}));var N=function(){var e=Object(x.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q({title:"Nueva Entrada",author:b.id});case 2:return t=e.sent,e.next=5,T(!0,"add");case 5:j(t._id);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(x.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t);case 2:return e.next=4,C();case 4:T(!1,"");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(x.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t,n);case 2:C(),T(!1,"");case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(x.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(t),k(n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),L=function(e){w.a.fire({title:"\xbfSeguro?",text:"Si borras esto, la entrada desaparece",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\xa1Borrar Entrada!",cancelButtonText:"\xa1Uy, no!"}).then((function(t){t.isConfirmed&&E(e)}))};return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Entradas del Blog"}),Object(a.jsx)("button",{className:"my-btn mini",onClick:function(){return N()},children:"A\xf1adir entrada"}),(null===c||void 0===c?void 0:c.length)>0?Object(a.jsx)("section",{className:"all-posts",children:null===c||void 0===c?void 0:c.map((function(e){return Object(a.jsx)(xe,{askIfDelete:L,post:e},e._id)}))}):Object(a.jsx)("article",{className:"empty-posts",children:"No tienes entradas del blog"}),Object(a.jsx)(I.a,{dialogClassName:"modal-width",centered:!0,className:"my-modals",show:O,onHide:function(){return T(!1,"")},children:function(e){if(O)switch(e){case"add":return Object(a.jsx)(he,{postID:d,setShow:h,handleUpdatePost:S,handleDeletePost:E})}}(y)})]})},ge=n(85),ye=n(218),ke=n(215),we=n(216),Ce=n(219),Ne=n(217);ye.a.use([ke.a,we.a]);var Ee=function(){var e,t,n=Object(r.useRef)(!0),c=Object(O.useParams)().postID,i=Object(r.useState)(),o=Object(s.a)(i,2),u=o[0],d=o[1],j=Object(r.useState)(),b=Object(s.a)(j,2),p=b[0],m=b[1],h=function(){var e=Object(x.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(c);case 2:t=e.sent,d(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){return n.current&&h(),function(){n.current=!1}})),Object(r.useEffect)((function(){m(null===u||void 0===u?void 0:u.content.gallery.map((function(e){return e.gallery.map((function(e){return{src:e,thumbnail:g(e),w:1200,h:900}}))})))}),[u]);var v=function(e,t,n){switch(e){case"video":var a=Object(W.a)(null===u||void 0===u?void 0:u.content.video);a.splice(n,1),d(Object(l.a)(Object(l.a)({},u),{},{content:Object(l.a)(Object(l.a)({},null===u||void 0===u?void 0:u.content),{},{video:a})})),me(t);break;case"image":var r=Object(W.a)(null===u||void 0===u?void 0:u.content.image);r.splice(n,1),d(Object(l.a)(Object(l.a)({},u),{},{content:Object(l.a)(Object(l.a)({},null===u||void 0===u?void 0:u.content),{},{image:r})})),ne(t);break;case"text":var c=Object(W.a)(null===u||void 0===u?void 0:u.content.text);c.splice(n,1),d(Object(l.a)(Object(l.a)({},u),{},{content:Object(l.a)(Object(l.a)({},null===u||void 0===u?void 0:u.content),{},{text:c})})),oe(t);break;case"slider":var i=Object(W.a)(null===u||void 0===u?void 0:u.content.slider);i.splice(n,1),d(Object(l.a)(Object(l.a)({},u),{},{content:Object(l.a)(Object(l.a)({},null===u||void 0===u?void 0:u.content),{},{slider:i})})),ce(t);break;case"gallery":var s=Object(W.a)(null===u||void 0===u?void 0:u.content.gallery);s.splice(n,1),d(Object(l.a)(Object(l.a)({},u),{},{content:Object(l.a)(Object(l.a)({},null===u||void 0===u?void 0:u.content),{},{gallery:s})})),$(t)}},g=function(e){var t=e.split("upload/");return"".concat(t[0]).concat("upload/w_200/").concat(t[1])};return Object(a.jsxs)("section",{className:"each-post",children:[Object(a.jsx)("h1",{children:null===u||void 0===u?void 0:u.title}),(null===u||void 0===u?void 0:u.subtitle)&&Object(a.jsx)("h2",{children:null===u||void 0===u?void 0:u.subtitle}),Object(a.jsx)("hr",{}),(null===u||void 0===u?void 0:u.content.text.length)>0&&Object(a.jsxs)("div",{className:"preview",children:[Object(a.jsx)("h6",{children:"Textos"}),null===u||void 0===u?void 0:u.content.text.map((function(e,t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{dangerouslySetInnerHTML:e.parsedText},e._id),Object(a.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return v("text",e._id,t)},children:"Borrar"})]})}))]}),(null===u||void 0===u?void 0:u.content.image.length)>0&&Object(a.jsxs)("div",{className:"preview",children:[Object(a.jsx)("h6",{children:"Imagen Simple"}),null===u||void 0===u?void 0:u.content.image.map((function(e,t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("img",{className:"unique-image",src:e.image,alt:""},e._id),Object(a.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return v("image",e._id,t)},children:"Borrar"})]})}))]}),(null===u||void 0===u?void 0:u.content.video.length)>0&&Object(a.jsxs)("div",{className:"preview",children:[Object(a.jsx)("h6",{children:"V\xeddeo"}),null===u||void 0===u?void 0:u.content.video.map((function(e,t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("video",{className:"video-preview",src:e.video,controls:!0,muted:!0}),Object(a.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return v("video",e._id,t)},children:"Borrar"})]})}))]}),(null===u||void 0===u||null===(e=u.content.gallery)||void 0===e?void 0:e.length)>0&&Object(a.jsxs)("div",{className:"preview",children:[Object(a.jsx)("h6",{children:"Galer\xedas de fotos"}),p&&Object(a.jsx)(ge.PhotoSwipeGallery,{items:p,thumbnailContent:function(e){if(e.src)return Object(a.jsx)("img",{src:e.thumbnail,alt:""})}}),null===u||void 0===u?void 0:u.content.gallery.map((function(e,t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"gallery",children:e.gallery.map((function(e,t){return Object(a.jsx)("figure",{className:"each-picture",children:Object(a.jsx)("img",{src:e,alt:""})},t)}))},e._id),Object(a.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return v("gallery",e._id,t)},children:"Borrar"})]})}))]}),(null===u||void 0===u||null===(t=u.content.slider)||void 0===t?void 0:t.length)>0&&Object(a.jsxs)("div",{className:"preview",children:[Object(a.jsx)("h6",{children:"Slider de fotos"}),null===u||void 0===u?void 0:u.content.slider.map((function(e,t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Ce.a,{spaceBetween:0,autoplay:{delay:2500},slidesPerView:1,pagination:{clickable:!0},children:e.slides.map((function(e,t){return Object(a.jsx)(Ne.a,{children:Object(a.jsx)("img",{src:e,alt:""})},t)}))}),Object(a.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return v("slider",e._id,t)},children:"Borrar"})]})}))]})]})},Se=function(){var e=Object(r.useRef)(!0),t=Object(r.useContext)(o).user,n=Object(r.useReducer)(q,{}),c=Object(s.a)(n,2),i=c[0],l=c[1];return Object(r.useEffect)((function(){return function(){e.current=!1}})),Object(r.useEffect)((function(){e.current&&g("companies").then((function(e){return e.json()})).then((function(e){return l({type:u.getCompany,payload:e.company[0]})})).catch((function(e){return new Error(e)}))}),[]),Object(a.jsx)(m.a,{children:Object(a.jsx)("div",{children:t.token?Object(a.jsx)(P.Provider,{value:{company:i,dispatchCompany:l},children:Object(a.jsxs)("div",{className:"dashboard-container",children:[Object(a.jsx)(J,{}),Object(a.jsx)("main",{children:Object(a.jsxs)(O.Switch,{children:[Object(a.jsx)(O.Route,{exact:!0,path:"/bratic",component:G}),Object(a.jsx)(O.Route,{exact:!0,path:"/bratic/empresa",component:U}),Object(a.jsx)(O.Route,{exact:!0,path:"/bratic/blog",component:ve}),Object(a.jsx)(O.Route,{exact:!0,path:"/bratic/blog/:postID",component:Ee}),Object(a.jsx)(O.Redirect,{to:"/bratic"})]})})]})}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(H,{}),Object(a.jsxs)("main",{className:"container",children:[Object(a.jsxs)(O.Switch,{children:[Object(a.jsx)(O.Route,{exact:!0,path:"/",component:L}),Object(a.jsx)(O.Route,{path:"/registro",component:F}),Object(a.jsx)(O.Redirect,{to:"/"})]}),Object(a.jsx)("small",{children:"Made with \u2665 by Yai"}),Object(a.jsx)("small",{children:"\xa9 Bratic S.L."})]})]})})})};j.b.add(b.a,p.d,p.b,p.c,p.a);var Te=function(){return JSON.parse(localStorage.getItem("bratic-user"))||{logged:!1}},Le=function(){var e=Object(r.useRef)(!0),t=Object(r.useReducer)(d,{},Te),n=Object(s.a)(t,2),c=n[0],i=n[1];return Object(r.useEffect)((function(){return function(){e.current=!1}}),[]),Object(r.useEffect)((function(){e.current&&localStorage.setItem("bratic-user",JSON.stringify(c))}),[c]),Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(o.Provider,{value:{user:c,dispatch:i},children:Object(a.jsx)(Se,{})})})};i.a.render(Object(a.jsx)(Le,{}),document.getElementById("root"))},96:function(e,t,n){}},[[212,1,2]]]);
//# sourceMappingURL=main.26b7629d.chunk.js.map