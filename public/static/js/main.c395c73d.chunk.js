(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{212:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),c=n(23),s=n.n(c),i=n(11),o=(0,n(1).createContext)(),u=n(3),l={login:"[auth] login",signup:"[auth] signup",logout:"[auth] logout",hasToken:"[auth] hastoken",getCompany:"[company] getCompany",addCompany:"[company] addCompany",companyUpdate:"[company] companyUpdate",companyDelete:"[company] companyDelete",getPosts:"[post] getPosts",getThisPost:"[post] getThisPost",addPost:"[post] addPost",postUpdate:"[post] postUpdate"},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.login:case l.signup:case l.hasToken:return Object(u.a)({},t.payload);case l.logout:return{logged:!1};default:return e}},j=(n(92),n(93),n(94),n(95),n(96),n(27)),b=n(86),p=n(37),f=n(16),O=n(15),m=n(2),h=n.n(m),x=n(4),v="https://bratic-app.herokuapp.com/api",g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",r="".concat(v,"/").concat(e);return"GET"===n?fetch(r):fetch(r,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",r="".concat(v,"/").concat(e),a=localStorage.getItem("bratic-token")||"";return"GET"===n?fetch(r,{method:n,headers:{"x-token":a}}):fetch(r,{method:n,headers:{"Content-type":"application/json","x-token":a},body:JSON.stringify(t)})},k=n(9),w=n.n(k),N=function(){var e=Object(x.a)(h.a.mark((function e(t,n){var r,a,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("auth/login",{email:t,password:n},"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).ok){e.next=13;break}return c={id:a.id,name:a.name,email:a.email,logged:!0,token:a.token},localStorage.setItem("bratic-user",JSON.stringify(c)),localStorage.setItem("bratic-token",a.token),e.abrupt("return",c);case 13:s=a.msg,w.a.fire("Error",s,"error");case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(x.a)(h.a.mark((function e(t,n,r){var a,c,s,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("auth/signup",{name:t,email:n,password:r},"POST");case 2:return a=e.sent,e.next=5,a.json();case 5:if(!(c=e.sent).ok){e.next=13;break}return s={id:c.id,name:c.name,email:c.email,token:c.token,logged:!0},localStorage.setItem("bratic-user",JSON.stringify(s)),localStorage.setItem("bratic-token",c.token),e.abrupt("return",s);case 13:i=c.msg,w.a.fire("Error",i,"error");case 15:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),E=n(25),S=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.cloudinary.com/v1_1/bratic-app/upload",(n=new FormData).append("upload_preset","bratic-app"),n.append("file",t),n.append("folder","pre"),e.next=7,fetch("https://api.cloudinary.com/v1_1/bratic-app/upload",{method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){return r=e.secure_url})).catch((function(e){return console.log(e)}));case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(i.a)(t,2),r=n[0],c=n[1],s=function(){c(e)},o=function(e){var t=e.target;c(Object(u.a)(Object(u.a)({},r),{},Object(E.a)({},t.name,t.value)))},l=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,a,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,a=n.files[0],e.next=4,S(a);case 4:return s=e.sent,e.next=7,c(Object(u.a)(Object(u.a)({},r),{},Object(E.a)({},n.name,s)));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{values:r,setValues:c,handleInputChange:o,handleFileChange:l,resetForm:s}},D=function(){var e=T({}),t=e.values,n=e.handleInputChange,c=t.email,s=t.password,i=Object(a.useContext)(o).dispatch,u=function(){var e=Object(x.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,N(c,s);case 3:n=e.sent,i({type:l.login,payload:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("section",{className:"login",children:[Object(r.jsxs)("form",{onSubmit:u,children:[Object(r.jsx)("label",{children:"Email"}),Object(r.jsx)("input",{type:"email",onChange:n,placeholder:"Tu email",name:"email"}),Object(r.jsx)("label",{children:"Contrase\xf1a"}),Object(r.jsx)("input",{type:"password",onChange:n,placeholder:"Contrase\xf1a",name:"password"}),Object(r.jsx)("button",{type:"submit",className:"my-btn mini",children:"Entrar"})]}),Object(r.jsxs)("small",{children:["\xbfNo tienes cuenta? Crea una ",Object(r.jsx)(f.b,{to:"/registro",children:"aqu\xed"})," "]})]})})},I=function(){var e=T({}),t=e.values,n=e.handleInputChange,c=t.name,s=t.email,i=t.password,u=t.password2,d=Object(a.useContext)(o).dispatch,j=function(){var e=Object(x.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),i!==u){e.next=8;break}return e.next=4,C(c,s,i);case 4:n=e.sent,d({type:l.signup,payload:n}),e.next=9;break;case 8:w.a.fire("Error","Las contrase\xf1as deben coincidir","error");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("section",{className:"login",children:[Object(r.jsxs)("form",{onSubmit:j,children:[Object(r.jsx)("label",{children:"Nombre"}),Object(r.jsx)("input",{type:"text",onChange:n,placeholder:"Tu nombre",name:"name"}),Object(r.jsx)("label",{children:"Email"}),Object(r.jsx)("input",{type:"email",onChange:n,placeholder:"Tu email",name:"email"}),Object(r.jsx)("label",{children:"Contrase\xf1a"}),Object(r.jsx)("input",{type:"password",onChange:n,placeholder:"Contrase\xf1a",name:"password"}),Object(r.jsx)("label",{children:"Repite Contrase\xf1a"}),Object(r.jsx)("input",{type:"password",onChange:n,placeholder:"Repite Contrase\xf1a",name:"password2"}),Object(r.jsx)("button",{type:"submit",className:"my-btn mini",children:"Registro"})]}),Object(r.jsxs)("small",{children:["\xbfYa est\xe1s registrado? Entra ",Object(r.jsx)(f.b,{to:"/",children:"aqu\xed"})," "]})]})})},B=n(30),_=function(e){var t=e.nameValue,n=e.deleteField,c=e.inputType,s=e.editLabel,o=e.editAction,u=e.editValue,l=e.submitEdit,d=e.imageEdit,j=void 0!==d&&d,b=Object(a.useState)(!1),p=Object(i.a)(b,2),f=p[0],O=p[1],m=function(){return O(!1)},h=function(){return O(!0)};return Object(r.jsxs)(r.Fragment,{children:[u?Object(r.jsxs)("div",{className:"edit-group",children:[j?Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{children:[s,": "]}),Object(r.jsx)("figure",{children:Object(r.jsx)("img",{src:u,alt:t})})]}):Object(r.jsxs)("p",{children:[s,": ",Object(r.jsx)("strong",{children:u})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return n(t)},children:"Borrar"}),Object(r.jsx)("button",{className:"my-btn mini",onClick:h,children:"Editar"})]})]}):Object(r.jsxs)("div",{className:"edit-group",children:[Object(r.jsxs)("p",{children:[s,": ",Object(r.jsx)("small",{children:"Sin datos"})]}),Object(r.jsx)("button",{className:"my-btn mini",onClick:h,children:"A\xf1adir"})]}),Object(r.jsxs)(B.a,{className:"edit-modal my-modals",show:f,onHide:m,children:[Object(r.jsx)(B.a.Header,{children:Object(r.jsx)(B.a.Title,{children:u})}),Object(r.jsx)(B.a.Body,{children:Object(r.jsxs)("form",{className:"edit-form",onSubmit:l,children:[Object(r.jsx)("input",{name:t,type:c,onChange:o,placeholder:u}),Object(r.jsx)("button",{className:"my-btn",type:"submit",onClick:m,children:"Guardar"})]})}),Object(r.jsx)(B.a.Footer,{children:Object(r.jsx)("button",{className:"my-btn",onClick:m,children:"cerrar"})})]})]})},L=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("companies/",t,"POST");case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(r=e.sent).ok){e.next=9;break}return a=r.company,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(x.a)(h.a.mark((function e(t,n){var r,a,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("companies/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).ok){e.next=12;break}return c=a.company,w.a.fire("\xa1Chachi!","Los cambios han sido guardados","success"),e.abrupt("return",c);case 12:s=a.error,w.a.fire("Error",s,"error");case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("companies/".concat(t),{},"DELETE");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=(0,n(1).createContext)(),A=function(){var e=Object(a.useContext)(V),t=e.company,n=e.dispatchCompany,c=t.name,s=t.phone,i=t.address,o=t._id,d=t.mainEmail,j=t.mainLogo,b=t.secondaryLogo,p=t.linkedin,f=t.facebook,O=t.twitter,m=t.instagram,v=T(t),g=v.values,y=v.setValues,k=v.handleInputChange,N=v.handleFileChange,C=function(){var e=Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(o);case 2:n({type:l.companyDelete});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(x.a)(h.a.mark((function e(t){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object(u.a)(Object(u.a)({},g),{},Object(E.a)({},t,"")),y(Object(u.a)(Object(u.a)({},g),{},Object(E.a)({},t,""))),n({type:l.updateCompany,payload:r});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){e.preventDefault(),n({type:l.updateCompany,payload:g})},I=function(){var e=Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(o,t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h1",{children:"Datos de empresa"}),Object(r.jsx)("button",{className:"my-btn mini",onClick:I,children:"Guardar Cambios"}),Object(r.jsx)("button",{className:"my-btn secondary mini",onClick:function(){w.a.fire({title:"\xbfSeguro?",text:"Si borras esto, no habr\xe1 datos de empresa",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\xa1Borrar Empresa!",cancelButtonText:"\xa1Uy, no!"}).then((function(e){e.isConfirmed&&(C(),w.a.fire("\xa1Empresa borrada!","Esta empresa se march\xf3 para no volver","success"))}))},children:"Borrar esta empresa"}),Object(r.jsxs)("div",{className:"editing",children:[Object(r.jsx)(_,{deleteField:S,nameValue:"name",inputType:"text",editLabel:"Nombre de empresa",editAction:k,editValue:c,submitEdit:D}),Object(r.jsx)(_,{deleteField:S,nameValue:"address",inputType:"text",editLabel:"Direcci\xf3n",editAction:k,editValue:i,submitEdit:D}),Object(r.jsx)(_,{deleteField:S,nameValue:"phone",inputType:"text",editLabel:"Tel\xe9fono principal",editAction:k,editValue:s,submitEdit:D}),Object(r.jsx)(_,{deleteField:S,nameValue:"mainEmail",inputType:"email",editLabel:"Email principal",editAction:k,editValue:d,submitEdit:D}),Object(r.jsx)(_,{deleteField:S,nameValue:"mainLogo",imageEdit:!0,inputType:"file",editLabel:"Logo Principal",editAction:N,editValue:j,submitEdit:D}),Object(r.jsx)(_,{deleteField:S,nameValue:"secondaryLogo",imageEdit:!0,inputType:"file",editLabel:"Logo BN",editAction:N,editValue:b,submitEdit:D}),Object(r.jsx)(_,{deleteField:S,nameValue:"twitter",inputType:"text",editLabel:"Twitter Url",editAction:k,editValue:O,submitEdit:D}),Object(r.jsx)(_,{deleteField:S,nameValue:"facebook",inputType:"text",editLabel:"Facebook url",editAction:k,editValue:f,submitEdit:D}),Object(r.jsx)(_,{deleteField:S,nameValue:"instagram",inputType:"text",editLabel:"Instagram Url",editAction:k,editValue:m,submitEdit:D}),Object(r.jsx)(_,{deleteField:S,nameValue:"linkedin",inputType:"text",editLabel:"Linkedin Url",editAction:k,editValue:p,submitEdit:D})]})]})},R=function(){var e=T({}),t=e.values,n=e.handleInputChange,a=e.handleFileChange,c=function(){var e=Object(x.a)(h.a.mark((function e(n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,L(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("form",{className:"add-form",onSubmit:c,children:[Object(r.jsx)("input",{type:"text",name:"name",placeholder:"Nombre de la empresa",onChange:n}),Object(r.jsx)("input",{type:"email",name:"mainEmail",placeholder:"Correo Principal",onChange:n}),Object(r.jsx)("input",{type:"text",name:"phone",placeholder:"Tel\xe9fono principal",onChange:n}),Object(r.jsx)("input",{type:"text",name:"address",placeholder:"Direcci\xf3n",onChange:n}),Object(r.jsx)("input",{type:"text",name:"linkedin",placeholder:"URL Linkedin",onChange:n}),Object(r.jsx)("input",{type:"text",name:"facebook",placeholder:"URL Facebook",onChange:n}),Object(r.jsx)("input",{type:"text",name:"instagram",placeholder:"URL Instagram",onChange:n}),Object(r.jsx)("input",{type:"text",name:"twitter",placeholder:"URL Twitter",onChange:n}),Object(r.jsxs)("div",{className:"input-images",children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"mainLogo",children:"Logo principal"}),Object(r.jsx)("input",{type:"file",className:"file-input",name:"mainLogo",id:"mainLogo",placeholder:"Logo Principal",onChange:a})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"secondaryLogo",children:"Logo en BN"}),Object(r.jsx)("input",{type:"file",className:"file-input",name:"secondaryLogo",id:"secondaryLogo",placeholder:"Logo Secundario",onChange:a})]})]}),Object(r.jsx)("button",{className:"my-btn mini",type:"submit",children:"Crear empresa"})]})})},U=function(){var e=Object(a.useRef)(!0),t=Object(a.useContext)(V).company;return Object(a.useEffect)((function(){return function(){e.current=!1}}),[]),Object(r.jsx)(r.Fragment,{children:t._id?Object(r.jsx)(A,{}):Object(r.jsx)(R,{})})},G=function(){var e=Object(a.useContext)(o).user;return Object(r.jsx)("div",{children:Object(r.jsxs)("h1",{children:["\xa1Bienvenid@ ",e.name,"!"]})})},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.getCompany:case l.addCompnany:case l.companyUpdate:case l.deleteProperty:return Object(u.a)({},t.payload);case l.maquinasCategoriesUpdate:return Object(u.a)(Object(u.a)({},e),{},{maquinasCategories:t.payload});case l.companyDelete:return{};default:return e}},H=function(){var e=Object(a.useContext)(o).dispatch,t=function(){var t=Object(x.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({type:l.logout});case 2:localStorage.removeItem("bratic-token"),localStorage.removeItem("bratic-user");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("nav",{className:"dash-nav",children:[Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:Object(r.jsx)(f.b,{to:"/bratic",children:Object(r.jsx)("figure",{children:Object(r.jsx)("img",{src:"https://res.cloudinary.com/bratic-app/image/upload/v1609866461/logoBN_ujpbti.svg",alt:""})})})}),Object(r.jsx)("li",{children:Object(r.jsx)(f.b,{to:"/bratic/empresa",children:"Datos de empresa"})}),Object(r.jsx)("li",{children:Object(r.jsx)(f.b,{to:"/bratic/blog",children:"Blog"})})]}),Object(r.jsxs)("div",{className:"btn-group",children:[Object(r.jsx)("small",{children:"Made with \u2665 by Yai"}),Object(r.jsx)("small",{children:"\xa9 Bratic S.L."}),Object(r.jsx)("button",{className:"my-btn secondary mini",onClick:t,children:"Cerrar Sesi\xf3n"})]})]})})},J=function(){return Object(r.jsx)("nav",{className:"login-nav",children:Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)("figure",{children:Object(r.jsx)("img",{src:"https://res.cloudinary.com/bratic-app/image/upload/v1609866461/logoBN_ujpbti.svg",alt:""})}),Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:Object(r.jsx)(f.b,{to:"/",children:"Entrar"})}),Object(r.jsx)("li",{children:Object(r.jsx)(f.b,{to:"/registro",children:"Registro"})})]})]})})},M=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("posts/".concat(t),"GET");case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(r=e.sent).ok){e.next=9;break}return a=r.posts,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("posts/post/".concat(t),"GET");case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(r=e.sent).ok){e.next=9;break}return a=r.post,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("posts/",t,"POST");case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(r=e.sent).ok){e.next=9;break}return a=r.post,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(x.a)(h.a.mark((function e(t,n){var r,a,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("posts/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).ok){e.next=12;break}return c=a.post,w.a.fire("\xa1Chachi!","Los cambios han sido guardados","success"),e.abrupt("return",c);case 12:s=a.error,w.a.fire("Error",s,"error");case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),K=function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("posts/".concat(t),{},"DELETE");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=n(24),X=function(e){var t=e.askIfDelete,n=e.post,c=Object(a.useState)(),s=Object(i.a)(c,2),o=s[0],u=s[1];return Object(a.useEffect)((function(){u(new Date(n.createdAt).toLocaleString())}),[o,u,n]),Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("article",{className:"each-post-prev",children:[Object(r.jsxs)("div",{className:"info",children:[Object(r.jsx)("h6",{children:n.title}),o&&Object(r.jsx)("small",{children:o})]}),Object(r.jsxs)("div",{className:"btn-group",children:[Object(r.jsx)("button",{className:"my-btn mini third",onClick:function(){return t(n._id)},children:"Borrar"}),Object(r.jsx)(W.Link,{className:"my-btn mini secondary",to:"/bratic/blog/editar-entrada/".concat(n._id),children:"Editar"}),Object(r.jsx)(W.Link,{className:"my-btn mini ",to:"/bratic/blog/".concat(n._id),children:"Ver"})]})]})})},Z=function(){var e=Object(O.useHistory)(),t=Object(a.useRef)(!0),n=Object(a.useState)(),c=Object(i.a)(n,2),s=c[0],u=c[1],l=Object(a.useContext)(o).user,d=function(){var e=Object(x.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(l.id);case 2:t=e.sent,u(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){return function(){t.current=!1}}),[]),Object(a.useEffect)((function(){return t.current&&d(),function(){t.current=!1}}));var j=function(){var t=Object(x.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y({title:"Entrada Sin T\xedtulo",author:l.id});case 2:n=t.sent,e.push("/bratic/blog/nueva-entrada/".concat(n._id));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),b=function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t);case 2:return e.next=4,d();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(e){w.a.fire({title:"\xbfSeguro?",text:"Si borras esto, la entrada desaparece",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\xa1Borrar Entrada!",cancelButtonText:"\xa1Uy, no!"}).then((function(t){t.isConfirmed&&b(e)}))};return Object(r.jsxs)("div",{id:"posts-screen",children:[Object(r.jsx)("h2",{children:"Entradas del Blog"}),Object(r.jsx)("button",{onClick:j,children:"A\xf1adir entrada del blog"}),(null===s||void 0===s?void 0:s.length)>0?Object(r.jsx)("section",{className:"all-posts",children:null===s||void 0===s?void 0:s.map((function(e){return Object(r.jsx)(X,{askIfDelete:p,post:e},e._id)}))}):Object(r.jsx)("article",{className:"empty-posts",children:"No tienes entradas del blog"})]})},$=n(84),ee=n(218),te=n(215),ne=n(216),re=n(219),ae=n(217);ee.a.use([te.a,ne.a]);var ce=function(){var e,t=Object(a.useRef)(!0),n=Object(O.useParams)().postID,c=Object(W.useHistory)(),s=Object(a.useState)(),o=Object(i.a)(s,2),u=o[0],l=o[1],d=Object(a.useState)(),j=Object(i.a)(d,2),b=j[0],p=j[1],m=Object(a.useState)([]),v=Object(i.a)(m,2),g=(v[0],v[1]),y=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t);case 2:for(c in n=e.sent,r=n.content,a=[],r)r[c].forEach((function(e){return a.push(e)}));a.sort((function(e,t){return e.order-t.order})),g(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(x.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(n);case 2:t=e.sent,l(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){return t.current&&(k(),y(n)),function(){t.current=!1}})),Object(a.useEffect)((function(){p(null===u||void 0===u?void 0:u.content.gallery.map((function(e){return e.gallery.map((function(e){return{src:e,thumbnail:N(e),w:1200,h:900}}))})))}),[u]);var N=function(e){var t=e.split("upload/");return"".concat(t[0]).concat("upload/w_200/").concat(t[1])},C=function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t);case 2:c.push("/bratic/blog");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("section",{id:"post-preview",children:[Object(r.jsxs)("div",{className:"btn-group",children:[Object(r.jsx)("button",{className:"my-btn mini third",onClick:function(){return e=null===u||void 0===u?void 0:u._id,void w.a.fire({title:"\xbfSeguro?",text:"Si borras esto, la entrada desaparece",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\xa1Borrar Entrada!",cancelButtonText:"\xa1Uy, no!"}).then((function(t){t.isConfirmed&&C(e)}));var e},children:"Borrar"}),Object(r.jsx)(f.b,{className:"my-btn mini secondary",to:"/bratic/blog/editar-entrada/".concat(null===u||void 0===u?void 0:u._id),children:"Editar"}),Object(r.jsx)(f.b,{className:"my-btn mini thirsd",to:"/bratic/blog/",children:"Volver al blog"})]}),Object(r.jsx)("h1",{children:null===u||void 0===u?void 0:u.title}),(null===u||void 0===u?void 0:u.subtitle)&&Object(r.jsx)("h2",{children:null===u||void 0===u?void 0:u.subtitle}),(null===u||void 0===u?void 0:u.createdAt)&&Object(r.jsx)("small",{className:"date",children:null===u||void 0===u?void 0:u.createdAt}),(null===u||void 0===u?void 0:u.content.image.length)>0&&Object(r.jsx)("figure",{className:"main-image",children:Object(r.jsx)("img",{src:null===u||void 0===u?void 0:u.content.image[0].image,alt:""},null===u||void 0===u?void 0:u.content.image[0]._id)}),Object(r.jsxs)("div",{className:"container",children:[(null===u||void 0===u?void 0:u.content.text.length)>0&&(null===u||void 0===u?void 0:u.content.text.map((function(e,t){return Object(r.jsx)("div",{className:"post-text",dangerouslySetInnerHTML:e.parsedText},e._id)}))),(null===u||void 0===u?void 0:u.content.video.length)>0&&(null===u||void 0===u?void 0:u.content.video.map((function(e,t){return Object(r.jsx)("video",{className:"video-preview",src:e.video,controls:!0,muted:!0})}))),(null===b||void 0===b?void 0:b.length)>0&&Object(r.jsx)($.PhotoSwipeGallery,{items:b,thumbnailContent:function(e){e.map((function(e){return Object(r.jsx)("img",{src:e.thumbnail,alt:""})}))}}),(null===u||void 0===u||null===(e=u.content.slider)||void 0===e?void 0:e.length)>0&&Object(r.jsxs)("div",{className:"preview",children:[Object(r.jsx)("h6",{children:"Slider de fotos"}),null===u||void 0===u?void 0:u.content.slider.map((function(e,t){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(re.a,{spaceBetween:0,autoplay:{delay:2500},slidesPerView:1,pagination:{clickable:!0},children:e.slides.map((function(e,t){return Object(r.jsx)(ae.a,{children:Object(r.jsx)("img",{src:e,alt:""})},t)}))})})}))]})]})]})},se=n(8),ie=function(){var e=Object(x.a)(h.a.mark((function e(t,n){var r,a,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("videos/".concat(n),t,"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).ok){e.next=11;break}return c=a.video,e.abrupt("return",c);case 11:s=a.msg,w.a.fire("\xa1Oh-oh!",s,"error");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),oe=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("videos/".concat(t),{},"DELETE");case 2:return n=e.sent,e.next=5,n.json();case 5:(r=e.sent).ok||(a=r.msg,w.a.fire("\xa1Oh-oh!",a,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(x.a)(h.a.mark((function e(t,n){var r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("videos/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:(a=e.sent).ok||(c=a.msg,w.a.fire("\xa1Oh-oh!",c,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),le=function(){var e=Object(x.a)(h.a.mark((function e(t,n){var r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("videos/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:if((a=e.sent).ok){e.next=11;break}c=a.msg,w.a.fire("\xa1Oh-oh!",c,"error"),e.next=12;break;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),de=function(){var e=Object(x.a)(h.a.mark((function e(t,n){var r,a,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("images/".concat(n),t,"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).ok){e.next=11;break}return c=a.image,e.abrupt("return",c);case 11:s=a.msg,w.a.fire("\xa1Oh-oh!",s,"error");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),je=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("images/".concat(t),{},"DELETE");case 2:return n=e.sent,e.next=5,n.json();case 5:(r=e.sent).ok?w.a.fire("\xa1Bien!","Imagen Borrada","success"):(a=r.msg,w.a.fire("\xa1Oh-oh!",a,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(x.a)(h.a.mark((function e(t,n){var r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("images/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:(a=e.sent).ok||(c=a.msg,w.a.fire("\xa1Oh-oh!",c,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),pe=function(){var e=Object(x.a)(h.a.mark((function e(t,n){var r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("images/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:if((a=e.sent).ok){e.next=11;break}c=a.msg,w.a.fire("\xa1Oh-oh!",c,"error"),e.next=12;break;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),fe=function(){var e=Object(x.a)(h.a.mark((function e(t,n){var r,a,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("texts/".concat(n),t,"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).ok){e.next=11;break}return c=a.text,e.abrupt("return",c);case 11:s=a.msg,w.a.fire("\xa1Oh-oh!",s,"error");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("texts/".concat(t),{},"DELETE");case 2:return n=e.sent,e.next=5,n.json();case 5:(r=e.sent).ok?w.a.fire("\xa1Bien!","Texto borrado","success"):(a=r.msg,w.a.fire("\xa1Oh-oh!",a,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(x.a)(h.a.mark((function e(t,n){var r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("texts/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:(a=e.sent).ok||(c=a.msg,w.a.fire("\xa1Oh-oh!",c,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),he=function(){var e=Object(x.a)(h.a.mark((function e(t,n){var r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("texts/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:if((a=e.sent).ok){e.next=11;break}c=a.msg,w.a.fire("\xa1Oh-oh!",c,"error"),e.next=12;break;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),xe=function(){var e=Object(x.a)(h.a.mark((function e(t,n){var r,a,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("sliders/".concat(n),t,"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).ok){e.next=11;break}return c=a.slider,e.abrupt("return",c);case 11:s=a.msg,w.a.fire("\xa1Oh-oh!",s,"error");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ve=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("sliders/".concat(t),{},"DELETE");case 2:return n=e.sent,e.next=5,n.json();case 5:(r=e.sent).ok||(a=r.msg,w.a.fire("\xa1Oh-oh!",a,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=Object(x.a)(h.a.mark((function e(t,n){var r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("sliders/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:(a=e.sent).ok||(c=a.msg,w.a.fire("\xa1Oh-oh!",c,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ye=function(){var e=Object(x.a)(h.a.mark((function e(t,n){var r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("sliders/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:if((a=e.sent).ok){e.next=11;break}c=a.msg,w.a.fire("\xa1Oh-oh!",c,"error"),e.next=12;break;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ke=function(){var e=Object(x.a)(h.a.mark((function e(t,n){var r,a,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("galleries/".concat(n),t,"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).ok){e.next=11;break}return c=a.gallery,e.abrupt("return",c);case 11:s=a.msg,w.a.fire("\xa1Oh-oh!",s,"error");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),we=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("galleries/".concat(t),{},"DELETE");case 2:return n=e.sent,e.next=5,n.json();case 5:(r=e.sent).ok||(a=r.msg,w.a.fire("\xa1Oh-oh!",a,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(x.a)(h.a.mark((function e(t,n){var r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("galleries/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:(a=e.sent).ok||(c=a.msg,w.a.fire("\xa1Oh-oh!",c,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(x.a)(h.a.mark((function e(t,n){var r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("galleries/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:if((a=e.sent).ok){e.next=11;break}c=a.msg,w.a.fire("\xa1Oh-oh!",c,"error"),e.next=12;break;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ee=n(85),Se=n.n(Ee),Te=(n(211),function e(t){var n=t.setQuill,c=Object(a.useState)(""),s=Object(i.a)(c,2),o=s[0],u=s[1],l=Object(a.useRef)(null);return Object(a.useEffect)((function(){n(o)})),Object(r.jsx)("div",{children:Object(r.jsx)("div",{className:"text-editor",children:Object(r.jsx)(Se.a,{ref:l,modules:{toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{align:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{script:"sub"},{script:"super"}],["link"]]},clipboard:{matchVisual:!1}},formats:e.formats,theme:"snow",value:o,onChange:u})})})});Te.formats=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","align","color","script","background"];var De=Te,Ie=function(e){var t=e.saveElement,n=e.postID,c=e.increment,s=Object(a.useRef)(!0),o=Object(a.useState)(),l=Object(i.a)(o,2),d=l[0],j=l[1],b=T(),p=b.values,f=b.setValues,O=function(){var e=Object(x.a)(h.a.mark((function e(){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe(p,n);case 2:r=e.sent,t("text",r),c();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){return function(){s.current=!1}}),[]),Object(a.useEffect)((function(){s.current&&f(Object(u.a)(Object(u.a)({},p),{},{text:d,parsedText:{__html:d}}))}),[d,f]),Object(r.jsxs)("div",{children:[Object(r.jsx)(De,{setQuill:j}),Object(r.jsx)("button",{className:"my-btn mini",onClick:function(){return O()},children:"A\xf1adir Texto a la entrada"})]})},Be=function(e){var t=e.saveElement,n=e.postID,a=e.increment,c=T(),s=c.values,i=c.handleFileChange,o=function(){var e=Object(x.a)(h.a.mark((function e(){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de({image:s.image},n);case 2:r=e.sent,t("image",r),a();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:"file-group",children:Object(r.jsx)("input",{type:"file",className:"file-input",name:"image",id:"image",onChange:i})}),(null===s||void 0===s?void 0:s.image)&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("img",{className:"unique-image",src:s.image,alt:""}),Object(r.jsx)("button",{className:"my-btn mini",onClick:function(){return o()},children:" A\xf1adir Imagen a la Entrada"})]})]})},_e=n(48),Le=function(e){var t=e.saveElement,n=e.postID,c=e.increment,s=Object(a.useState)(),o=Object(i.a)(s,2),u=o[0],l=o[1],d=Object(a.useState)([]),j=Object(i.a)(d,2),b=j[0],p=j[1],f=Object(a.useState)(!1),O=Object(i.a)(f,2),m=O[0],v=O[1],g=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,r=n.files[0],e.next=4,S(r);case 4:a=e.sent,v(!0),l(a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(x.a)(h.a.mark((function e(){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke({gallery:b},n);case 2:r=e.sent,t("gallery",r),c();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("section",{id:"add-gallery",children:[Object(r.jsxs)("div",{className:"file-group",children:[Object(r.jsx)("input",{className:"file-input",type:"file",onChange:g,placeholder:"A\xf1adir Foto",name:"gallery"}),m&&Object(r.jsx)("button",{onClick:function(e){e.preventDefault(),0===b.length?p([u]):(null===b||void 0===b?void 0:b.includes(u))||p([].concat(Object(se.a)(b),[u])),v(!1)},className:"my-btn mini third",children:"A\xf1adir Imagen"})]}),Object(r.jsx)("div",{className:"gallery",children:null===b||void 0===b?void 0:b.map((function(e,t){return Object(r.jsxs)("figure",{className:"each-picture",children:[Object(r.jsx)("img",{src:e,alt:""}),Object(r.jsx)(_e.a,{className:"close-icon",onClick:function(){return function(e){var t=Object(se.a)(b);t.splice(e,1),p(t)}(t)},icon:"times-circle"})]},t)}))}),b.length>0&&Object(r.jsx)("button",{className:"my-btn mini",onClick:function(){return y()},children:" A\xf1adir Galer\xeda a la entrada "})]})},Pe=function(e){var t=e.saveElement,n=e.postID,a=e.increment,c=T(),s=c.values,i=c.handleFileChange,o=function(){var e=Object(x.a)(h.a.mark((function e(){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie({video:s.video},n);case 2:r=e.sent,t("video",r),a();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("section",{id:"add-video",children:[Object(r.jsx)("div",{className:"file-group",children:Object(r.jsx)("input",{type:"file",className:"file-input",name:"video",id:"video",onChange:i})}),s.video&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("figure",{className:"video-preview",children:Object(r.jsx)("video",{className:"video-preview",src:s.video,controls:!0,muted:!0})}),Object(r.jsx)("button",{className:"my-btn mini",onClick:function(){return o()},children:" A\xf1adir V\xeddeo a la entrada "})]})]})},Fe=function(e){var t=e.saveElement,n=e.postID,c=e.increment,s=Object(a.useState)(),o=Object(i.a)(s,2),u=o[0],l=o[1],d=Object(a.useState)([]),j=Object(i.a)(d,2),b=j[0],p=j[1],f=Object(a.useState)(!1),O=Object(i.a)(f,2),m=O[0],v=O[1],g=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,r=n.files[0],e.next=4,S(r);case 4:a=e.sent,v(!0),l(a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(x.a)(h.a.mark((function e(){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe({slides:b},n);case 2:r=e.sent,t("slider",r),c();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)("section",{id:"add-slider",children:[Object(r.jsxs)("div",{className:"file-group",children:[Object(r.jsx)("input",{className:"file-input",type:"file",onChange:g,name:"slider"}),m&&Object(r.jsx)("button",{onClick:function(e){e.preventDefault(),0===b.length?p([u]):(null===b||void 0===b?void 0:b.includes(u))||p([].concat(Object(se.a)(b),[u])),v(!1)},className:"my-btn mini third",children:" A\xf1adir Imagen al Slider "})]}),Object(r.jsx)("div",{className:"slider-gallery",children:null===b||void 0===b?void 0:b.map((function(e,t){return Object(r.jsxs)("figure",{className:"each-picture",children:[Object(r.jsx)("img",{src:e,alt:""}),Object(r.jsx)(_e.a,{className:"close-icon",onClick:function(){return function(e){var t=Object(se.a)(b);t.splice(e,1),p(t)}(t)},icon:"times-circle"})]},t)}))}),b.length>0&&Object(r.jsx)("button",{className:"my-btn mini",onClick:function(){return y()},children:"A\xf1adir Slider a la Entrada "})]})},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Object(a.useState)(e),n=Object(i.a)(t,2),r=n[0],c=n[1],s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;c(r+e)},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;c(r-e)},u=function(){c(e)};return{counter:r,increment:s,decrement:o,reset:u,setCounter:c}},Ae=function(e){var t=e.content,n=e.dragOver,c=e.dragStart,s=(e.decrement,Object(a.useState)(t)),o=Object(i.a)(s,2),u=o[0],l=o[1],d=function(e){var t=u.filter((function(t){return t._id!==e}));l(t)},j=function(){var e=Object(x.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="text"===e.t0?3:"image"===e.t0?7:"video"===e.t0?11:"slider"===e.t0?15:"gallery"===e.t0?19:23;break;case 3:return e.next=5,Oe(n);case 5:return d(n),e.abrupt("break",24);case 7:return e.next=9,je(n);case 9:return d(n),e.abrupt("break",24);case 11:return e.next=13,oe(n);case 13:return d(n),e.abrupt("break",24);case 15:return e.next=17,ve(n);case 17:return d(n),e.abrupt("break",24);case 19:return e.next=21,we(n);case 21:return d(n),e.abrupt("break",24);case 23:return e.abrupt("break",24);case 24:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(r.jsx)(r.Fragment,{children:u.length>0&&u.map((function(e){return function(e,t){switch(e){case"texto":return Object(r.jsxs)("div",{posttype:"text",className:"preview post-text",id:t._id,onDragStart:c,onDragOver:n,draggable:"true",children:[Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:"Tipo de contenido:"})," Texto"]}),t.order&&Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(r.jsx)("hr",{}),Object(r.jsx)("div",{dangerouslySetInnerHTML:t.parsedText}),Object(r.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return j("text",t._id)},children:"Borrar"})]},t._id);case"imagen":return Object(r.jsxs)("div",{posttype:"imagen",className:"preview post-simple-image",id:t._id,onDragStart:c,onDragOver:n,draggable:"true",children:[Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:"Tipo de contenido:"})," Imagen simple"]}),t.order&&Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(r.jsx)("hr",{}),Object(r.jsx)("img",{draggable:"false",className:"unique-image",src:t.image,alt:""}),Object(r.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return j("image",t._id)},children:"Borrar"})]},t._id);case"video":return Object(r.jsxs)("div",{posttype:"video",className:"preview post-video",id:t._id,onDragStart:c,onDragOver:n,draggable:"true",children:[Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:"Tipo de contenido:"})," V\xeddeo"]}),t.order&&Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(r.jsx)("hr",{}),Object(r.jsx)("video",{draggable:"false",className:"video-preview",src:t.video,controls:!0,muted:!0}),Object(r.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return j("video",t._id)},children:"Borrar"})]},t._id);case"slider":return Object(r.jsxs)("div",{posttype:"slider",className:"preview post-slider",onDragStart:c,onDragOver:n,draggable:"true",children:[Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:"Tipo de contenido:"})," Slider"]}),t.order&&Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(r.jsx)("hr",{}),Object(r.jsx)("div",{className:"gallery",children:t.slides.map((function(e,t){return Object(r.jsx)("figure",{draggable:"false",className:"each-picture",children:Object(r.jsx)("img",{draggable:"false",src:e,alt:""})},t)}))}),Object(r.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return j("slider",t._id)},children:"Borrar"})]},t._id);case"galeria":return Object(r.jsxs)("div",{posttype:"galeria",className:"preview post-gallery",id:t._id,onDragStart:c,onDragOver:n,draggable:"true",children:[Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:"GTipo de contenido:"})," aler\xeda"]}),t.order&&Object(r.jsxs)("p",{children:[Object(r.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(r.jsx)("hr",{}),">",Object(r.jsx)("div",{className:"gallery",children:t.gallery.map((function(e,t){return Object(r.jsx)("figure",{draggable:"false",className:"each-picture",children:Object(r.jsx)("img",{draggable:"false",src:e,alt:""})},t)}))}),Object(r.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return j("gallery",t._id)},children:"Borrar"})]},t._id)}}(e.postType,e)}))})},Re=function(e){var t=e.postState,n=e.savePostState;return Object(r.jsxs)("select",{onChange:function(e){var t=e.target;n(t.value)},children:[Object(r.jsxs)("option",{value:"default",defaultValue:!0,children:[" ",t||"Cambiar Estado de la publicaci\xf3n..."," "]}),"borrador"!==t&&Object(r.jsx)("option",{value:"borrador",children:"Borrador"}),"publicado"!==t&&Object(r.jsx)("option",{value:"publicado",children:"Publicada"})]})},Ue=function(){var e=Object(O.useHistory)(),t=Ve(1),n=t.counter,c=t.increment,s=t.decrement,o=Object(W.useParams)(),l=Object(a.useState)(),d=Object(i.a)(l,2),j=d[0],b=d[1],p=Object(a.useRef)(),f=Object(a.useState)("default"),m=Object(i.a)(f,2),v=m[0],g=m[1],y=T(),k=y.values,w=y.handleInputChange,N=Object(a.useState)([]),C=Object(i.a)(N,2),E=C[0],S=C[1],D=Object(a.useState)({title:"Sin t\xedtulo",subtitle:"",content:{slider:[],image:[],text:[],video:[],gallery:[]}}),I=Object(i.a)(D,2),B=I[0],_=I[1],L=function(){var e=Object(x.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t);case 2:n=e.sent,_(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var t=Object(x.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K(n);case 2:e.goBack();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),F=function(){var t=Object(x.a)(h.a.mark((function t(n,r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z(n,r);case 2:e.goBack();case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();Object(a.useEffect)((function(){b(o.postID),L(o.postID)}),[o.postID]);var V=function(){p.current.selectedIndex=0,g("default")},A=function(e,t){switch(e){case"text":if(B.content.text.length>0){var n=[].concat(Object(se.a)(B.content.text),[t]);_(Object(u.a)(Object(u.a)({},B),{},{content:Object(u.a)(Object(u.a)({},B.content),{},{text:n})})),S((function(e){return[].concat(Object(se.a)(e),[t])})),V()}else{var r=[t];_(Object(u.a)(Object(u.a)({},B),{},{content:Object(u.a)(Object(u.a)({},B.content),{},{text:r})})),S((function(e){return[].concat(Object(se.a)(e),[t])})),V()}break;case"image":if(B.content.image.length>0){var a=[].concat(Object(se.a)(B.content.image),[t]);_(Object(u.a)(Object(u.a)({},B),{},{content:Object(u.a)(Object(u.a)({},B.content),{},{image:a})})),S((function(e){return[].concat(Object(se.a)(e),[t])})),V()}else{var c=[t];_(Object(u.a)(Object(u.a)({},B),{},{content:Object(u.a)(Object(u.a)({},B.content),{},{image:c})})),S((function(e){return[].concat(Object(se.a)(e),[t])})),V()}break;case"gallery":if(B.content.gallery.length>0){var s=[].concat(Object(se.a)(B.content.gallery),[t]);_(Object(u.a)(Object(u.a)({},B),{},{content:Object(u.a)(Object(u.a)({},B.content),{},{gallery:s})})),S((function(e){return[].concat(Object(se.a)(e),[t])})),V()}else{var i=[t];_(Object(u.a)(Object(u.a)({},B),{},{content:Object(u.a)(Object(u.a)({},B.content),{},{gallery:i})})),S((function(e){return[].concat(Object(se.a)(e),[t])})),V()}break;case"video":if(B.content.video.length>0){var o=[].concat(Object(se.a)(B.content.video),[t]);_(Object(u.a)(Object(u.a)({},B),{},{content:Object(u.a)(Object(u.a)({},B.content),{},{video:o})})),S((function(e){return[].concat(Object(se.a)(e),[t])})),V()}else{var l=[t];_(Object(u.a)(Object(u.a)({},B),{},{content:Object(u.a)(Object(u.a)({},B.content),{},{video:l})})),S((function(e){return[].concat(Object(se.a)(e),[t])})),V()}break;case"slider":if(B.content.slider.length>0){var d=[].concat(Object(se.a)(B.content.slider),[t]);_(Object(u.a)(Object(u.a)({},B),{},{content:Object(u.a)(Object(u.a)({},B.content),{},{slider:d})})),S((function(e){return[].concat(Object(se.a)(e),[t])})),V()}else{var j=[t];_(Object(u.a)(Object(u.a)({},B),{},{content:Object(u.a)(Object(u.a)({},B.content),{},{slider:j})})),S((function(e){return[].concat(Object(se.a)(e),[t])})),V()}}},R=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,r,a,c,s,i,o,u,l,d,j;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=t.dataTransfer.getData("card_id"),r=document.getElementById(n),a=t.dataTransfer.getData("card_type"),r.style.display="block",r.className="preview",t.target.appendChild(r),c=r.parentElement.id,s=[],i=[],e.t0=a,e.next="text"===e.t0?13:"imagen"===e.t0?22:"gallery"===e.t0?31:"video"===e.t0?40:"slider"===e.t0?49:58;break;case 13:return e.next=15,me(n,{order:c});case 15:return e.next=17,he(n,{order:c});case 17:return o=e.sent,s=E.filter((function(e){return e._id!==n})),i=[].concat(Object(se.a)(s),[o.text]).sort((function(e,t){return e.order-t.order})),S(i),e.abrupt("break",59);case 22:return e.next=24,be(n,{order:c});case 24:return e.next=26,pe(n,{order:c});case 26:return u=e.sent,s=E.filter((function(e){return e._id!==n})),i=[].concat(Object(se.a)(s),[u.image]).sort((function(e,t){return e.order-t.order})),S(i),e.abrupt("break",59);case 31:return e.next=33,Ne(n,{order:c});case 33:return e.next=35,Ce(n,{order:c});case 35:return l=e.sent,s=E.filter((function(e){return e._id!==n})),i=[].concat(Object(se.a)(s),[l.gallery]).sort((function(e,t){return e.order-t.order})),S(i),e.abrupt("break",59);case 40:return e.next=42,ue(n,{order:c});case 42:return e.next=44,le(n,{order:c});case 44:return d=e.sent,s=E.filter((function(e){return e._id!==n})),i=[].concat(Object(se.a)(s),[d.video]).sort((function(e,t){return e.order-t.order})),S(i),e.abrupt("break",59);case 49:return e.next=51,ge(n,{order:c});case 51:return e.next=53,ye(n,{order:c});case 53:return j=e.sent,s=E.filter((function(e){return e._id!==n})),i=[].concat(Object(se.a)(s),[j.slider]).sort((function(e,t){return e.order-t.order})),S(i),e.abrupt("break",59);case 58:return e.abrupt("break",59);case 59:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e){e.preventDefault()};return Object(r.jsxs)("section",{id:"add-posts-screen",children:[Object(r.jsxs)("article",{className:"post-btn-group",children:[Object(r.jsx)("p",{children:"\xbfQu\xe9 hacemos con \xe9ste post?"}),Object(r.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return P(j)},children:"Borrar Entrada"}),Object(r.jsx)("button",{className:"my-btn mini third",onClick:function(){return F(j,B)},children:"Guardar Entrada"}),Object(r.jsx)("button",{className:"my-btn mini",onClick:function(){e.goBack()},children:"Salir"})]}),Object(r.jsxs)("section",{className:"edit-post",children:[Object(r.jsxs)("div",{className:"edit-area",children:[Object(r.jsx)(Re,{savePostState:function(e){_(Object(u.a)(Object(u.a)({},B),{},{status:e}))},postState:B.status}),Object(r.jsx)("article",{className:"title-area",children:Object(r.jsxs)("form",{className:"form-title",onSubmit:function(e){e.preventDefault(),_(Object(u.a)(Object(u.a)({},B),{},{title:k.title,subtitle:k.subtitle}))},children:[Object(r.jsx)("label",{htmlFor:"title",children:"T\xedtulo de la Entrada"}),Object(r.jsx)("input",{id:"title",type:"text",name:"title",onChange:w,placeholder:B.title}),Object(r.jsx)("label",{htmlFor:"subtitle",children:"Subt\xedtulo de la Entrada"}),Object(r.jsx)("input",{id:"subtitle",type:"text",name:"subtitle",placeholder:B.subtitle,onChange:w}),Object(r.jsx)("button",{className:"my-btn mini secondary",type:"submit",children:"Guardar t\xedtulos"})]})}),Object(r.jsxs)("select",{ref:p,onChange:function(e){switch(e.target.value){case"text":g("text");break;case"image":g("image");break;case"gallery":g("gallery");break;case"video":g("video");break;case"slider":g("slider");break;default:g("default")}},name:"content",placeholder:"A\xf1adir...",children:[Object(r.jsx)("option",{value:"default",defaultValue:!0,children:" A\xf1adir... "}),Object(r.jsx)("option",{value:"text",children:"Texto"}),Object(r.jsx)("option",{value:"image",children:"Imagen \xfanica"}),Object(r.jsx)("option",{value:"gallery",children:"Galer\xeda de im\xe1genes"}),Object(r.jsx)("option",{value:"slider",children:"Slider"}),Object(r.jsx)("option",{value:"video",children:"V\xeddeo"})]}),Object(r.jsxs)("article",{className:"add-post",children:["default"===v&&Object(r.jsx)("p",{children:"A\xf1adir elemento al post"}),"text"===v&&Object(r.jsx)(Ie,{saveElement:A,postID:j,increment:c}),"image"===v&&Object(r.jsx)(Be,{saveElement:A,postID:j,increment:c}),"gallery"===v&&Object(r.jsx)(Le,{saveElement:A,postID:j,increment:c}),"video"===v&&Object(r.jsx)(Pe,{saveElement:A,postID:j,increment:c}),"slider"===v&&Object(r.jsx)(Fe,{saveElement:A,postID:j,increment:c})]}),Object(r.jsxs)("article",{className:"content-to-order",children:[Object(r.jsx)("h6",{children:"Contenido generado para ordenar"}),E.length>0&&Object(r.jsx)(Ae,{content:E,dragStart:function(e){var t=e.target;e.dataTransfer.setData("card_id",t.id),e.dataTransfer.setData("card_type",t.attributes.posttype.value),setTimeout((function(){t.style.display="none",t.className="preview"}),0)},dragOver:function(e){e.stopPropagation()},decrement:s})]})]}),Object(r.jsxs)("div",{className:"view-area",children:[B.title&&Object(r.jsx)("h1",{children:B.title}),B.subtitle&&Object(r.jsx)("h2",{children:B.subtitle}),Object(r.jsx)("h6",{children:"Orden de aparicion de los elementos"}),Object(se.a)(Array(n)).map((function(e,t){return 0!==t&&Object(r.jsx)("div",{onDrop:R,onDragOver:U,id:t,className:"receiving-container",children:Object(r.jsx)("p",{className:"container-number",children:t})},"contenedor-".concat(t))}))]})]})]})},Ge=function(){var e=Object(O.useHistory)(),t=Ve(1),n=t.counter,c=t.increment,s=t.decrement,o=t.setCounter,l=Object(W.useParams)(),d=Object(a.useState)(),j=Object(i.a)(d,2),b=j[0],p=j[1],f=Object(a.useRef)(),m=Object(a.useState)("default"),v=Object(i.a)(m,2),g=v[0],y=v[1],k=T(),w=k.values,N=k.handleInputChange,C=Object(a.useState)([]),E=Object(i.a)(C,2),S=E[0],D=E[1],I=Object(a.useState)({title:"Sin t\xedtulo",subtitle:"",content:{slider:[],image:[],text:[],video:[],gallery:[]}}),B=Object(i.a)(I,2),_=B[0],L=B[1],P=function(){var e=Object(x.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t);case 2:n=e.sent,L(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var t=Object(x.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K(n);case 2:e.goBack();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),V=function(){var t=Object(x.a)(h.a.mark((function t(n,r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z(n,r);case 2:e.goBack();case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),A=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t);case 2:for(c in n=e.sent,r=n.content,a=[],r)r[c].forEach((function(e){return a.push(e)}));a.sort((function(e,t){return e.order-t.order})),D(a),o(a.length+1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){p(l.postID),P(l.postID),A(l.postID)}),[l.postID]);var R=function(){f.current.selectedIndex=0,y("default")},U=function(e,t){switch(e){case"text":if(_.content.text.length>0){var n=[].concat(Object(se.a)(_.content.text),[t]);L(Object(u.a)(Object(u.a)({},_),{},{content:Object(u.a)(Object(u.a)({},_.content),{},{text:n})})),D((function(e){return[].concat(Object(se.a)(e),[t])})),R()}else{var r=[t];L(Object(u.a)(Object(u.a)({},_),{},{content:Object(u.a)(Object(u.a)({},_.content),{},{text:r})})),D((function(e){return[].concat(Object(se.a)(e),[t])})),R()}break;case"image":if(_.content.image.length>0){var a=[].concat(Object(se.a)(_.content.image),[t]);L(Object(u.a)(Object(u.a)({},_),{},{content:Object(u.a)(Object(u.a)({},_.content),{},{image:a})})),D((function(e){return[].concat(Object(se.a)(e),[t])})),R()}else{var c=[t];L(Object(u.a)(Object(u.a)({},_),{},{content:Object(u.a)(Object(u.a)({},_.content),{},{image:c})})),D((function(e){return[].concat(Object(se.a)(e),[t])})),R()}break;case"gallery":if(_.content.gallery.length>0){var s=[].concat(Object(se.a)(_.content.gallery),[t]);L(Object(u.a)(Object(u.a)({},_),{},{content:Object(u.a)(Object(u.a)({},_.content),{},{gallery:s})})),D((function(e){return[].concat(Object(se.a)(e),[t])})),R()}else{var i=[t];L(Object(u.a)(Object(u.a)({},_),{},{content:Object(u.a)(Object(u.a)({},_.content),{},{gallery:i})})),D((function(e){return[].concat(Object(se.a)(e),[t])})),R()}break;case"video":if(_.content.video.length>0){var o=[].concat(Object(se.a)(_.content.video),[t]);L(Object(u.a)(Object(u.a)({},_),{},{content:Object(u.a)(Object(u.a)({},_.content),{},{video:o})})),D((function(e){return[].concat(Object(se.a)(e),[t])})),R()}else{var l=[t];L(Object(u.a)(Object(u.a)({},_),{},{content:Object(u.a)(Object(u.a)({},_.content),{},{video:l})})),D((function(e){return[].concat(Object(se.a)(e),[t])})),R()}break;case"slider":if(_.content.slider.length>0){var d=[].concat(Object(se.a)(_.content.slider),[t]);L(Object(u.a)(Object(u.a)({},_),{},{content:Object(u.a)(Object(u.a)({},_.content),{},{slider:d})})),D((function(e){return[].concat(Object(se.a)(e),[t])})),R()}else{var j=[t];L(Object(u.a)(Object(u.a)({},_),{},{content:Object(u.a)(Object(u.a)({},_.content),{},{slider:j})})),D((function(e){return[].concat(Object(se.a)(e),[t])})),R()}}},G=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,r,a,c,s,i,o,u,l,d,j;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=t.dataTransfer.getData("card_id"),r=document.getElementById(n),a=t.dataTransfer.getData("card_type"),r.style.display="block",r.className="preview",t.target.appendChild(r),c=r.parentElement.id,s=[],i=[],e.t0=a,e.next="text"===e.t0?13:"imagen"===e.t0?22:"gallery"===e.t0?31:"video"===e.t0?40:"slider"===e.t0?49:58;break;case 13:return e.next=15,me(n,{order:c});case 15:return e.next=17,he(n,{order:c});case 17:return o=e.sent,s=S.filter((function(e){return e._id!==n})),i=[].concat(Object(se.a)(s),[o.text]).sort((function(e,t){return e.order-t.order})),D(i),e.abrupt("break",59);case 22:return e.next=24,be(n,{order:c});case 24:return e.next=26,pe(n,{order:c});case 26:return u=e.sent,s=S.filter((function(e){return e._id!==n})),i=[].concat(Object(se.a)(s),[u.image]).sort((function(e,t){return e.order-t.order})),D(i),e.abrupt("break",59);case 31:return e.next=33,Ne(n,{order:c});case 33:return e.next=35,Ce(n,{order:c});case 35:return l=e.sent,s=S.filter((function(e){return e._id!==n})),i=[].concat(Object(se.a)(s),[l.gallery]).sort((function(e,t){return e.order-t.order})),D(i),e.abrupt("break",59);case 40:return e.next=42,ue(n,{order:c});case 42:return e.next=44,le(n,{order:c});case 44:return d=e.sent,s=S.filter((function(e){return e._id!==n})),i=[].concat(Object(se.a)(s),[d.video]).sort((function(e,t){return e.order-t.order})),D(i),e.abrupt("break",59);case 49:return e.next=51,ge(n,{order:c});case 51:return e.next=53,ye(n,{order:c});case 53:return j=e.sent,s=S.filter((function(e){return e._id!==n})),i=[].concat(Object(se.a)(s),[j.slider]).sort((function(e,t){return e.order-t.order})),D(i),e.abrupt("break",59);case 58:return e.abrupt("break",59);case 59:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(e){e.preventDefault()};return Object(r.jsxs)("section",{id:"add-posts-screen",children:[Object(r.jsxs)("article",{className:"post-btn-group",children:[Object(r.jsx)("p",{children:"\xbfQu\xe9 hacemos con \xe9ste post?"}),Object(r.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return F(b)},children:"Borrar Entrada"}),Object(r.jsx)("button",{className:"my-btn mini third",onClick:function(){return V(b,_)},children:"Guardar Entrada"}),Object(r.jsx)("button",{className:"my-btn mini",onClick:function(){e.goBack()},children:"Salir"})]}),Object(r.jsxs)("section",{className:"edit-post",children:[Object(r.jsxs)("div",{className:"edit-area",children:[Object(r.jsx)(Re,{savePostState:function(e){L(Object(u.a)(Object(u.a)({},_),{},{status:e}))},postState:_.status}),Object(r.jsx)("article",{className:"title-area",children:Object(r.jsxs)("form",{className:"form-title",onSubmit:function(e){e.preventDefault(),L(Object(u.a)(Object(u.a)({},_),{},{title:w.title,subtitle:w.subtitle}))},children:[Object(r.jsx)("label",{htmlFor:"title",children:"T\xedtulo de la Entrada"}),Object(r.jsx)("input",{id:"title",type:"text",name:"title",onChange:N,placeholder:_.title}),Object(r.jsx)("label",{htmlFor:"subtitle",children:"Subt\xedtulo de la Entrada"}),Object(r.jsx)("input",{id:"subtitle",type:"text",name:"subtitle",placeholder:_.subtitle,onChange:N}),Object(r.jsx)("button",{className:"my-btn mini secondary",type:"submit",children:"Guardar t\xedtulos"})]})}),Object(r.jsxs)("select",{ref:f,onChange:function(e){switch(e.target.value){case"text":y("text");break;case"image":y("image");break;case"gallery":y("gallery");break;case"video":y("video");break;case"slider":y("slider");break;default:y("default")}},name:"content",placeholder:"A\xf1adir...",children:[Object(r.jsx)("option",{value:"default",defaultValue:!0,children:" A\xf1adir... "}),Object(r.jsx)("option",{value:"text",children:"Texto"}),Object(r.jsx)("option",{value:"image",children:"Imagen \xfanica"}),Object(r.jsx)("option",{value:"gallery",children:"Galer\xeda de im\xe1genes"}),Object(r.jsx)("option",{value:"slider",children:"Slider"}),Object(r.jsx)("option",{value:"video",children:"V\xeddeo"})]}),Object(r.jsxs)("article",{className:"add-post",children:["default"===g&&Object(r.jsx)("p",{children:"A\xf1adir elemento al post"}),"text"===g&&Object(r.jsx)(Ie,{saveElement:U,postID:b,increment:c}),"image"===g&&Object(r.jsx)(Be,{saveElement:U,postID:b,increment:c}),"gallery"===g&&Object(r.jsx)(Le,{saveElement:U,postID:b,increment:c}),"video"===g&&Object(r.jsx)(Pe,{saveElement:U,postID:b,increment:c}),"slider"===g&&Object(r.jsx)(Fe,{saveElement:U,postID:b,increment:c})]}),Object(r.jsxs)("article",{className:"content-to-order",children:[Object(r.jsx)("h6",{children:"Contenido generado para ordenar"}),S.length>0&&Object(r.jsx)(Ae,{content:S,dragStart:function(e){var t=e.target;e.dataTransfer.setData("card_id",t.id),e.dataTransfer.setData("card_type",t.attributes.posttype.value),setTimeout((function(){t.style.display="none",t.className="preview"}),0)},dragOver:function(e){e.stopPropagation()},decrement:s})]})]}),Object(r.jsxs)("div",{className:"view-area",children:[_.title&&Object(r.jsx)("h1",{children:_.title}),_.subtitle&&Object(r.jsx)("h2",{children:_.subtitle}),Object(r.jsx)("h6",{children:"Orden de aparicion de los elementos"}),Object(se.a)(Array(n)).map((function(e,t){return 0!==t&&Object(r.jsx)("div",{onDrop:G,onDragOver:q,id:t,className:"receiving-container",children:Object(r.jsx)("p",{className:"container-number",children:t})},"contenedor-".concat(t))}))]})]})]})},qe=function(){var e=Object(a.useRef)(!0),t=Object(a.useContext)(o).user,n=Object(a.useReducer)(q,{}),c=Object(i.a)(n,2),s=c[0],u=c[1];return Object(a.useEffect)((function(){return function(){e.current=!1}})),Object(a.useEffect)((function(){e.current&&g("companies").then((function(e){return e.json()})).then((function(e){return u({type:l.getCompany,payload:e.company[0]})})).catch((function(e){return new Error(e)}))}),[]),Object(r.jsx)(f.a,{children:Object(r.jsx)("div",{children:t.token?Object(r.jsx)(V.Provider,{value:{company:s,dispatchCompany:u},children:Object(r.jsxs)("div",{className:"dashboard-container",children:[Object(r.jsx)(H,{}),Object(r.jsx)("main",{children:Object(r.jsxs)(O.Switch,{children:[Object(r.jsx)(O.Route,{exact:!0,path:"/bratic",component:G}),Object(r.jsx)(O.Route,{exact:!0,path:"/bratic/empresa",component:U}),Object(r.jsx)(O.Route,{exact:!0,path:"/bratic/blog",component:Z}),Object(r.jsx)(O.Route,{exact:!0,path:"/bratic/blog/nueva-entrada/:postID",component:Ue}),Object(r.jsx)(O.Route,{exact:!0,path:"/bratic/blog/:postID",component:ce}),Object(r.jsx)(O.Route,{exact:!0,path:"/bratic/blog/editar-entrada/:postID",component:Ge}),Object(r.jsx)(O.Redirect,{to:"/bratic"})]})})]})}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(J,{}),Object(r.jsxs)("main",{className:"container",children:[Object(r.jsxs)(O.Switch,{children:[Object(r.jsx)(O.Route,{exact:!0,path:"/",component:D}),Object(r.jsx)(O.Route,{path:"/registro",component:I}),Object(r.jsx)(O.Redirect,{to:"/"})]}),Object(r.jsx)("small",{children:"Made with \u2665 by Yai"}),Object(r.jsx)("small",{children:"\xa9 Bratic S.L."})]})]})})})};j.b.add(b.a,p.d,p.b,p.c,p.a);var He=function(){return JSON.parse(localStorage.getItem("bratic-user"))||{logged:!1}},Je=function(){var e=Object(a.useRef)(!0),t=Object(a.useReducer)(d,{},He),n=Object(i.a)(t,2),c=n[0],s=n[1];return Object(a.useEffect)((function(){return function(){e.current=!1}}),[]),Object(a.useEffect)((function(){e.current&&localStorage.setItem("bratic-user",JSON.stringify(c))}),[c]),Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(o.Provider,{value:{user:c,dispatch:s},children:Object(r.jsx)(qe,{})})})};s.a.render(Object(r.jsx)(Je,{}),document.getElementById("root"))},96:function(e,t,n){}},[[212,1,2]]]);
//# sourceMappingURL=main.c395c73d.chunk.js.map