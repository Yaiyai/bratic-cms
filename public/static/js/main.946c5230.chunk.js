(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{212:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(24),c=n.n(a),s=n(9),i=(0,n(2).createContext)(),o=n(4),u={login:"[auth] login",signup:"[auth] signup",logout:"[auth] logout",hasToken:"[auth] hastoken",getCompany:"[company] getCompany",addCompany:"[company] addCompany",companyUpdate:"[company] companyUpdate",companyDelete:"[company] companyDelete",getPosts:"[post] getPosts",getThisPost:"[post] getThisPost",addPost:"[post] addPost",postUpdate:"[post] postUpdate"},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.login:case u.signup:case u.hasToken:return Object(o.a)({},t.payload);case u.logout:return{logged:!1};default:return e}},d=(n(89),n(90),n(91),n(92),n(93),n(17)),j=n(16),b=n(3),p=n.n(b),O=n(5),f="https://bratic-app.herokuapp.com/api",m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",r="".concat(f,"/").concat(e);return"GET"===n?fetch(r):fetch(r,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",r="".concat(f,"/").concat(e),a=localStorage.getItem("bratic-token")||"";return"GET"===n?fetch(r,{method:n,headers:{"x-token":a}}):fetch(r,{method:n,headers:{"Content-type":"application/json","x-token":a},body:JSON.stringify(t)})},x=n(10),v=n.n(x),g=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var r,a,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("auth/login",{email:t,password:n},"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).ok){e.next=13;break}return c={id:a.id,name:a.name,email:a.email,logged:!0,token:a.token},localStorage.setItem("bratic-user",JSON.stringify(c)),localStorage.setItem("bratic-token",a.token),e.abrupt("return",c);case 13:s=a.msg,v.a.fire("Error",s,"error");case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(O.a)(p.a.mark((function e(t,n,r){var a,c,s,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("auth/signup",{name:t,email:n,password:r},"POST");case 2:return a=e.sent,e.next=5,a.json();case 5:if(!(c=e.sent).ok){e.next=13;break}return s={id:c.id,name:c.name,email:c.email,token:c.token,logged:!0},localStorage.setItem("bratic-user",JSON.stringify(s)),localStorage.setItem("bratic-token",c.token),e.abrupt("return",s);case 13:i=c.msg,v.a.fire("Error",i,"error");case 15:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),k=n(26),w=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.cloudinary.com/v1_1/bratic-app/upload",(n=new FormData).append("upload_preset","bratic-app"),n.append("file",t),n.append("folder","pre"),e.next=7,fetch("https://api.cloudinary.com/v1_1/bratic-app/upload",{method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){return r=e.secure_url})).catch((function(e){return console.log(e)}));case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useState)(e),n=Object(s.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(!1),u=Object(s.a)(i,2),l=u[0],d=u[1],j=function(){c(e)},b=function(e){var t=e.target;c(Object(o.a)(Object(o.a)({},a),{},Object(k.a)({},t.name,t.value)))},f=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,r,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,d(!0),r=n.files[0],e.next=5,w(r);case 5:return s=e.sent,e.next=8,c(Object(o.a)(Object(o.a)({},a),{},Object(k.a)({},n.name,s)));case 8:d(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{values:a,setValues:c,handleInputChange:b,handleFileChange:f,resetForm:j,loading:l}},C=n(1),S=function(){var e=N({}),t=e.values,n=e.handleInputChange,a=t.email,c=t.password,s=Object(r.useContext)(i).dispatch,o=function(){var e=Object(O.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,g(a,c);case 3:n=e.sent,s({type:u.login,payload:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("section",{className:"login",children:[Object(C.jsxs)("form",{onSubmit:o,children:[Object(C.jsx)("label",{children:"Email"}),Object(C.jsx)("input",{type:"email",onChange:n,placeholder:"Tu email",name:"email"}),Object(C.jsx)("label",{children:"Contrase\xf1a"}),Object(C.jsx)("input",{type:"password",onChange:n,placeholder:"Contrase\xf1a",name:"password"}),Object(C.jsx)("button",{type:"submit",className:"my-btn mini",children:"Entrar"})]}),Object(C.jsxs)("small",{children:["\xbfNo tienes cuenta? Crea una ",Object(C.jsx)(d.b,{to:"/registro",children:"aqu\xed"})," "]})]})})},E=function(){var e=N({}),t=e.values,n=e.handleInputChange,a=t.name,c=t.email,s=t.password,o=t.password2,l=Object(r.useContext)(i).dispatch,j=function(){var e=Object(O.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s!==o){e.next=8;break}return e.next=4,y(a,c,s);case 4:n=e.sent,l({type:u.signup,payload:n}),e.next=9;break;case 8:v.a.fire("Error","Las contrase\xf1as deben coincidir","error");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("section",{className:"login",children:[Object(C.jsxs)("form",{onSubmit:j,children:[Object(C.jsx)("label",{children:"Nombre"}),Object(C.jsx)("input",{type:"text",onChange:n,placeholder:"Tu nombre",name:"name"}),Object(C.jsx)("label",{children:"Email"}),Object(C.jsx)("input",{type:"email",onChange:n,placeholder:"Tu email",name:"email"}),Object(C.jsx)("label",{children:"Contrase\xf1a"}),Object(C.jsx)("input",{type:"password",onChange:n,placeholder:"Contrase\xf1a",name:"password"}),Object(C.jsx)("label",{children:"Repite Contrase\xf1a"}),Object(C.jsx)("input",{type:"password",onChange:n,placeholder:"Repite Contrase\xf1a",name:"password2"}),Object(C.jsx)("button",{type:"submit",className:"my-btn mini",children:"Registro"})]}),Object(C.jsxs)("small",{children:["\xbfYa est\xe1s registrado? Entra ",Object(C.jsx)(d.b,{to:"/",children:"aqu\xed"})," "]})]})})},T=n(30),D=function(e){var t=e.nameValue,n=e.deleteField,a=e.inputType,c=e.editLabel,i=e.editAction,o=e.editValue,u=e.submitEdit,l=e.imageEdit,d=void 0!==l&&l,j=Object(r.useState)(!1),b=Object(s.a)(j,2),p=b[0],O=b[1],f=function(){return O(!1)},m=function(){return O(!0)};return Object(C.jsxs)(C.Fragment,{children:[o?Object(C.jsxs)("div",{className:"edit-group",children:[d?Object(C.jsxs)("div",{children:[Object(C.jsxs)("p",{children:[c,": "]}),Object(C.jsx)("figure",{children:Object(C.jsx)("img",{src:o,alt:t})})]}):Object(C.jsxs)("p",{children:[c,": ",Object(C.jsx)("strong",{children:o})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return n(t)},children:"Borrar"}),Object(C.jsx)("button",{className:"my-btn mini",onClick:m,children:"Editar"})]})]}):Object(C.jsxs)("div",{className:"edit-group",children:[Object(C.jsxs)("p",{children:[c,": ",Object(C.jsx)("small",{children:"Sin datos"})]}),Object(C.jsx)("button",{className:"my-btn mini",onClick:m,children:"A\xf1adir"})]}),Object(C.jsxs)(T.a,{className:"edit-modal my-modals",show:p,onHide:f,children:[Object(C.jsx)(T.a.Header,{children:Object(C.jsx)(T.a.Title,{children:o})}),Object(C.jsx)(T.a.Body,{children:Object(C.jsxs)("form",{className:"edit-form",onSubmit:u,children:[Object(C.jsx)("input",{name:t,type:a,onChange:i,placeholder:o}),Object(C.jsx)("button",{className:"my-btn",type:"submit",onClick:f,children:"Guardar"})]})}),Object(C.jsx)(T.a.Footer,{children:Object(C.jsx)("button",{className:"my-btn",onClick:f,children:"cerrar"})})]})]})},_=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("companies/",t,"POST");case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(r=e.sent).ok){e.next=9;break}return a=r.company,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var r,a,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("companies/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).ok){e.next=12;break}return c=a.company,v.a.fire("\xa1Chachi!","Los cambios han sido guardados","success"),e.abrupt("return",c);case 12:s=a.error,v.a.fire("Error",s,"error");case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=Object(O.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("companies/".concat(t),{},"DELETE");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=(0,n(2).createContext)(),P=function(){var e=Object(r.useContext)(L),t=e.company,n=e.dispatchCompany,a=t.name,c=t.phone,s=t.address,i=t._id,l=t.mainEmail,d=t.mainLogo,j=t.secondaryLogo,b=t.linkedin,f=t.facebook,m=t.twitter,h=t.instagram,x=N(t),g=x.values,y=x.setValues,w=x.handleInputChange,S=x.handleFileChange,E=function(){var e=Object(O.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(i);case 2:n({type:u.companyDelete});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(O.a)(p.a.mark((function e(t){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object(o.a)(Object(o.a)({},g),{},Object(k.a)({},t,"")),y(Object(o.a)(Object(o.a)({},g),{},Object(k.a)({},t,""))),n({type:u.updateCompany,payload:r});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(e){e.preventDefault(),n({type:u.updateCompany,payload:g})},P=function(){var e=Object(O.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(i,t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("h1",{children:"Datos de empresa"}),Object(C.jsx)("button",{className:"my-btn mini",onClick:P,children:"Guardar Cambios"}),Object(C.jsx)("button",{className:"my-btn secondary mini",onClick:function(){v.a.fire({title:"\xbfSeguro?",text:"Si borras esto, no habr\xe1 datos de empresa",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\xa1Borrar Empresa!",cancelButtonText:"\xa1Uy, no!"}).then((function(e){e.isConfirmed&&(E(),v.a.fire("\xa1Empresa borrada!","Esta empresa se march\xf3 para no volver","success"))}))},children:"Borrar esta empresa"}),Object(C.jsxs)("div",{className:"editing",children:[Object(C.jsx)(D,{deleteField:T,nameValue:"name",inputType:"text",editLabel:"Nombre de empresa",editAction:w,editValue:a,submitEdit:_}),Object(C.jsx)(D,{deleteField:T,nameValue:"address",inputType:"text",editLabel:"Direcci\xf3n",editAction:w,editValue:s,submitEdit:_}),Object(C.jsx)(D,{deleteField:T,nameValue:"phone",inputType:"text",editLabel:"Tel\xe9fono principal",editAction:w,editValue:c,submitEdit:_}),Object(C.jsx)(D,{deleteField:T,nameValue:"mainEmail",inputType:"email",editLabel:"Email principal",editAction:w,editValue:l,submitEdit:_}),Object(C.jsx)(D,{deleteField:T,nameValue:"mainLogo",imageEdit:!0,inputType:"file",editLabel:"Logo Principal",editAction:S,editValue:d,submitEdit:_}),Object(C.jsx)(D,{deleteField:T,nameValue:"secondaryLogo",imageEdit:!0,inputType:"file",editLabel:"Logo BN",editAction:S,editValue:j,submitEdit:_}),Object(C.jsx)(D,{deleteField:T,nameValue:"twitter",inputType:"text",editLabel:"Twitter Url",editAction:w,editValue:m,submitEdit:_}),Object(C.jsx)(D,{deleteField:T,nameValue:"facebook",inputType:"text",editLabel:"Facebook url",editAction:w,editValue:f,submitEdit:_}),Object(C.jsx)(D,{deleteField:T,nameValue:"instagram",inputType:"text",editLabel:"Instagram Url",editAction:w,editValue:h,submitEdit:_}),Object(C.jsx)(D,{deleteField:T,nameValue:"linkedin",inputType:"text",editLabel:"Linkedin Url",editAction:w,editValue:b,submitEdit:_})]})]})},F=function(){var e=N({}),t=e.values,n=e.handleInputChange,r=e.handleFileChange,a=function(){var e=Object(O.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,_(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("form",{className:"add-form",onSubmit:a,children:[Object(C.jsx)("input",{type:"text",name:"name",placeholder:"Nombre de la empresa",onChange:n}),Object(C.jsx)("input",{type:"email",name:"mainEmail",placeholder:"Correo Principal",onChange:n}),Object(C.jsx)("input",{type:"text",name:"phone",placeholder:"Tel\xe9fono principal",onChange:n}),Object(C.jsx)("input",{type:"text",name:"address",placeholder:"Direcci\xf3n",onChange:n}),Object(C.jsx)("input",{type:"text",name:"linkedin",placeholder:"URL Linkedin",onChange:n}),Object(C.jsx)("input",{type:"text",name:"facebook",placeholder:"URL Facebook",onChange:n}),Object(C.jsx)("input",{type:"text",name:"instagram",placeholder:"URL Instagram",onChange:n}),Object(C.jsx)("input",{type:"text",name:"twitter",placeholder:"URL Twitter",onChange:n}),Object(C.jsxs)("div",{className:"input-images",children:[Object(C.jsxs)("div",{children:[Object(C.jsx)("label",{htmlFor:"mainLogo",children:"Logo principal"}),Object(C.jsx)("input",{type:"file",className:"file-input",name:"mainLogo",id:"mainLogo",placeholder:"Logo Principal",onChange:r})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("label",{htmlFor:"secondaryLogo",children:"Logo en BN"}),Object(C.jsx)("input",{type:"file",className:"file-input",name:"secondaryLogo",id:"secondaryLogo",placeholder:"Logo Secundario",onChange:r})]})]}),Object(C.jsx)("button",{className:"my-btn mini",type:"submit",children:"Crear empresa"})]})})},R=function(){var e=Object(r.useRef)(!0),t=Object(r.useContext)(L).company;return Object(r.useEffect)((function(){return function(){e.current=!1}}),[]),Object(C.jsx)(C.Fragment,{children:t._id?Object(C.jsx)(P,{}):Object(C.jsx)(F,{})})},A=function(){var e=Object(r.useContext)(i).user;return Object(C.jsx)("section",{id:"dashboard-screen",children:Object(C.jsxs)("h3",{children:["\xa1Bienvenid@ ",e.name,"!"]})})},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.getCompany:case u.addCompnany:case u.companyUpdate:case u.deleteProperty:return Object(o.a)({},t.payload);case u.maquinasCategoriesUpdate:return Object(o.a)(Object(o.a)({},e),{},{maquinasCategories:t.payload});case u.companyDelete:return{};default:return e}},U=n(29),G=n(82),q=function(){var e=Object(r.useContext)(i).dispatch,t=Object(r.useState)(!0),n=Object(s.a)(t,2),a=n[0],c=n[1],o=function(){var t=Object(O.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({type:u.logout});case 2:localStorage.removeItem("bratic-token"),localStorage.removeItem("bratic-user");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(C.jsx)(C.Fragment,{children:a?Object(C.jsx)("nav",{className:"dash-nav open",children:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("div",{className:"close-nav",children:Object(C.jsx)(U.a,{className:"close-icon",onClick:function(){return c(!1)}})}),Object(C.jsxs)("ul",{children:[Object(C.jsx)("li",{children:Object(C.jsx)(d.b,{to:"/bratic",children:Object(C.jsx)("figure",{children:Object(C.jsx)("img",{src:"https://res.cloudinary.com/bratic-app/image/upload/v1609866461/logoBN_ujpbti.svg",alt:""})})})}),Object(C.jsx)("li",{children:Object(C.jsx)(d.b,{to:"/bratic/empresa",children:"Datos de empresa"})}),Object(C.jsx)("li",{children:Object(C.jsx)(d.b,{to:"/bratic/blog",children:"Blog"})})]}),Object(C.jsxs)("div",{className:"btn-group",children:[Object(C.jsx)("small",{children:"Made with \u2665 by Yai"}),Object(C.jsx)("small",{children:"\xa9 Bratic S.L."}),Object(C.jsx)("button",{className:"my-btn secondary mini",onClick:o,children:"Cerrar Sesi\xf3n"})]})]})}):Object(C.jsx)("nav",{className:"dash-nav",children:Object(C.jsx)("div",{className:"close-nav",children:Object(C.jsx)(G.a,{className:"close-icon",onClick:function(){return c(!0)}})})})})},H=function(){return Object(C.jsx)("nav",{className:"login-nav",children:Object(C.jsxs)("div",{className:"container",children:[Object(C.jsx)("figure",{children:Object(C.jsx)("img",{src:"https://res.cloudinary.com/bratic-app/image/upload/v1609866461/logoBN_ujpbti.svg",alt:""})}),Object(C.jsxs)("ul",{children:[Object(C.jsx)("li",{children:Object(C.jsx)(d.b,{to:"/",children:"Entrar"})}),Object(C.jsx)("li",{children:Object(C.jsx)(d.b,{to:"/registro",children:"Registro"})})]})]})})},J=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("posts/".concat(t),"GET");case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(r=e.sent).ok){e.next=9;break}return a=r.posts,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("posts/post/".concat(t),"GET");case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(r=e.sent).ok){e.next=9;break}return a=r.post,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("posts/",t,"POST");case 2:return n=e.sent,e.next=5,n.json();case 5:if(!(r=e.sent).ok){e.next=9;break}return a=r.post,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var r,a,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("posts/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).ok){e.next=12;break}return c=a.post,v.a.fire("\xa1Chachi!","Los cambios han sido guardados","success"),e.abrupt("return",c);case 12:s=a.error,v.a.fire("Error",s,"error");case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Q=function(){var e=Object(O.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("posts/".concat(t),{},"DELETE");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=n(25),W=function(e){var t=e.askIfDelete,n=e.post,a=Object(r.useState)(),c=Object(s.a)(a,2),i=c[0],o=c[1],u=Object(r.useState)(),l=Object(s.a)(u,2),d=l[0],j=l[1];return Object(r.useEffect)((function(){o(new Date(n.createdAt).toLocaleString()),j(new Date(n.updatedAt).toLocaleString())}),[i,o,n]),Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("article",{className:"each-post-prev",children:[Object(C.jsxs)("div",{className:"info",children:[Object(C.jsx)("h5",{children:n.title}),i&&Object(C.jsxs)("p",{children:["Fecha de la publicaci\xf3n: ",Object(C.jsx)("strong",{children:i})]}),d&&Object(C.jsxs)("p",{children:["Fecha de la \xfaltima edici\xf3n: ",Object(C.jsx)("strong",{children:d})]}),Object(C.jsxs)("p",{className:"status",children:["Estado de la publicaci\xf3n: ",Object(C.jsx)("strong",{children:n.status})]})]}),Object(C.jsxs)("div",{className:"btn-group",children:[Object(C.jsx)("button",{className:"my-btn mini third",onClick:function(){return t(n._id)},children:"Borrar Entrada"}),Object(C.jsx)(K.Link,{className:"my-btn mini secondary",to:"/bratic/blog/editar-entrada/".concat(n._id),children:"Editar Entrada"}),Object(C.jsx)(K.Link,{className:"my-btn mini ",to:"/bratic/blog/".concat(n._id),children:"Ver Muestra"})]})]})})},X=function(){var e=Object(j.useHistory)(),t=Object(r.useRef)(!0),n=Object(r.useState)(),a=Object(s.a)(n,2),c=a[0],o=a[1],u=Object(r.useContext)(i).user,l=function(){var e=Object(O.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(u.id);case 2:t=e.sent,o(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){return function(){t.current=!1}}),[]),Object(r.useEffect)((function(){return t.current&&l(),function(){t.current=!1}}));var d=function(){var t=Object(O.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y({title:"Entrada Sin T\xedtulo",author:u.id});case 2:n=t.sent,e.push("/bratic/blog/nueva-entrada/".concat(n._id));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),b=function(){var e=Object(O.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t);case 2:return e.next=4,l();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){v.a.fire({title:"\xbfSeguro?",text:"Si borras esto, la entrada desaparece",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\xa1Borrar Entrada!",cancelButtonText:"\xa1Uy, no!"}).then((function(t){t.isConfirmed&&b(e)}))};return Object(C.jsxs)("div",{id:"posts-screen",children:[Object(C.jsx)("h2",{children:"Entradas del Blog"}),Object(C.jsxs)("p",{children:["Est\xe1s viendo las entradas del blog que ",Object(C.jsx)("strong",{className:"user",children:u.name})," (t\xfa, se\xf1or@) ha creado"]}),Object(C.jsx)("button",{className:"my-btn primary mini",onClick:d,children:"A\xf1adir entrada del blog"}),(null===c||void 0===c?void 0:c.length)>0?Object(C.jsx)("section",{className:"all-posts",children:null===c||void 0===c?void 0:c.map((function(e){return Object(C.jsx)(W,{askIfDelete:f,post:e},e._id)}))}):Object(C.jsx)("article",{className:"empty-posts",children:"No tienes entradas del blog"})]})},Z=n(83),$=n(218),ee=n(215),te=n(216),ne=n(219),re=n(217);$.a.use([ee.a,te.a]);var ae=function(){var e,t=Object(r.useRef)(!0),n=Object(j.useParams)().postID,a=Object(K.useHistory)(),c=Object(r.useState)(),i=Object(s.a)(c,2),o=i[0],u=i[1],l=Object(r.useState)(),b=Object(s.a)(l,2),f=b[0],m=b[1],h=Object(r.useState)([]),x=Object(s.a)(h,2),g=(x[0],x[1]),y=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,r,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:for(c in n=e.sent,r=n.content,a=[],r)r[c].forEach((function(e){return a.push(e)}));a.sort((function(e,t){return e.order-t.order})),g(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(O.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(n);case 2:t=e.sent,u(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){return t.current&&(k(),y(n)),function(){t.current=!1}})),Object(r.useEffect)((function(){m(null===o||void 0===o?void 0:o.content.gallery.map((function(e){return e.gallery.map((function(e){return{src:e,thumbnail:w(e),w:1200,h:900}}))})))}),[o]);var w=function(e){var t=e.split("upload/");return"".concat(t[0]).concat("upload/w_200/").concat(t[1])},N=function(){var e=Object(O.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t);case 2:a.push("/bratic/blog");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsxs)("section",{id:"post-preview",children:[Object(C.jsxs)("div",{className:"btn-group",children:[Object(C.jsx)("button",{className:"my-btn mini third",onClick:function(){return e=null===o||void 0===o?void 0:o._id,void v.a.fire({title:"\xbfSeguro?",text:"Si borras esto, la entrada desaparece",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\xa1Borrar Entrada!",cancelButtonText:"\xa1Uy, no!"}).then((function(t){t.isConfirmed&&N(e)}));var e},children:"Borrar"}),Object(C.jsx)(d.b,{className:"my-btn mini secondary",to:"/bratic/blog/editar-entrada/".concat(null===o||void 0===o?void 0:o._id),children:"Editar"}),Object(C.jsx)(d.b,{className:"my-btn mini thirsd",to:"/bratic/blog/",children:"Volver al blog"})]}),Object(C.jsx)("h1",{children:null===o||void 0===o?void 0:o.title}),(null===o||void 0===o?void 0:o.subtitle)&&Object(C.jsx)("h2",{children:null===o||void 0===o?void 0:o.subtitle}),(null===o||void 0===o?void 0:o.createdAt)&&Object(C.jsx)("small",{className:"date",children:null===o||void 0===o?void 0:o.createdAt}),(null===o||void 0===o?void 0:o.content.image.length)>0&&Object(C.jsx)("figure",{className:"main-image",children:Object(C.jsx)("img",{src:null===o||void 0===o?void 0:o.content.image[0].image,alt:""},null===o||void 0===o?void 0:o.content.image[0]._id)}),Object(C.jsxs)("div",{className:"container",children:[(null===o||void 0===o?void 0:o.content.text.length)>0&&(null===o||void 0===o?void 0:o.content.text.map((function(e,t){return Object(C.jsx)("div",{className:"post-text",dangerouslySetInnerHTML:e.parsedText},e._id)}))),(null===o||void 0===o?void 0:o.content.video.length)>0&&(null===o||void 0===o?void 0:o.content.video.map((function(e,t){return Object(C.jsx)("video",{className:"video-preview",src:e.video,controls:!0,muted:!0})}))),(null===f||void 0===f?void 0:f.length)>0&&Object(C.jsx)(Z.PhotoSwipeGallery,{items:f,thumbnailContent:function(e){e.map((function(e){return Object(C.jsx)("img",{src:e.thumbnail,alt:""})}))}}),(null===o||void 0===o||null===(e=o.content.slider)||void 0===e?void 0:e.length)>0&&Object(C.jsxs)("div",{className:"preview",children:[Object(C.jsx)("h6",{children:"Slider de fotos"}),null===o||void 0===o?void 0:o.content.slider.map((function(e,t){return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(ne.a,{spaceBetween:0,autoplay:{delay:2500},slidesPerView:1,pagination:{clickable:!0},children:e.slides.map((function(e,t){return Object(C.jsx)(re.a,{children:Object(C.jsx)("img",{src:e,alt:""})},t)}))})})}))]})]})]})},ce=n(7),se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Object(r.useState)(e),n=Object(s.a)(t,2),a=n[0],c=n[1],i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;c(a+e)},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;c(a-e)},u=function(){c(e)};return{counter:a,increment:i,decrement:o,reset:u,setCounter:c}},ie=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var r,a,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("videos/".concat(n),t,"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).ok){e.next=11;break}return c=a.video,e.abrupt("return",c);case 11:s=a.msg,v.a.fire("\xa1Oh-oh!",s,"error");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),oe=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("videos/".concat(t),{},"DELETE");case 2:return n=e.sent,e.next=5,n.json();case 5:(r=e.sent).ok||(a=r.msg,v.a.fire("\xa1Oh-oh!",a,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var r,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("videos/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:(a=e.sent).ok||(c=a.msg,v.a.fire("\xa1Oh-oh!",c,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),le=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var r,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("videos/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:if((a=e.sent).ok){e.next=11;break}c=a.msg,v.a.fire("\xa1Oh-oh!",c,"error"),e.next=12;break;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),de=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var r,a,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("images/".concat(n),t,"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).ok){e.next=11;break}return c=a.image,e.abrupt("return",c);case 11:s=a.msg,v.a.fire("\xa1Oh-oh!",s,"error");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),je=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("images/".concat(t),{},"DELETE");case 2:return n=e.sent,e.next=5,n.json();case 5:(r=e.sent).ok?v.a.fire("\xa1Bien!","Imagen Borrada","success"):(a=r.msg,v.a.fire("\xa1Oh-oh!",a,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var r,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("images/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:(a=e.sent).ok||(c=a.msg,v.a.fire("\xa1Oh-oh!",c,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),pe=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var r,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("images/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:if((a=e.sent).ok){e.next=11;break}c=a.msg,v.a.fire("\xa1Oh-oh!",c,"error"),e.next=12;break;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var r,a,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("texts/".concat(n),t,"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).ok){e.next=11;break}return c=a.text,e.abrupt("return",c);case 11:s=a.msg,v.a.fire("\xa1Oh-oh!",s,"error");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),fe=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("texts/".concat(t),{},"DELETE");case 2:return n=e.sent,e.next=5,n.json();case 5:(r=e.sent).ok?v.a.fire("\xa1Bien!","Texto borrado","success"):(a=r.msg,v.a.fire("\xa1Oh-oh!",a,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var r,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("texts/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:(a=e.sent).ok||(c=a.msg,v.a.fire("\xa1Oh-oh!",c,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),he=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var r,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("texts/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:if((a=e.sent).ok){e.next=11;break}c=a.msg,v.a.fire("\xa1Oh-oh!",c,"error"),e.next=12;break;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),xe=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var r,a,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("sliders/".concat(n),t,"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).ok){e.next=11;break}return c=a.slider,e.abrupt("return",c);case 11:s=a.msg,v.a.fire("\xa1Oh-oh!",s,"error");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ve=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("sliders/".concat(t),{},"DELETE");case 2:return n=e.sent,e.next=5,n.json();case 5:(r=e.sent).ok||(a=r.msg,v.a.fire("\xa1Oh-oh!",a,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var r,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("sliders/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:(a=e.sent).ok||(c=a.msg,v.a.fire("\xa1Oh-oh!",c,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ye=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var r,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("sliders/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:if((a=e.sent).ok){e.next=11;break}c=a.msg,v.a.fire("\xa1Oh-oh!",c,"error"),e.next=12;break;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ke=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var r,a,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("galleries/".concat(n),t,"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:if(!(a=e.sent).ok){e.next=11;break}return c=a.gallery,e.abrupt("return",c);case 11:s=a.msg,v.a.fire("\xa1Oh-oh!",s,"error");case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),we=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("galleries/".concat(t),{},"DELETE");case 2:return n=e.sent,e.next=5,n.json();case 5:(r=e.sent).ok||(a=r.msg,v.a.fire("\xa1Oh-oh!",a,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var r,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("galleries/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:(a=e.sent).ok||(c=a.msg,v.a.fire("\xa1Oh-oh!",c,"error"));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var r,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("galleries/".concat(t),n,"PUT");case 2:return r=e.sent,e.next=5,r.json();case 5:if((a=e.sent).ok){e.next=11;break}c=a.msg,v.a.fire("\xa1Oh-oh!",c,"error"),e.next=12;break;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Se=function(e){e.preventDefault()},Ee=function(e){var t=e.target;e.dataTransfer.setData("card_id",t.id),e.dataTransfer.setData("card_type",t.attributes.posttype.value),setTimeout((function(){t.style.display="none",t.className="preview"}),0)},Te=function(e){e.stopPropagation()},De=function(e){var t=e.postState,n=e.savePostState;return Object(C.jsxs)("select",{onChange:function(e){var t=e.target;n(t.value)},children:[Object(C.jsxs)("option",{value:"default",defaultValue:!0,children:[" ",t||"Cambiar Estado de la publicaci\xf3n..."," "]}),"borrador"!==t&&Object(C.jsx)("option",{value:"borrador",children:"Borrador"}),"publicado"!==t&&Object(C.jsx)("option",{value:"publicado",children:"Publicada"})]})},_e=function(e){var t=e.content,n=e.setContent,a=e.dragOver,c=e.dragStart,i=e.decrement,o=Object(r.useState)([]),u=Object(s.a)(o,2),l=u[0],d=u[1];Object(r.useEffect)((function(){d(t)}),[t]);var j=function(e){var t=l.filter((function(t){return t._id!==e}));d(t),n(t),i()},b=function(){var e=Object(O.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="text"===e.t0?3:"image"===e.t0?7:"video"===e.t0?11:"slider"===e.t0?15:"gallery"===e.t0?19:23;break;case 3:return e.next=5,fe(n);case 5:return j(n),e.abrupt("break",24);case 7:return e.next=9,je(n);case 9:return j(n),e.abrupt("break",24);case 11:return e.next=13,oe(n);case 13:return j(n),e.abrupt("break",24);case 15:return e.next=17,ve(n);case 17:return j(n),e.abrupt("break",24);case 19:return e.next=21,we(n);case 21:return j(n),e.abrupt("break",24);case 23:return e.abrupt("break",24);case 24:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(C.jsx)(C.Fragment,{children:l.length>0&&l.map((function(e){return function(e,t){switch(e){case"texto":return Object(C.jsxs)("div",{posttype:"texto",className:"preview post-text",id:t._id,onDragStart:c,onDragOver:a,draggable:"true",children:[Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Tipo de contenido:"})," Texto"]}),Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(C.jsx)("hr",{}),Object(C.jsx)("div",{dangerouslySetInnerHTML:t.parsedText}),Object(C.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return b("text",t._id)},children:"Borrar"})]},t._id);case"imagen":return Object(C.jsxs)("div",{posttype:"imagen",className:"preview post-simple-image",id:t._id,onDragStart:c,onDragOver:a,draggable:"true",children:[Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Tipo de contenido:"})," Imagen \xdanica"]}),Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(C.jsx)("hr",{}),Object(C.jsx)("img",{draggable:"false",className:"unique-image",src:t.image,alt:""}),Object(C.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return b("image",t._id)},children:"Borrar"})]},t._id);case"video":return Object(C.jsxs)("div",{posttype:"video",className:"preview post-video",id:t._id,onDragStart:c,onDragOver:a,draggable:"true",children:[Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Tipo de contenido:"})," V\xeddeo"]}),Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(C.jsx)("hr",{}),Object(C.jsx)("video",{draggable:"false",className:"video-preview",src:t.video,controls:!0,muted:!0}),Object(C.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return b("video",t._id)},children:"Borrar"})]},t._id);case"slider":return Object(C.jsxs)("div",{posttype:"slider",className:"preview post-slider",onDragStart:c,onDragOver:a,draggable:"true",children:[Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Tipo de contenido:"})," Slider"]}),Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(C.jsx)("hr",{}),Object(C.jsx)("div",{className:"gallery",children:t.slides.map((function(e,t){return Object(C.jsx)("figure",{draggable:"false",className:"each-picture",children:Object(C.jsx)("img",{draggable:"false",src:e,alt:""})},t)}))}),Object(C.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return b("slider",t._id)},children:"Borrar"})]},t._id);case"galeria":return Object(C.jsxs)("div",{posttype:"galeria",className:"preview post-gallery",id:t._id,onDragStart:c,onDragOver:a,draggable:"true",children:[Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Tipo de contenido:"})," Galer\xeda"]}),Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(C.jsx)("hr",{}),Object(C.jsx)("div",{className:"gallery",children:t.gallery.map((function(e,t){return Object(C.jsx)("figure",{draggable:"false",className:"each-picture",children:Object(C.jsx)("img",{draggable:"false",src:e,alt:""})},t)}))}),Object(C.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return b("gallery",t._id)},children:"Borrar"})]},t._id)}}(e.postType,e)}))})},Ie=function(e){var t=e.loading;return Object(C.jsx)("section",{id:"loading",className:t?"show":"hide",children:Object(C.jsxs)("div",{className:"lds-ripple",children:[Object(C.jsx)("div",{}),Object(C.jsx)("div",{})]})})},Be=function(e){var t=e.saveElement,n=e.postID,a=e.increment,c=Object(r.useState)(),i=Object(s.a)(c,2),o=i[0],u=i[1],l=Object(r.useState)([]),d=Object(s.a)(l,2),j=d[0],b=d[1],f=Object(r.useState)(!1),m=Object(s.a)(f,2),h=m[0],x=m[1],v=Object(r.useState)(!1),g=Object(s.a)(v,2),y=g[0],k=g[1],N=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,k(!0),r=n.files[0],e.next=5,w(r);case 5:a=e.sent,x(!0),u(a),k(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(O.a)(p.a.mark((function e(){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke({gallery:j},n);case 2:r=e.sent,t("gallery",r),a();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)("section",{id:"add-gallery",children:[Object(C.jsxs)("div",{className:"file-group",children:[Object(C.jsx)("input",{className:"file-input",type:"file",onChange:N,placeholder:"A\xf1adir Foto",name:"gallery"}),y&&Object(C.jsx)(Ie,{loading:!0}),h&&Object(C.jsx)("button",{onClick:function(e){e.preventDefault(),0===j.length?b([o]):(null===j||void 0===j?void 0:j.includes(o))||b([].concat(Object(ce.a)(j),[o])),x(!1)},className:"my-btn mini third",children:"A\xf1adir Imagen"})]}),Object(C.jsx)("div",{className:"gallery",children:null===j||void 0===j?void 0:j.map((function(e,t){return Object(C.jsxs)("figure",{className:"each-picture",children:[Object(C.jsx)("img",{src:e,alt:""}),Object(C.jsx)(U.a,{className:"close-icon",onClick:function(){return function(e){var t=Object(ce.a)(j);t.splice(e,1),b(t)}(t)}})]},t)}))}),j.length>0&&Object(C.jsx)("button",{className:"my-btn mini",onClick:function(){return S()},children:" A\xf1adir Galer\xeda a la entrada "})]})},Le=function(e){var t=e.saveElement,n=e.postID,r=e.increment,a=N(),c=a.values,s=a.handleFileChange,i=a.loading,o=function(){var e=Object(O.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de({image:c.image},n);case 2:a=e.sent,t("image",a),r();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{className:"file-group",children:Object(C.jsx)("input",{type:"file",className:"file-input",name:"image",id:"image",onChange:s})}),i?Object(C.jsx)(Ie,{loading:!0}):(null===c||void 0===c?void 0:c.image)&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("img",{className:"unique-image",src:c.image,alt:""}),Object(C.jsx)("button",{className:"my-btn mini",onClick:function(){return o()},children:" A\xf1adir Imagen a la Entrada"})]})]})},Pe=function(e){var t=e.saveElement,n=e.postID,a=e.increment,c=Object(r.useState)(),i=Object(s.a)(c,2),o=i[0],u=i[1],l=Object(r.useState)([]),d=Object(s.a)(l,2),j=d[0],b=d[1],f=Object(r.useState)(!1),m=Object(s.a)(f,2),h=m[0],x=m[1],v=Object(r.useState)(!1),g=Object(s.a)(v,2),y=g[0],k=g[1],N=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,k(!0),r=n.files[0],e.next=5,w(r);case 5:a=e.sent,x(!0),u(a),k(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(O.a)(p.a.mark((function e(){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe({slides:j},n);case 2:r=e.sent,t("slider",r),a();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)("section",{id:"add-slider",children:[Object(C.jsxs)("div",{className:"file-group",children:[Object(C.jsx)("input",{className:"file-input",type:"file",onChange:N,name:"slider"}),y&&Object(C.jsx)(Ie,{loading:!0}),h&&Object(C.jsx)("button",{onClick:function(e){e.preventDefault(),0===j.length?b([o]):(null===j||void 0===j?void 0:j.includes(o))||b([].concat(Object(ce.a)(j),[o])),x(!1)},className:"my-btn mini third",children:" A\xf1adir Imagen al Slider "})]}),Object(C.jsx)("div",{className:"slider-gallery",children:null===j||void 0===j?void 0:j.map((function(e,t){return Object(C.jsxs)("figure",{className:"each-picture",children:[Object(C.jsx)("img",{src:e,alt:""}),Object(C.jsx)(U.a,{className:"close-icon",onClick:function(){return function(e){var t=Object(ce.a)(j);t.splice(e,1),b(t)}(t)}})]},t)}))}),j.length>0&&Object(C.jsx)("button",{className:"my-btn mini",onClick:function(){return S()},children:"A\xf1adir Slider a la Entrada "})]})},Fe=n(84),Re=n.n(Fe),Ae=(n(211),function e(t){var n=t.setQuill,a=Object(r.useState)(""),c=Object(s.a)(a,2),i=c[0],o=c[1],u=Object(r.useRef)(null);return Object(r.useEffect)((function(){n(i)})),Object(C.jsx)("div",{children:Object(C.jsx)("div",{className:"text-editor",children:Object(C.jsx)(Re.a,{ref:u,modules:{toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{align:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],[{script:"sub"},{script:"super"}],["link"]]},clipboard:{matchVisual:!1}},formats:e.formats,theme:"snow",value:i,onChange:o})})})});Ae.formats=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","align","color","script","background"];var Ve=Ae,Ue=function(e){var t=e.saveElement,n=e.postID,a=e.increment,c=Object(r.useRef)(!0),i=Object(r.useState)(),o=Object(s.a)(i,2),u=o[0],l=o[1],d=N(),j=d.values,b=d.setValues,f=function(){var e=Object(O.a)(p.a.mark((function e(){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe(j,n);case 2:r=e.sent,t("text",r),a();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){return function(){c.current=!1}}),[]),Object(r.useEffect)((function(){c.current&&b({text:u,parsedText:{__html:u}})}),[u,b]),Object(C.jsxs)("div",{children:[Object(C.jsx)(Ve,{setQuill:l}),Object(C.jsx)("button",{className:"my-btn mini",onClick:function(){return f()},children:"A\xf1adir Texto a la entrada"})]})},Ge=function(e){var t=e.saveElement,n=e.postID,r=e.increment,a=N(),c=a.values,s=a.handleFileChange,i=a.loading,o=function(){var e=Object(O.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie({video:c.video},n);case 2:a=e.sent,t("video",a),r();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)("section",{id:"add-video",children:[Object(C.jsx)("div",{className:"file-group",children:Object(C.jsx)("input",{type:"file",className:"file-input",name:"video",id:"video",onChange:s})}),i?Object(C.jsx)(Ie,{loading:!0}):c.video&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("figure",{className:"video-preview",children:Object(C.jsx)("video",{className:"video-preview",src:c.video,controls:!0,muted:!0})}),Object(C.jsx)("button",{className:"my-btn mini",onClick:function(){return o()},children:" A\xf1adir V\xeddeo a la entrada "})]})]})},qe=function(e){var t=e.auxContent,n=e.setAuxContent,r=e.select,a=e.postId,c=e.saveElement,s=e.increment;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("h6",{children:"Tienes que a\xf1adir obligatoriamente, por lo menos, una imagen \xfanica"}),Object(C.jsxs)("select",{ref:r,onChange:function(e){switch(e.target.value){case"text":n("text");break;case"image":n("image");break;case"gallery":n("gallery");break;case"video":n("video");break;case"slider":n("slider");break;default:n("default")}},name:"content",placeholder:"A\xf1adir...",children:[Object(C.jsx)("option",{value:"default",defaultValue:!0,children:" A\xf1adir... "}),Object(C.jsx)("option",{value:"text",children:"Texto"}),Object(C.jsx)("option",{value:"image",children:"Imagen \xfanica"}),Object(C.jsx)("option",{value:"gallery",children:"Galer\xeda de im\xe1genes"}),Object(C.jsx)("option",{value:"slider",children:"Slider"}),Object(C.jsx)("option",{value:"video",children:"V\xeddeo"})]}),Object(C.jsxs)("article",{className:"add-post",children:["default"===t&&Object(C.jsx)("p",{children:"A\xf1adir elemento al post"}),"text"===t&&Object(C.jsx)(Ue,{saveElement:c,postID:a,increment:s}),"image"===t&&Object(C.jsx)(Le,{saveElement:c,postID:a,increment:s}),"gallery"===t&&Object(C.jsx)(Be,{saveElement:c,postID:a,increment:s}),"video"===t&&Object(C.jsx)(Ge,{saveElement:c,postID:a,increment:s}),"slider"===t&&Object(C.jsx)(Pe,{saveElement:c,postID:a,increment:s})]})]})},He=function(e){var t=e.drop,n=e.dragOverReceptor,r=e.idx,a=e.component,c=void 0!==a&&a;return Object(C.jsxs)("div",{onDrop:t,onDragOver:n,id:r,className:"receiving-container",children:[Object(C.jsx)("div",{className:"container-number",children:Object(C.jsxs)("p",{children:[" ",r," "]})}),c&&c]},"receiving-container-".concat(r))},Je=function(e){var t=e.selectedPost,n=e.dragOverReceptor,r=e.drop,a=e.counter,c=e.handleSaveContent;return Object(C.jsxs)("div",{className:"view-area",children:[Object(C.jsxs)("div",{className:"titles-btn",children:[Object(C.jsxs)("div",{children:[t.title&&Object(C.jsx)("h1",{children:t.title}),t.subtitle&&Object(C.jsx)("h2",{children:t.subtitle})]}),Object(C.jsx)("button",{className:"my-btn mini",onClick:function(){return c()},children:"Guardar Contenido Ordenado"})]}),Object(C.jsx)("hr",{}),Object(C.jsx)("h6",{children:"Arrastra elementos para ordenarlos como quieras que aparezcan en la web :)"}),Object(ce.a)(Array(a)).map((function(e,t){return 0!==t&&Object(C.jsx)(He,{dragOverReceptor:n,drop:r,idx:t},"er-contenedo-".concat(t))}))]})},Me=function(e){var t=e.selectedPost,n=e.saveTitles,r=e.handleInputChange;return Object(C.jsx)("article",{className:"title-area",children:Object(C.jsxs)("form",{className:"form-title",onSubmit:n,children:[Object(C.jsx)("label",{htmlFor:"title",children:"T\xedtulo de la Entrada"}),Object(C.jsx)("input",{id:"title",type:"text",name:"title",onChange:r,placeholder:t.title}),Object(C.jsx)("label",{htmlFor:"subtitle",children:"Subt\xedtulo de la Entrada"}),Object(C.jsx)("input",{id:"subtitle",type:"text",name:"subtitle",placeholder:t.subtitle,onChange:r}),Object(C.jsx)("button",{className:"my-btn mini third",type:"submit",children:" Guardar t\xedtulos "})]})})},Ye=function(){var e=Object(j.useHistory)(),t=Object(K.useParams)(),n=Object(r.useRef)(),a=se(1),c=a.counter,i=a.increment,u=a.decrement,l=N(),d=l.values,b=l.handleInputChange,f=Object(r.useState)(),m=Object(s.a)(f,2),h=m[0],x=m[1],g=Object(r.useState)("default"),y=Object(s.a)(g,2),k=y[0],w=y[1],S=Object(r.useState)({title:"Sin t\xedtulo",subtitle:"",content:{slider:[],image:[],text:[],video:[],gallery:[]}}),E=Object(s.a)(S,2),T=E[0],D=E[1],_=Object(r.useState)([]),I=Object(s.a)(_,2),B=I[0],L=I[1];Object(r.useEffect)((function(){x(t.postID),P(t.postID)}),[t.postID]);var P=function(){var e=Object(O.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:n=e.sent,D(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){n.current.selectedIndex=0,w("default")},R=function(){var t=Object(O.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q(n);case 2:e.goBack();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=function(){var t=Object(O.a)(p.a.mark((function t(n,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z(n,r);case 2:e.goBack();case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),V=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,r,a,c,s,i,o,u,l,d,j;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=t.dataTransfer.getData("card_id"),r=document.getElementById(n),a=t.dataTransfer.getData("card_type"),console.log(n),r.style.display="block",r.className="preview",t.target.appendChild(r),c=r.parentElement.id,s=[],i=[],e.t0=a,e.next="texto"===e.t0?14:"imagen"===e.t0?23:"galeria"===e.t0?32:"video"===e.t0?41:"slider"===e.t0?50:59;break;case 14:return e.next=16,me(n,{order:c});case 16:return e.next=18,he(n,{order:c});case 18:return o=e.sent,s=B.filter((function(e){return e._id!==n})),i=[].concat(Object(ce.a)(s),[o.text]).sort((function(e,t){return e.order-t.order})),L(i),e.abrupt("break",60);case 23:return e.next=25,be(n,{order:c});case 25:return e.next=27,pe(n,{order:c});case 27:return u=e.sent,s=B.filter((function(e){return e._id!==n})),i=[].concat(Object(ce.a)(s),[u.image]).sort((function(e,t){return e.order-t.order})),L(i),e.abrupt("break",60);case 32:return e.next=34,Ne(n,{order:c});case 34:return e.next=36,Ce(n,{order:c});case 36:return l=e.sent,s=B.filter((function(e){return e._id!==n})),i=[].concat(Object(ce.a)(s),[l.gallery]).sort((function(e,t){return e.order-t.order})),L(i),e.abrupt("break",60);case 41:return e.next=43,ue(n,{order:c});case 43:return e.next=45,le(n,{order:c});case 45:return d=e.sent,s=B.filter((function(e){return e._id!==n})),i=[].concat(Object(ce.a)(s),[d.video]).sort((function(e,t){return e.order-t.order})),L(i),e.abrupt("break",60);case 50:return e.next=52,ge(n,{order:c});case 52:return e.next=54,ye(n,{order:c});case 54:return j=e.sent,s=B.filter((function(e){return e._id!==n})),i=[].concat(Object(ce.a)(s),[j.slider]).sort((function(e,t){return e.order-t.order})),L(i),e.abrupt("break",60);case 59:return e.abrupt("break",60);case 60:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsxs)("section",{id:"add-posts-screen",children:[Object(C.jsxs)("article",{className:"post-btn-group",children:[Object(C.jsx)("h3",{children:"Nueva entrada del blog"}),Object(C.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return R(h)},children:"Borrar Entrada"}),Object(C.jsx)("button",{className:"my-btn mini third",onClick:function(){return A(h,T)},children:"Guardar Entrada"}),Object(C.jsx)("button",{className:"my-btn mini",onClick:function(){e.goBack()},children:"Salir"})]}),Object(C.jsxs)("section",{className:"edit-post",children:[Object(C.jsxs)("div",{className:"edit-area",children:[Object(C.jsx)(De,{savePostState:function(e){D(Object(o.a)(Object(o.a)({},T),{},{status:e}))},postState:T.status}),Object(C.jsx)(Me,{selectedPost:D,handleInputChange:b,saveTitles:function(e){e.preventDefault(),D(Object(o.a)(Object(o.a)({},T),{},{title:d.title,subtitle:d.subtitle}))}}),Object(C.jsx)(qe,{auxContent:k,setAuxContent:w,select:n,postId:h,saveElement:function(e,t){switch(e){case"text":if(T.content.text.length>0){var n=[].concat(Object(ce.a)(T.content.text),[t]);D(Object(o.a)(Object(o.a)({},T),{},{content:Object(o.a)(Object(o.a)({},T.content),{},{text:n})})),L((function(e){return[].concat(Object(ce.a)(e),[t])})),F()}else{var r=[t];D(Object(o.a)(Object(o.a)({},T),{},{content:Object(o.a)(Object(o.a)({},T.content),{},{text:r})})),L((function(e){return[].concat(Object(ce.a)(e),[t])})),F()}break;case"image":if(T.content.image.length>0){var a=[].concat(Object(ce.a)(T.content.image),[t]);D(Object(o.a)(Object(o.a)({},T),{},{content:Object(o.a)(Object(o.a)({},T.content),{},{image:a})})),L((function(e){return[].concat(Object(ce.a)(e),[t])})),F()}else{var c=[t];D(Object(o.a)(Object(o.a)({},T),{},{content:Object(o.a)(Object(o.a)({},T.content),{},{image:c})})),L((function(e){return[].concat(Object(ce.a)(e),[t])})),F()}break;case"gallery":if(T.content.gallery.length>0){var s=[].concat(Object(ce.a)(T.content.gallery),[t]);D(Object(o.a)(Object(o.a)({},T),{},{content:Object(o.a)(Object(o.a)({},T.content),{},{gallery:s})})),L((function(e){return[].concat(Object(ce.a)(e),[t])})),F()}else{var i=[t];D(Object(o.a)(Object(o.a)({},T),{},{content:Object(o.a)(Object(o.a)({},T.content),{},{gallery:i})})),L((function(e){return[].concat(Object(ce.a)(e),[t])})),F()}break;case"video":if(T.content.video.length>0){var u=[].concat(Object(ce.a)(T.content.video),[t]);D(Object(o.a)(Object(o.a)({},T),{},{content:Object(o.a)(Object(o.a)({},T.content),{},{video:u})})),L((function(e){return[].concat(Object(ce.a)(e),[t])})),F()}else{var l=[t];D(Object(o.a)(Object(o.a)({},T),{},{content:Object(o.a)(Object(o.a)({},T.content),{},{video:l})})),L((function(e){return[].concat(Object(ce.a)(e),[t])})),F()}break;case"slider":if(T.content.slider.length>0){var d=[].concat(Object(ce.a)(T.content.slider),[t]);D(Object(o.a)(Object(o.a)({},T),{},{content:Object(o.a)(Object(o.a)({},T.content),{},{slider:d})})),L((function(e){return[].concat(Object(ce.a)(e),[t])})),F()}else{var j=[t];D(Object(o.a)(Object(o.a)({},T),{},{content:Object(o.a)(Object(o.a)({},T.content),{},{slider:j})})),L((function(e){return[].concat(Object(ce.a)(e),[t])})),F()}}},increment:i}),Object(C.jsxs)("article",{className:"content-to-order",onDrop:V,onDragOver:Se,children:[Object(C.jsx)("h6",{children:"Contenido generado para ordenar"}),B.length>0&&Object(C.jsx)(_e,{content:B,setContent:L,dragStart:Ee,dragOver:Te,decrement:u})]})]}),Object(C.jsx)(Je,{selectedPost:T,dragOverReceptor:Se,drop:V,counter:c,handleSaveContent:function(){D(Object(o.a)(Object(o.a)({},T),{},{orderedContent:B})),v.a.fire("\xa1Bien!","Orden Guardado","success"),F()}})]})]})},ze=function(e){var t=e.content,n=e.setContent,a=e.dragOver,c=e.dragStart,i=e.decrement,o=e.dragOverReceptor,u=e.drop,l=Object(r.useState)([]),d=Object(s.a)(l,2),j=d[0],b=d[1];Object(r.useEffect)((function(){b(t)}),[t]);var f=function(e){var t=j.filter((function(t){return t._id!==e}));b(t),n(t),i()},m=function(){var e=Object(O.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="text"===e.t0?3:"image"===e.t0?7:"video"===e.t0?11:"slider"===e.t0?15:"gallery"===e.t0?19:23;break;case 3:return e.next=5,fe(n);case 5:return f(n),e.abrupt("break",24);case 7:return e.next=9,je(n);case 9:return f(n),e.abrupt("break",24);case 11:return e.next=13,oe(n);case 13:return f(n),e.abrupt("break",24);case 15:return e.next=17,ve(n);case 17:return f(n),e.abrupt("break",24);case 19:return e.next=21,we(n);case 21:return f(n),e.abrupt("break",24);case 23:return e.abrupt("break",24);case 24:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(C.jsx)(C.Fragment,{children:j.length>0&&j.map((function(e){return function(e,t){switch(e){case"texto":return Object(C.jsxs)("div",{onDrop:u,onDragOver:o,id:t.order,className:"receiving-container",children:[Object(C.jsx)("div",{className:"container-number",children:Object(C.jsxs)("p",{children:[" ",t.order," "]})}),Object(C.jsxs)("div",{posttype:"texto",className:"preview post-text",id:t._id,onDragStart:c,onDragOver:a,draggable:"true",children:[Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Tipo de contenido:"})," Texto"]}),Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(C.jsx)("hr",{}),Object(C.jsx)("div",{dangerouslySetInnerHTML:t.parsedText}),Object(C.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return m("text",t._id)},children:"Borrar"})]},t._id)]},"receiving-container-".concat(t.order));case"imagen":return Object(C.jsxs)("div",{onDrop:u,onDragOver:o,id:t.order,className:"receiving-container",children:[Object(C.jsx)("div",{className:"container-number",children:Object(C.jsxs)("p",{children:[" ",t.order," "]})}),Object(C.jsxs)("div",{posttype:"imagen",className:"preview post-simple-image",id:t._id,onDragStart:c,onDragOver:a,draggable:"true",children:[Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Tipo de contenido:"})," Imagen \xdanica"]}),Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(C.jsx)("hr",{}),Object(C.jsx)("img",{draggable:"false",className:"unique-image",src:t.image,alt:""}),Object(C.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return m("image",t._id)},children:"Borrar"})]},t._id)]},"receiving-container-".concat(t.order));case"video":return Object(C.jsxs)("div",{onDrop:u,onDragOver:o,id:t.order,className:"receiving-container",children:[Object(C.jsx)("div",{className:"container-number",children:Object(C.jsxs)("p",{children:[" ",t.order," "]})}),Object(C.jsxs)("div",{posttype:"video",className:"preview post-video",id:t._id,onDragStart:c,onDragOver:a,draggable:"true",children:[Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Tipo de contenido:"})," V\xeddeo"]}),Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(C.jsx)("hr",{}),Object(C.jsx)("video",{draggable:"false",className:"video-preview",src:t.video,controls:!0,muted:!0}),Object(C.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return m("video",t._id)},children:"Borrar"})]},t._id)]},"receiving-container-".concat(t.order));case"slider":return Object(C.jsxs)("div",{onDrop:u,onDragOver:o,id:t.order,className:"receiving-container",children:[Object(C.jsx)("div",{className:"container-number",children:Object(C.jsxs)("p",{children:[" ",t.order," "]})}),Object(C.jsxs)("div",{posttype:"slider",className:"preview post-slider",onDragStart:c,onDragOver:a,draggable:"true",children:[Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Tipo de contenido:"})," Slider"]}),Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(C.jsx)("hr",{}),Object(C.jsx)("div",{className:"gallery",children:t.slides.map((function(e,t){return Object(C.jsx)("figure",{draggable:"false",className:"each-picture",children:Object(C.jsx)("img",{draggable:"false",src:e,alt:""})},t)}))}),Object(C.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return m("slider",t._id)},children:"Borrar"})]},t._id)]},"receiving-container-".concat(t.order));case"galeria":return Object(C.jsxs)("div",{onDrop:u,onDragOver:o,id:t.order,className:"receiving-container",children:[Object(C.jsx)("div",{className:"container-number",children:Object(C.jsxs)("p",{children:[" ",t.order," "]})}),Object(C.jsxs)("div",{posttype:"galeria",className:"preview post-gallery",id:t._id,onDragStart:c,onDragOver:a,draggable:"true",children:[Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Tipo de contenido:"})," Galer\xeda"]}),Object(C.jsxs)("p",{children:[Object(C.jsx)("strong",{children:"Orden de aparici\xf3n:"})," ",t.order]}),Object(C.jsx)("hr",{}),Object(C.jsx)("div",{className:"gallery",children:t.gallery.map((function(e,t){return Object(C.jsx)("figure",{draggable:"false",className:"each-picture",children:Object(C.jsx)("img",{draggable:"false",src:e,alt:""})},t)}))}),Object(C.jsx)("button",{className:"my-btn mini underlined",onClick:function(){return m("gallery",t._id)},children:"Borrar"})]},t._id)]},"receiving-container-".concat(t.order))}}(e.postType,e)}))})},Qe=function(e){var t,n=e.selectedPost,r=e.dragStart,a=e.dragOver,c=e.decrement,s=e.dragOverReceptor,i=e.drop,o=e.counter,u=e.handleSaveContent,l=e.setContent;return Object(C.jsxs)("div",{className:"view-area",children:[Object(C.jsxs)("div",{className:"titles-btn",children:[Object(C.jsxs)("div",{children:[n.title&&Object(C.jsx)("h1",{children:n.title}),n.subtitle&&Object(C.jsx)("h2",{children:n.subtitle})]}),Object(C.jsx)("button",{className:"my-btn mini",onClick:function(){return u()},children:"Guardar Contenido Ordenado"})]}),Object(C.jsx)("hr",{}),Object(C.jsx)("h6",{children:"Arrastra elementos para ordenarlos como quieras que aparezcan en la web :)"}),(null===n||void 0===n||null===(t=n.orderedContent)||void 0===t?void 0:t.length)>0&&Object(C.jsx)(ze,{content:n.orderedContent,setContent:l,dragStart:r,dragOver:a,decrement:c}),Object(ce.a)(Array(o)).map((function(e,t){var r;return t>(null===n||void 0===n||null===(r=n.orderedContent)||void 0===r?void 0:r.length)&&Object(C.jsx)(He,{dragOverReceptor:s,drop:i,idx:t},"er-contenedo-".concat(t))}))]})},Ke=function(){var e=Object(j.useHistory)(),t=Object(K.useParams)(),n=Object(r.useRef)(),a=se(1),c=a.counter,i=a.increment,u=a.decrement,l=a.setCounter,d=N(),b=d.values,f=d.handleInputChange,m=Object(r.useState)(),h=Object(s.a)(m,2),x=h[0],g=h[1],y=Object(r.useState)("default"),k=Object(s.a)(y,2),w=k[0],S=k[1],E=Object(r.useState)({title:"Sin t\xedtulo",subtitle:"",content:{slider:[],image:[],text:[],video:[],gallery:[]}}),T=Object(s.a)(E,2),D=T[0],_=T[1],I=Object(r.useState)([]),B=Object(s.a)(I,2),L=B[0],P=B[1],F=Object(r.useCallback)(function(){var e=Object(O.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:if(!((n=e.sent).orderedContent.length>0)){e.next=8;break}return l(n.orderedContent.length+1),e.abrupt("return");case 8:!function(){var e=[],t=n.content;for(var r in t)t[r].forEach((function(t){return e.push(t)}));e.sort((function(e,t){return e.order-t.order})),P(e),l(e.length+1)}();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l]);Object(r.useEffect)((function(){g(t.postID),R(t.postID),F(t.postID)}),[t.postID,F]);var R=function(){var e=Object(O.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(t);case 2:n=e.sent,_(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){n.current.selectedIndex=0,S("default")},V=function(){var t=Object(O.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q(n);case 2:e.goBack();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),U=function(){var t=Object(O.a)(p.a.mark((function t(n,r){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z(n,r);case 2:e.goBack();case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),G=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,r,a,c,s,i,o,u,l,d,j;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=t.dataTransfer.getData("card_id"),r=document.getElementById(n),a=t.dataTransfer.getData("card_type"),console.log(n),r.style.display="block",r.className="preview",t.target.appendChild(r),c=r.parentElement.id,s=[],i=[],e.t0=a,e.next="texto"===e.t0?14:"imagen"===e.t0?23:"galeria"===e.t0?32:"video"===e.t0?41:"slider"===e.t0?50:59;break;case 14:return e.next=16,me(n,{order:c});case 16:return e.next=18,he(n,{order:c});case 18:return o=e.sent,s=L.filter((function(e){return e._id!==n})),i=[].concat(Object(ce.a)(s),[o.text]).sort((function(e,t){return e.order-t.order})),P(i),e.abrupt("break",60);case 23:return e.next=25,be(n,{order:c});case 25:return e.next=27,pe(n,{order:c});case 27:return u=e.sent,s=L.filter((function(e){return e._id!==n})),i=[].concat(Object(ce.a)(s),[u.image]).sort((function(e,t){return e.order-t.order})),P(i),e.abrupt("break",60);case 32:return e.next=34,Ne(n,{order:c});case 34:return e.next=36,Ce(n,{order:c});case 36:return l=e.sent,s=L.filter((function(e){return e._id!==n})),i=[].concat(Object(ce.a)(s),[l.gallery]).sort((function(e,t){return e.order-t.order})),P(i),e.abrupt("break",60);case 41:return e.next=43,ue(n,{order:c});case 43:return e.next=45,le(n,{order:c});case 45:return d=e.sent,s=L.filter((function(e){return e._id!==n})),i=[].concat(Object(ce.a)(s),[d.video]).sort((function(e,t){return e.order-t.order})),P(i),e.abrupt("break",60);case 50:return e.next=52,ge(n,{order:c});case 52:return e.next=54,ye(n,{order:c});case 54:return j=e.sent,s=L.filter((function(e){return e._id!==n})),i=[].concat(Object(ce.a)(s),[j.slider]).sort((function(e,t){return e.order-t.order})),P(i),e.abrupt("break",60);case 59:return e.abrupt("break",60);case 60:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsxs)("section",{id:"add-posts-screen",children:[Object(C.jsxs)("article",{className:"post-btn-group",children:[Object(C.jsxs)("h3",{children:["Editar entrada : ",D.title]}),Object(C.jsx)("button",{className:"my-btn mini secondary",onClick:function(){return V(x)},children:"Borrar Entrada"}),Object(C.jsx)("button",{className:"my-btn mini third",onClick:function(){return U(x,D)},children:"Guardar Entrada"}),Object(C.jsx)("button",{className:"my-btn mini",onClick:function(){e.goBack()},children:"Salir"})]}),Object(C.jsxs)("section",{className:"edit-post",children:[Object(C.jsxs)("div",{className:"edit-area",children:[Object(C.jsx)(De,{savePostState:function(e){_(Object(o.a)(Object(o.a)({},D),{},{status:e}))},postState:D.status}),Object(C.jsx)(Me,{selectedPost:_,handleInputChange:f,saveTitles:function(e){e.preventDefault(),_(Object(o.a)(Object(o.a)({},D),{},{title:b.title,subtitle:b.subtitle}))}}),Object(C.jsx)(qe,{auxContent:w,setAuxContent:S,select:n,postId:x,saveElement:function(e,t){switch(e){case"text":if(D.content.text.length>0){var n=[].concat(Object(ce.a)(D.content.text),[t]);_(Object(o.a)(Object(o.a)({},D),{},{content:Object(o.a)(Object(o.a)({},D.content),{},{text:n})})),P((function(e){return[].concat(Object(ce.a)(e),[t])})),A()}else{var r=[t];_(Object(o.a)(Object(o.a)({},D),{},{content:Object(o.a)(Object(o.a)({},D.content),{},{text:r})})),P((function(e){return[].concat(Object(ce.a)(e),[t])})),A()}break;case"image":if(D.content.image.length>0){var a=[].concat(Object(ce.a)(D.content.image),[t]);_(Object(o.a)(Object(o.a)({},D),{},{content:Object(o.a)(Object(o.a)({},D.content),{},{image:a})})),P((function(e){return[].concat(Object(ce.a)(e),[t])})),A()}else{var c=[t];_(Object(o.a)(Object(o.a)({},D),{},{content:Object(o.a)(Object(o.a)({},D.content),{},{image:c})})),P((function(e){return[].concat(Object(ce.a)(e),[t])})),A()}break;case"gallery":if(D.content.gallery.length>0){var s=[].concat(Object(ce.a)(D.content.gallery),[t]);_(Object(o.a)(Object(o.a)({},D),{},{content:Object(o.a)(Object(o.a)({},D.content),{},{gallery:s})})),P((function(e){return[].concat(Object(ce.a)(e),[t])})),A()}else{var i=[t];_(Object(o.a)(Object(o.a)({},D),{},{content:Object(o.a)(Object(o.a)({},D.content),{},{gallery:i})})),P((function(e){return[].concat(Object(ce.a)(e),[t])})),A()}break;case"video":if(D.content.video.length>0){var u=[].concat(Object(ce.a)(D.content.video),[t]);_(Object(o.a)(Object(o.a)({},D),{},{content:Object(o.a)(Object(o.a)({},D.content),{},{video:u})})),P((function(e){return[].concat(Object(ce.a)(e),[t])})),A()}else{var l=[t];_(Object(o.a)(Object(o.a)({},D),{},{content:Object(o.a)(Object(o.a)({},D.content),{},{video:l})})),P((function(e){return[].concat(Object(ce.a)(e),[t])})),A()}break;case"slider":if(D.content.slider.length>0){var d=[].concat(Object(ce.a)(D.content.slider),[t]);_(Object(o.a)(Object(o.a)({},D),{},{content:Object(o.a)(Object(o.a)({},D.content),{},{slider:d})})),P((function(e){return[].concat(Object(ce.a)(e),[t])})),A()}else{var j=[t];_(Object(o.a)(Object(o.a)({},D),{},{content:Object(o.a)(Object(o.a)({},D.content),{},{slider:j})})),P((function(e){return[].concat(Object(ce.a)(e),[t])})),A()}}},increment:i}),Object(C.jsxs)("article",{className:"content-to-order",onDrop:G,onDragOver:Se,children:[Object(C.jsx)("h6",{children:"Contenido generado para ordenar"}),L.length>0&&Object(C.jsx)(_e,{content:L,setContent:P,dragStart:Ee,dragOver:Te,decrement:u})]})]}),Object(C.jsx)(Qe,{selectedPost:D,dragOverReceptor:Se,dragOver:Te,drop:G,decrement:u,counter:c,handleSaveContent:function(){_(Object(o.a)(Object(o.a)({},D),{},{orderedContent:[].concat(Object(ce.a)(D.orderedContent),[L])})),v.a.fire("\xa1Bien!","Orden Guardado","success"),A()},dragStart:Ee,setContent:P})]})]})},We=function(){var e=Object(r.useRef)(!0),t=Object(r.useContext)(i).user,n=Object(r.useReducer)(V,{}),a=Object(s.a)(n,2),c=a[0],o=a[1];return Object(r.useEffect)((function(){return function(){e.current=!1}})),Object(r.useEffect)((function(){e.current&&m("companies").then((function(e){return e.json()})).then((function(e){return o({type:u.getCompany,payload:e.company[0]})})).catch((function(e){return new Error(e)}))}),[]),Object(C.jsx)(d.a,{children:Object(C.jsx)("div",{children:t.token?Object(C.jsx)(L.Provider,{value:{company:c,dispatchCompany:o},children:Object(C.jsxs)("div",{className:"dashboard-container",children:[Object(C.jsx)(q,{}),Object(C.jsx)("main",{children:Object(C.jsxs)(j.Switch,{children:[Object(C.jsx)(j.Route,{exact:!0,path:"/bratic",component:A}),Object(C.jsx)(j.Route,{exact:!0,path:"/bratic/empresa",component:R}),Object(C.jsx)(j.Route,{exact:!0,path:"/bratic/blog",component:X}),Object(C.jsx)(j.Route,{exact:!0,path:"/bratic/blog/nueva-entrada/:postID",component:Ye}),Object(C.jsx)(j.Route,{exact:!0,path:"/bratic/blog/:postID",component:ae}),Object(C.jsx)(j.Route,{exact:!0,path:"/bratic/blog/editar-entrada/:postID",component:Ke}),Object(C.jsx)(j.Redirect,{to:"/bratic"})]})})]})}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(H,{}),Object(C.jsxs)("main",{className:"container",children:[Object(C.jsxs)(j.Switch,{children:[Object(C.jsx)(j.Route,{exact:!0,path:"/",component:S}),Object(C.jsx)(j.Route,{path:"/registro",component:E}),Object(C.jsx)(j.Redirect,{to:"/"})]}),Object(C.jsx)("small",{children:"Made with \u2665 by Yai"}),Object(C.jsx)("small",{children:"\xa9 Bratic S.L."})]})]})})})},Xe=function(){return JSON.parse(localStorage.getItem("bratic-user"))||{logged:!1}},Ze=function(){var e=Object(r.useRef)(!0),t=Object(r.useReducer)(l,{},Xe),n=Object(s.a)(t,2),a=n[0],c=n[1];return Object(r.useEffect)((function(){return function(){e.current=!1}}),[]),Object(r.useEffect)((function(){e.current&&localStorage.setItem("bratic-user",JSON.stringify(a))}),[a]),Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(i.Provider,{value:{user:a,dispatch:c},children:Object(C.jsx)(We,{})})})};c.a.render(Object(C.jsx)(Ze,{}),document.getElementById("root"))},93:function(e,t,n){}},[[212,1,2]]]);
//# sourceMappingURL=main.946c5230.chunk.js.map